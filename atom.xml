<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Coding Your Life</title>
  
  <subtitle>æŠ€æœ¯ä¸æ—¥å¸¸åˆ†äº« &amp; Technology and daily sharing &amp; ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã¨æ—¥ã€…ã®å…±æœ‰</subtitle>
  <link href="https://gofugui.github.io/atom.xml" rel="self"/>
  
  <link href="https://gofugui.github.io/"/>
  <updated>2025-05-26T02:49:43.868Z</updated>
  <id>https://gofugui.github.io/</id>
  
  <author>
    <name>Sir_Liu</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>webpackåŸºç¡€é…ç½®è¯¦è§£</title>
    <link href="https://gofugui.github.io/2025/05/26/webpack%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3/"/>
    <id>https://gofugui.github.io/2025/05/26/webpack%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3/</id>
    <published>2025-05-26T01:29:43.393Z</published>
    <updated>2025-05-26T02:49:43.868Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><pre><code>webpackæ˜¯ä¸€ä¸ªæ¨¡å—æ‰“åŒ…å·¥å…·,å…¶æœ€æ–°ç‰ˆæœ¬æ˜¯webpack5ï¼Œå®ƒå¯ä»¥å°†å¤šä¸ªæ¨¡å—è¿›è¡Œæ‰“åŒ…ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªæˆ–å¤šä¸ªé™æ€èµ„æºæ–‡ä»¶ã€‚webpackçš„é…ç½®æ–‡ä»¶ä¸ºwebpack.config.jsï¼Œè¯¥æ–‡ä»¶åŒ…å«webpackçš„é…ç½®ä¿¡æ¯ï¼Œå¦‚å…¥å£æ–‡ä»¶ã€è¾“å‡ºæ–‡ä»¶ã€æ¨¡å—åŠ è½½è§„åˆ™ã€æ’ä»¶ç­‰ã€‚ä¸‹é¢æˆ‘ä»¬å°†ä»¥ä¸€ä¸ªç®€å•çš„webpacké…ç½®æ–‡ä»¶ä¸ºä¾‹ï¼Œå¯¹webpacké…ç½®é¡¹è¿›è¡Œä»‹ç»ã€‚</code></pre><h1 id="webpacké…ç½®é¡¹"><a href="#webpacké…ç½®é¡¹" class="headerlink" title="webpacké…ç½®é¡¹"></a>webpacké…ç½®é¡¹</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @type &#123;import('webpack').Configuration&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1ã€æŒ‡å®šhtmlæ¨¡ç‰ˆ 2ã€åˆ›å»ºhtmlæ–‡ä»¶ 3ã€è‡ªåŠ¨å¼•å…¥æ‰“åŒ…åçš„æ–‡ä»¶ 4ã€å‹ç¼©htmlæ–‡ä»¶ 5ã€é…ç½®é¡µé¢æ ‡é¢˜,æŒ‡å®šjsæ–‡ä»¶å¼•å…¥ä½ç½®ï¼ˆhead/bodyï¼‰</span></span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> MiniCssExtractPlugin = <span class="built_in">require</span>(<span class="string">'mini-css-extract-plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰é¡µé¢é…ç½®(å¦‚æœæ˜¯reactæˆ–è€…vueé¡¹ç›®å¯ä»¥é…ç½®ä¸ºå•å…¥å£çš„å•é¡µé¢åº”ç”¨ï¼Œæ­¤å¤„æˆ‘ä»¥jsé¡¹ç›®ä¸ºä¾‹ï¼Œé…ç½®å¤šé¡µé¢åº”ç”¨)</span></span><br><span class="line"><span class="keyword">const</span> pages = [</span><br><span class="line">    &#123;</span><br><span class="line">        name: <span class="string">'home'</span>,</span><br><span class="line">        entry: <span class="string">'./src/pages/home/index.js'</span>, <span class="comment">// é¡µé¢å…¥å£æ–‡ä»¶</span></span><br><span class="line">        template: <span class="string">'./src/pages/home/index.html'</span>, <span class="comment">// é¡µé¢æ¨¡æ¿</span></span><br><span class="line">        title: <span class="string">'é¦–é¡µ'</span>,</span><br><span class="line">        chunks: [<span class="string">'home'</span>, <span class="string">'vendor'</span>, <span class="string">'common'</span>] <span class="comment">// æŒ‡å®šéœ€è¦å¼•å…¥çš„chunk</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        name: <span class="string">'about'</span>,</span><br><span class="line">        entry: <span class="string">'./src/pages/about/index.js'</span>,</span><br><span class="line">        template: <span class="string">'./src/pages/about/index.html'</span>,</span><br><span class="line">        title: <span class="string">'å…³äºæˆ‘ä»¬'</span>,</span><br><span class="line">        chunks: [<span class="string">'about'</span>, <span class="string">'vendor'</span>, <span class="string">'common'</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        name: <span class="string">'contact'</span>,</span><br><span class="line">        entry: <span class="string">'./src/pages/contact/index.js'</span>,</span><br><span class="line">        template: <span class="string">'./src/pages/contact/index.html'</span>,</span><br><span class="line">        title: <span class="string">'è”ç³»æˆ‘ä»¬'</span>,</span><br><span class="line">        chunks: [<span class="string">'contact'</span>, <span class="string">'vendor'</span>, <span class="string">'common'</span>]</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    mode: <span class="string">'development'</span>, <span class="comment">// or 'production'</span></span><br><span class="line">    entry: pages.reduce(<span class="function">(<span class="params">acc, page</span>) =&gt;</span> &#123;</span><br><span class="line">        acc[page.name] = page.entry;</span><br><span class="line">        <span class="keyword">return</span> acc;</span><br><span class="line">    &#125;, &#123;&#125;),</span><br><span class="line">    output: &#123;</span><br><span class="line">        path: path.resolve(__dirname, <span class="string">'dist'</span>), <span class="comment">// è¾“å‡ºè·¯å¾„</span></span><br><span class="line">        filename: <span class="string">'js/[name].[contenthash].js'</span>, <span class="comment">// è¾“å‡ºæ–‡ä»¶å</span></span><br><span class="line">        clean: <span class="literal">true</span> <span class="comment">//  æ¸…ç©ºdistç›®å½•</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// æ’é™¤æŸäº›æ¨¡å—ï¼Œä½¿å…¶ä¸è¢«æ‰“åŒ…ï¼Œè€Œæ˜¯é€šè¿‡å¤–éƒ¨æ–¹å¼ï¼ˆå¦‚ CDNï¼‰å¼•å…¥ã€‚</span></span><br><span class="line">    <span class="comment">// ä¸splitChunksçš„åŒºåˆ«æ˜¯ï¼šexternalsä¼šé€šè¿‡å¤–éƒ¨æ–¹å¼ï¼ˆå¦‚ CDNï¼‰å¼•å…¥å‡å°‘åŒ…çš„ä½“ç§¯ï¼Œ</span></span><br><span class="line">    <span class="comment">// è€ŒsplitChunksä¼šæ ¹æ®ä»£ç ä¸­å¼•ç”¨çš„æ¨¡å—è¿›è¡Œæ‹†åˆ†ç„¶åæ‰“åŒ…è¿›vendorä¸­ã€‚</span></span><br><span class="line">    externals: &#123;</span><br><span class="line">        <span class="string">'react'</span>: <span class="string">'React'</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    optimization: &#123;</span><br><span class="line">        splitChunks: &#123;</span><br><span class="line">            <span class="comment">// chunks åˆ†å‰²ä»£ç å— å–å€¼ allã€asyncã€initialï¼Œ </span></span><br><span class="line">            <span class="comment">// async è¡¨ç¤ºåˆ†å‰²å¼‚æ­¥ä»£ç å—ï¼Œinitial è¡¨ç¤ºåˆ†å‰²åŒæ­¥ä»£ç å—ï¼Œall è¡¨ç¤ºåˆ†å‰²æ‰€æœ‰ä»£ç å—</span></span><br><span class="line">            chunks: <span class="string">'all'</span>, </span><br><span class="line">            minSize: <span class="number">30000</span>, <span class="comment">// ç”Ÿæˆå—çš„æœ€å°å­—èŠ‚æ•°, é»˜è®¤å€¼ 30kb</span></span><br><span class="line">            maxSize: <span class="number">0</span>,     <span class="comment">// ç”Ÿæˆå—çš„æœ€å¤§å­—èŠ‚æ•°, ä¸º0byteè¡¨ç¤ºä¸é™åˆ¶ </span></span><br><span class="line">            minChunks: <span class="number">1</span>,   <span class="comment">// å¼•ç”¨æ¬¡æ•°è¶…è¿‡è¯¥æ¬¡æ•°çš„ä»£ç å—æ‰ä¼šè¢«åˆ†å‰²</span></span><br><span class="line">            maxAsyncRequests: <span class="number">30</span>, <span class="comment">// æŒ‰éœ€åŠ è½½çš„æœ€å¤§å¼‚æ­¥è¯·æ±‚æ•°</span></span><br><span class="line">            maxInitialRequests: <span class="number">30</span>, <span class="comment">// å…¥å£ç‚¹çš„æœ€å¤§å¹¶è¡Œè¯·æ±‚æ•°</span></span><br><span class="line">            automaticNameDelimiter: <span class="string">'~'</span>, <span class="comment">//  ç”Ÿæˆæ–‡ä»¶åçš„åˆ†éš”ç¬¦</span></span><br><span class="line">            cacheGroups: &#123;      <span class="comment">// ç¼“å­˜ç»„</span></span><br><span class="line">                vendor: &#123;</span><br><span class="line">                    test: <span class="regexp">/[\\/]node_modules[\\/]/</span>,</span><br><span class="line">                    name: <span class="string">'vendor'</span>,</span><br><span class="line">                    priority: <span class="number">-10</span>, <span class="comment">// ç¼“å­˜ä¼˜å…ˆçº§ï¼Œæ•°å­—è¶Šå¤§ï¼Œä¼˜å…ˆçº§è¶Šé«˜</span></span><br><span class="line">                &#125;,</span><br><span class="line">                common: &#123;</span><br><span class="line">                    test: <span class="regexp">/[\\/]src[\\/]components[\\/]/</span>,</span><br><span class="line">                    name: <span class="string">'common'</span>,</span><br><span class="line">                    minChunks: <span class="number">2</span>, <span class="comment">// è¦†ç›–é»˜è®¤é…ç½®ï¼Œ è¢«å¼•ç”¨æ¬¡æ•°è¶…è¿‡2çš„æ¨¡å—ä¼šè¢«æŠ½ç¦»æˆå…¬å…±æ¨¡å—</span></span><br><span class="line">                &#125;,</span><br><span class="line">               </span><br><span class="line">                <span class="keyword">default</span>: &#123;</span><br><span class="line">                    reuseExistingChunk: <span class="literal">true</span>, <span class="comment">// é‡ç”¨å·²æœ‰çš„å—</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.ts?$/</span>,</span><br><span class="line">                exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">                use: <span class="string">'ts-loader'</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">                use: [MiniCssExtractPlugin.loader, <span class="string">'css-loader'</span>]</span><br><span class="line">            &#125;,</span><br><span class="line">          </span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">            filename: <span class="string">'css/[name].[conntenthash].css'</span></span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="comment">// ä¸ºæ¯ä¸ªé¡µé¢åˆ›å»ºç‹¬ç«‹çš„HtmlWebpackPluginå®ä¾‹</span></span><br><span class="line">        ...pages.map(<span class="function"><span class="params">page</span> =&gt;</span> <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">            template: path.resolve(__dirname, page.template),</span><br><span class="line">            filename: <span class="string">`<span class="subst">$&#123;page.filename&#125;</span>.html`</span>,</span><br><span class="line">             <span class="comment">//  æŒ‡å®šè¦ä½¿ç”¨çš„chunk å¼•å…¥çš„chunk, </span></span><br><span class="line">             <span class="comment">//  ä½¿ç”¨ excludeChunks: ['common']æŒ‡å®šä¸å¼•å…¥çš„chunk</span></span><br><span class="line">            chunks: page.chunks,   </span><br><span class="line">            title: page.title,  <span class="comment">// è®¾ç½®é¡µé¢æ ‡é¢˜</span></span><br><span class="line">            inject: <span class="string">'body'</span>, <span class="comment">// or 'head' è¡¨ç¤ºè¦æ’å…¥çš„æ ‡ç­¾ä½ç½®</span></span><br><span class="line">            scriptLoading: <span class="string">'defer'</span>, <span class="comment">// æ·»åŠ  defer å±æ€§</span></span><br><span class="line">            env: &#123;</span><br><span class="line">                APP_ENV: process.env.APP_ENV, <span class="comment">//  è®¾ç½®ç¯å¢ƒå˜é‡ åœ¨æ¨¡æ¿ä¸­é€šè¿‡ &lt;%= APP_ENV %&gt; è®¿é—®</span></span><br><span class="line">            &#125;,</span><br><span class="line">            minify: &#123;</span><br><span class="line">                removeComments: <span class="literal">true</span>,   <span class="comment">// åˆ é™¤æ³¨é‡Š</span></span><br><span class="line">                collapseWhitespace: <span class="literal">true</span>, <span class="comment">// åˆ é™¤ç©ºæ ¼</span></span><br><span class="line">                removeRedundantAttributes: <span class="literal">true</span>, <span class="comment">// åˆ é™¤å†—ä½™å±æ€§</span></span><br><span class="line">                minifyCSS: <span class="literal">true</span>, <span class="comment">//   å‹ç¼©css</span></span><br><span class="line">                minifyJS: <span class="literal">true</span>, <span class="comment">//   å‹ç¼©js</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;))</span><br><span class="line">    ],</span><br><span class="line">    devServer: &#123;</span><br><span class="line">        contentBase: path.join(__dirname, <span class="string">'dist'</span>),</span><br><span class="line">        compress: <span class="literal">true</span>, <span class="comment">// å¯ç”¨gzipå‹ç¼©</span></span><br><span class="line">        port: <span class="number">9000</span>, <span class="comment">//  ç«¯å£å·</span></span><br><span class="line">        hot: <span class="literal">true</span>, <span class="comment">//   å¯ç”¨çƒ­æ›´æ–°</span></span><br><span class="line">        open: <span class="literal">true</span>, <span class="comment">//  è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><h2 id="external-å’Œ-splitChunksä¼˜åŒ–ç­–ç•¥çš„åŒºåˆ«"><a href="#external-å’Œ-splitChunksä¼˜åŒ–ç­–ç•¥çš„åŒºåˆ«" class="headerlink" title="external å’Œ splitChunksä¼˜åŒ–ç­–ç•¥çš„åŒºåˆ«"></a>external å’Œ splitChunksä¼˜åŒ–ç­–ç•¥çš„åŒºåˆ«</h2><ol><li><p>splitChunks å’Œ externals æ˜¯ä¸¤ç§ä¸åŒçš„ä»£ç ä¼˜åŒ–ç­–ç•¥ï¼Œå®ƒä»¬çš„æ ¸å¿ƒåŒºåˆ«åœ¨äºï¼š<strong>æ˜¯å¦å°†ä¾èµ–æ‰“åŒ…åˆ°æœ€ç»ˆäº§ç‰©ä¸­</strong>ã€‚</p></li><li><p>externals å¯ä»¥å°†æŸäº›ä¾èµ–ä»æœ€ç»ˆäº§ç‰©ä¸­æ’é™¤ï¼Œä»è€Œå‡å°‘æœ€ç»ˆäº§ç‰©çš„ä½“ç§¯ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ çš„ä»£ç ä¸­å¼•å…¥äº† jQueryï¼Œä½ å¯ä»¥å°† jQuery è®¾ç½®ä¸º externalï¼Œè¿™æ · jQuery å°±ä¸ä¼šè¢«æ‰“åŒ…è¿›æœ€ç»ˆäº§ç‰©ä¸­ã€‚</p></li><li><p>splitChunksï¼šé€‚åˆä¼˜åŒ–å†…éƒ¨ä»£ç ç»“æ„ï¼Œæå–å…¬å…±ä¾èµ–ï¼Œå®ç°æŒ‰éœ€åŠ è½½ã€‚<br>externalsï¼šé€‚åˆæ’é™¤å¤§å‹ç¬¬ä¸‰æ–¹åº“ï¼Œå‡å°‘æ‰“åŒ…ä½“ç§¯ï¼Œåˆ©ç”¨ CDN åŠ é€Ÿæˆ–å…±äº«å…¨å±€èµ„æºã€‚</p></li></ol><h2 id="splitChunksæ€§èƒ½ä¼˜åŒ–å»ºè®®"><a href="#splitChunksæ€§èƒ½ä¼˜åŒ–å»ºè®®" class="headerlink" title="splitChunksæ€§èƒ½ä¼˜åŒ–å»ºè®®"></a>splitChunksæ€§èƒ½ä¼˜åŒ–å»ºè®®</h2><ol><li>åˆç†è®¾ç½® minSizeï¼šè¿‡å°ä¼šå¯¼è‡´ç”Ÿæˆè¿‡å¤šå°æ–‡ä»¶ï¼Œå¢åŠ è¯·æ±‚æ•°ï¼Œè¿‡å¤§ä¼šå¯¼è‡´å•ä¸ªæ–‡ä»¶è¿‡å¤§ï¼Œå½±å“åŠ è½½é€Ÿåº¦</li><li>æ§åˆ¶ç¼“å­˜ç»„ä¼˜å…ˆçº§ï¼šç¬¬ä¸‰æ–¹åº“ä¼˜å…ˆçº§åº”é«˜äºå…¬å…±ç»„ä»¶ï¼ˆå¦‚ vendor è®¾ä¸º -10ï¼Œcommon è®¾ä¸º -20ï¼‰é¿å…è¿‡åº¦æ‹†åˆ†ï¼š</li><li>ä¸è¦ä¸ºæ¯ä¸ªæ¨¡å—åˆ›å»ºå•ç‹¬çš„ chunkï¼Œå¦åˆ™ä¼šå¯¼è‡´è¯·æ±‚æ•°è¿‡å¤š</li><li>ç»“åˆ CDN ä½¿ç”¨ï¼šå°† vendor chunk éƒ¨ç½²åˆ° CDNï¼Œåˆ©ç”¨æµè§ˆå™¨ç¼“å­˜</li><li>ä½¿ç”¨ webpack-bundle-analyzer åˆ†ææ‰“åŒ…ç»“æœï¼Œä»¥ç¡®å®šå“ªäº›æ¨¡å—éœ€è¦æ‹†åˆ†</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;pre&gt;&lt;code&gt;webpackæ˜¯ä¸€ä¸ªæ¨¡å—æ‰“åŒ…å·¥å…·,å…¶æœ€æ–°ç‰ˆæœ¬æ˜¯webpack5ï¼Œå®ƒå¯ä»¥å°†å¤šä¸ªæ¨¡å—è¿›è¡Œæ‰“åŒ…ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªæˆ–å¤šä¸ªé™æ€èµ„æºæ–‡ä»¶ã€‚
w</summary>
      
    
    
    
    <category term="webpack" scheme="https://gofugui.github.io/categories/webpack/"/>
    
    
    <category term="webpack" scheme="https://gofugui.github.io/tags/webpack/"/>
    
  </entry>
  
  <entry>
    <title>canvaså®ç°ä»£ç é›¨æ•ˆæœ</title>
    <link href="https://gofugui.github.io/2025/05/25/canvas%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81%E9%9B%A8%E6%95%88%E6%9E%9C/"/>
    <id>https://gofugui.github.io/2025/05/25/canvas%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81%E9%9B%A8%E6%95%88%E6%9E%9C/</id>
    <published>2025-05-25T04:59:01.257Z</published>
    <updated>2025-05-25T05:09:26.883Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>canvasç»˜å›¾æ˜¯ä¸€ç§æ¯”è¾ƒå¸¸ç”¨çš„å‰ç«¯æŠ€æœ¯ï¼Œé€‚ç”¨åœºæ™¯åŒ…æ‹¬ï¼šç”»æ¿ã€æ¸¸æˆã€åŠ¨ç”»ã€å›¾è¡¨ã€è§†é¢‘ç­‰ã€‚ä¸‹é¢æˆ‘ä»¬ä½¿ç”¨è¯¥æŠ€æœ¯å®Œæˆä¸€ä¸ªä»£ç é›¨æ•ˆæœã€‚</p><h1 id="é¡¹ç›®ä½“éªŒåœ°å€ï¼š-canvaså®ç°ä»£ç é›¨æ•ˆæœ"><a href="#é¡¹ç›®ä½“éªŒåœ°å€ï¼š-canvaså®ç°ä»£ç é›¨æ•ˆæœ" class="headerlink" title="é¡¹ç›®ä½“éªŒåœ°å€ï¼š canvaså®ç°ä»£ç é›¨æ•ˆæœ"></a>é¡¹ç›®ä½“éªŒåœ°å€ï¼š <a href="https://gofugui.github.io/raincode/index.html">canvaså®ç°ä»£ç é›¨æ•ˆæœ</a></h1><h3 id="æ ¸å¿ƒä»£ç ï¼š"><a href="#æ ¸å¿ƒä»£ç ï¼š" class="headerlink" title="æ ¸å¿ƒä»£ç ï¼š"></a>æ ¸å¿ƒä»£ç ï¼š</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'canvas'</span>);</span><br><span class="line"><span class="keyword">const</span> animationInterval: <span class="built_in">number</span> | <span class="literal">null</span> = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é¢„ç•™å‚æ•°ç”¨äºåç»­å¯ä»¥è‡ªå®šä¹‰åŠ¨ç”»å†…å®¹</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">rainCode</span>(<span class="params">rainCodeStr="TSDJXHS1010",fillStyle='#22C55E'</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> width = <span class="built_in">window</span>.innerWidth;</span><br><span class="line">    <span class="keyword">const</span> height = <span class="built_in">window</span>.innerHeight;</span><br><span class="line">    rainCodeStr = rainCodeStr?.toUpperCase() ||<span class="string">'TSDJXHS1010'</span> ;</span><br><span class="line">    <span class="keyword">const</span> rainCodeArr = rainCodeStr.split(<span class="string">''</span>);</span><br><span class="line">    canvas = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>);</span><br><span class="line">    canvas.width = width;</span><br><span class="line">    canvas.height = height;</span><br><span class="line">    <span class="keyword">const</span> ctx = canvas.getContext(<span class="string">'2d'</span>);</span><br><span class="line">    <span class="keyword">let</span> positionY = <span class="built_in">Array</span>.from(&#123; length: width / <span class="number">15</span> &#125;, <span class="function"><span class="params">()</span> =&gt;</span> <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">const</span> colors = [<span class="string">'#rgb(234, 5, 250)'</span>, <span class="string">'rgb(106, 6, 194)'</span>, <span class="string">'rgb(19, 6, 194)'</span>, <span class="string">'rgb(6, 194, 62)'</span>, <span class="string">'rgb(168, 218, 19)'</span>];</span><br><span class="line">    animationInterval = setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">        ctx!.fillStyle = <span class="string">'rgba(0,0,0,0.05)'</span>;</span><br><span class="line">        ctx!.fillRect(<span class="number">0</span>, <span class="number">0</span>, width, height);</span><br><span class="line">        ctx!.fillStyle = fillStyle ||<span class="string">'#0f0'</span></span><br><span class="line"></span><br><span class="line">        ctx!.font = <span class="string">'15px Arial'</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; positionY.length; i++) &#123;</span><br><span class="line">            ctx!.fillText(rainCodeArr[<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * rainCodeArr.length)], i * <span class="number">15</span>, positionY[i]);</span><br><span class="line">            positionY[i] = positionY[i] &gt; height || positionY[i] &gt; <span class="built_in">Math</span>.random() * <span class="number">10000</span> ? <span class="number">0</span> : positionY[i] + <span class="number">15</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, <span class="number">50</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(canvas);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¡®ä¿æ–‡æ¡£åŠ è½½å®Œæˆåæ‰§è¡Œ</span></span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">'DOMContentLoaded'</span>, <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">document</span>.body.style.margin = <span class="string">"0px"</span>;</span><br><span class="line">    <span class="built_in">document</span>.body.style.padding = <span class="string">"0px"</span>;</span><br><span class="line">    rainCode();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">"beforeunload"</span>, <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    animationInterval &amp;&amp; clearInterval(animationInterval);</span><br><span class="line">    canvas &amp;&amp; canvas.remove();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;canvasç»˜å›¾æ˜¯ä¸€ç§æ¯”è¾ƒå¸¸ç”¨çš„å‰ç«¯æŠ€æœ¯ï¼Œé€‚ç”¨åœºæ™¯åŒ…æ‹¬ï¼šç”»æ¿ã€æ¸¸æˆã€åŠ¨ç”»ã€å›¾è¡¨ã€è§†é¢‘ç­‰ã€‚ä¸‹é¢æˆ‘ä»¬ä½¿ç”¨è¯¥æŠ€æœ¯å®Œæˆä¸€ä¸ªä»£ç é›¨æ•ˆæœã€‚&lt;/p&gt;
&lt;h</summary>
      
    
    
    
    <category term="Canvas" scheme="https://gofugui.github.io/categories/Canvas/"/>
    
    
    <category term="JavaScript" scheme="https://gofugui.github.io/tags/JavaScript/"/>
    
    <category term="ES6" scheme="https://gofugui.github.io/tags/ES6/"/>
    
    <category term="html" scheme="https://gofugui.github.io/tags/html/"/>
    
    <category term="Canvas" scheme="https://gofugui.github.io/tags/Canvas/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨MessageChannelæ¨¡æ‹ŸReactä¼˜å…ˆçº§æ‰§è¡Œé˜Ÿåˆ—</title>
    <link href="https://gofugui.github.io/2025/05/23/%E4%BD%BF%E7%94%A8MessageChannel%E6%A8%A1%E6%8B%9FReact%E4%BC%98%E5%85%88%E7%BA%A7%E6%89%A7%E8%A1%8C%E9%98%9F%E5%88%97/"/>
    <id>https://gofugui.github.io/2025/05/23/%E4%BD%BF%E7%94%A8MessageChannel%E6%A8%A1%E6%8B%9FReact%E4%BC%98%E5%85%88%E7%BA%A7%E6%89%A7%E8%A1%8C%E9%98%9F%E5%88%97/</id>
    <published>2025-05-23T09:16:46.619Z</published>
    <updated>2025-05-23T09:26:20.912Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p><strong>MessageChannel</strong> æ˜¯ <strong>HTML5</strong> ä¸­ <strong>window</strong> å¯¹è±¡æä¾›çš„ä¸€ä¸ªç”¨äºè·¨çº¿ç¨‹é€šä¿¡çš„ APIï¼Œå®ƒå…è®¸æˆ‘ä»¬åœ¨ä¸åŒçš„æµè§ˆä¸Šä¸‹æ–‡ï¼ˆå¦‚ä¸»çº¿ç¨‹ä¸ Worker çº¿ç¨‹ï¼‰ä¹‹é—´ä¼ é€’æ•°æ®ã€‚React åˆ©ç”¨äº† <strong>MessageChannel</strong> æ¥å®ç°ä¼˜å…ˆçº§ä»»åŠ¡è°ƒåº¦ï¼Œæ¨¡æ‹Ÿå¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—ã€‚</p><blockquote><p>ä»¥ä¸‹æ˜¯å…³äº <strong>MessageChannel</strong> çš„å…³é”®ç‚¹ï¼š</p></blockquote><p><strong>MessageChannel</strong> åˆ›å»ºä¸¤ä¸ªç«¯å£ (port1, port2)ï¼Œå®ƒä»¬å¯ä»¥äº’ç›¸å‘é€æ¶ˆæ¯ã€‚<br>åœ¨ React çš„è°ƒåº¦å™¨ä¸­ï¼Œä½¿ç”¨ <strong>MessageChannel</strong> å°†ä½ä¼˜å…ˆçº§ä»»åŠ¡å»¶è¿Ÿæ‰§è¡Œï¼Œè€Œé«˜ä¼˜å…ˆçº§ä»»åŠ¡å¯ä»¥ä¸­æ–­ä½ä¼˜å…ˆçº§ä»»åŠ¡ã€‚<br>é€šè¿‡ port.postMessage() å°†ä»»åŠ¡åŠ å…¥é˜Ÿåˆ—ï¼Œé€šè¿‡ç›‘å¬ message äº‹ä»¶æ¥è§¦å‘ä»»åŠ¡æ‰§è¡Œã€‚<br>ç›¸æ¯” <strong>setTimeout</strong>ï¼Œ<strong>MessageChannel</strong> æä¾›äº†æ›´ç»†ç²’åº¦çš„æ§åˆ¶ï¼Œå¹¶ä¸”åœ¨æµè§ˆå™¨ä¸­å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚<br>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">enum ScheduleType &#123;</span><br><span class="line">  event = <span class="number">1000</span>,</span><br><span class="line">  timeout = <span class="number">2000</span>,</span><br><span class="line">&#125;</span><br><span class="line">type  ScheduleItem = &#123;</span><br><span class="line">  time: number,</span><br><span class="line">  callback: <span class="built_in">Function</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SimpleSchedule</span> </span>&#123; </span><br><span class="line">    private queue: <span class="built_in">Array</span>&lt;any&gt; = [];</span><br><span class="line">    private port1: MessagePort;</span><br><span class="line">    private port2: MessagePort;</span><br><span class="line">    private isRunning: boolean = <span class="literal">false</span>; </span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">const</span> channel = <span class="keyword">new</span> MessageChannel();</span><br><span class="line">     <span class="keyword">this</span>.port1 = channel.port1;</span><br><span class="line">     <span class="keyword">this</span>.port2 = channel.port2;</span><br><span class="line">     <span class="comment">// è¿™é‡Œå¿…é¡»è¦ç»‘å®šthis</span></span><br><span class="line">     <span class="keyword">this</span>.onSchedule = <span class="keyword">this</span>.onSchedule.bind(<span class="keyword">this</span>);</span><br><span class="line">     <span class="keyword">this</span>.port1.onmessage = <span class="keyword">this</span>.onSchedule;</span><br><span class="line">    &#125;</span><br><span class="line">    onSchedule()&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'å¼€å§‹æ‰§è¡Œäº†'</span>)</span><br><span class="line">      <span class="keyword">this</span>.queueLoop();</span><br><span class="line">    &#125;</span><br><span class="line">    dispatchMsg()&#123;</span><br><span class="line">       <span class="keyword">this</span>.port2.postMessage(<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    schedule(fn: <span class="built_in">Function</span>, <span class="attr">scheduleType</span>: ScheduleType)&#123;</span><br><span class="line">      <span class="keyword">const</span> time = performance.now() + scheduleType;</span><br><span class="line">      <span class="keyword">this</span>.push(&#123;<span class="attr">callback</span>: fn, time &#125;);</span><br><span class="line">      <span class="keyword">if</span>(!<span class="keyword">this</span>.isRunning)&#123;</span><br><span class="line">        <span class="keyword">this</span>.isRunning = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">this</span>.dispatchMsg();</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">    &#125;</span><br><span class="line">    push(schedule: ScheduleItem)&#123;</span><br><span class="line">      <span class="keyword">this</span>.queue.push(schedule);</span><br><span class="line">      <span class="keyword">this</span>.queue.sort(<span class="function">(<span class="params">a,b</span>)=&gt;</span>a.time - b.time);</span><br><span class="line">    &#125;</span><br><span class="line">    pop()&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.queue.shift()</span><br><span class="line">    &#125;</span><br><span class="line">   queueLoop()&#123;</span><br><span class="line">     <span class="keyword">let</span> schedule = <span class="keyword">this</span>.pop();</span><br><span class="line">     <span class="keyword">while</span>(schedule)&#123;</span><br><span class="line">         schedule.callback();</span><br><span class="line">         schedule = <span class="keyword">this</span>.pop();</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">this</span>.isRunning = <span class="literal">false</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> simpleSchedule = <span class="keyword">new</span> SimpleSchedule();</span><br><span class="line"></span><br><span class="line">simpleSchedule.schedule(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'schedule 1'</span>);</span><br><span class="line">&#125;,ScheduleType.timeout);</span><br><span class="line"></span><br><span class="line">simpleSchedule.schedule(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'schedule 2'</span>);</span><br><span class="line">&#125;,ScheduleType.event);</span><br><span class="line"><span class="comment">// æ‰“å°ç»“æœï¼š</span></span><br><span class="line"> å¼€å§‹æ‰§è¡Œäº†</span><br><span class="line"> schedule <span class="number">2</span></span><br><span class="line"> schedule <span class="number">1</span></span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç ä¸­ï¼Œ<code>SimpleSchedule</code>ç±»æ˜¯ä¸€ä¸ªç®€å•çš„è°ƒåº¦å™¨ï¼Œç”¨äºç®¡ç†å¤šä¸ªä»»åŠ¡ã€‚å®ƒä½¿ç”¨ä¸€ä¸ªé˜Ÿåˆ—æ¥ä¿å­˜ä»»åŠ¡ï¼Œå¹¶ä½¿ç”¨ä¸€ä¸ª<code>isRunning</code>å±æ€§æ¥æŒ‡ç¤ºå½“å‰æ˜¯å¦æ­£åœ¨æ‰§è¡Œä»»åŠ¡ã€‚</p><p>tsæ–‡ä»¶å¯ä»¥ç›´æ¥ç”¨ts-nodeè¿è¡Œï¼Œå¦‚æœæŠ¥é”™<code>TypeError [ERR_UNKNOWN_FILE_EXTENSION]: Unknown file extension &quot;.ts&quot; for......</code> è¯·åœ¨ts-connfigä¸­æ·»åŠ <code>&quot;ts-node&quot;: { &quot;esm&quot;: true }</code></p><h3 id="ä»Šå¤©çš„åˆ†äº«å°±åˆ°è¿™äº†ï¼Œå¦‚æœ‰ç–‘é—®ğŸ¤”ï¸è¯„è®ºåŒºè§"><a href="#ä»Šå¤©çš„åˆ†äº«å°±åˆ°è¿™äº†ï¼Œå¦‚æœ‰ç–‘é—®ğŸ¤”ï¸è¯„è®ºåŒºè§" class="headerlink" title="ä»Šå¤©çš„åˆ†äº«å°±åˆ°è¿™äº†ï¼Œå¦‚æœ‰ç–‘é—®ğŸ¤”ï¸è¯„è®ºåŒºè§"></a>ä»Šå¤©çš„åˆ†äº«å°±åˆ°è¿™äº†ï¼Œå¦‚æœ‰ç–‘é—®ğŸ¤”ï¸è¯„è®ºåŒºè§</h3>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;MessageChannel&lt;/strong&gt; æ˜¯ &lt;strong&gt;HTML5&lt;/strong&gt; ä¸­ &lt;strong&gt;win</summary>
      
    
    
    
    <category term="å‰ç«¯ES6ä¸­APIä½¿ç”¨" scheme="https://gofugui.github.io/categories/å‰ç«¯ES6ä¸­APIä½¿ç”¨/"/>
    
    
    <category term="JavaScript" scheme="https://gofugui.github.io/tags/JavaScript/"/>
    
    <category term="ES6" scheme="https://gofugui.github.io/tags/ES6/"/>
    
    <category term="React" scheme="https://gofugui.github.io/tags/React/"/>
    
  </entry>
  
  <entry>
    <title>vue3 å’Œ react è™šæ‹Ÿdom</title>
    <link href="https://gofugui.github.io/2025/05/22/vue3%20%E5%92%8C%20react%20%E8%99%9A%E6%8B%9Fdom/"/>
    <id>https://gofugui.github.io/2025/05/22/vue3%20%E5%92%8C%20react%20%E8%99%9A%E6%8B%9Fdom/</id>
    <published>2025-05-21T16:00:00.000Z</published>
    <updated>2025-05-22T14:23:36.693Z</updated>
    
    <content type="html"><![CDATA[<p>Vue 3 å’Œ React çš„è™šæ‹Ÿ DOM åœ¨æ ¸å¿ƒæ¦‚å¿µä¸Šç±»ä¼¼ï¼Œä½†åœ¨å®ç°ç»†èŠ‚ã€ä¼˜åŒ–ç­–ç•¥å’Œä½¿ç”¨æ–¹å¼ä¸Šå­˜åœ¨æ˜¾è‘—å·®å¼‚ã€‚ä»¥ä¸‹æ˜¯ä¸¤è€…çš„å…³é”®å¯¹æ¯”ï¼š</p><h3 id="ä¸€ã€æ ¸å¿ƒå®ç°å·®å¼‚"><a href="#ä¸€ã€æ ¸å¿ƒå®ç°å·®å¼‚" class="headerlink" title="ä¸€ã€æ ¸å¿ƒå®ç°å·®å¼‚"></a><strong>ä¸€ã€æ ¸å¿ƒå®ç°å·®å¼‚</strong></h3><h4 id="1-Diff-ç®—æ³•"><a href="#1-Diff-ç®—æ³•" class="headerlink" title="1. Diff ç®—æ³•"></a>1. <strong>Diff ç®—æ³•</strong></h4><ul><li><p><strong>Vue 3</strong>ï¼š</p><ul><li>ä½¿ç”¨ <strong>é¢„å¤„ç† + æœ€é•¿é€’å¢å­åºåˆ—ï¼ˆLIS</strong> ç®—æ³•ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º <strong>O(n log n)</strong></li><li>ä¼˜å…ˆå¤„ç†ç›¸åŒå‰ç½® / åç½®å…ƒç´ ï¼Œå¿«é€Ÿè·³è¿‡æ— éœ€æ¯”è¾ƒçš„èŠ‚ç‚¹</li><li>é€šè¿‡<code>ShapeFlag</code>ä½è¿ç®—å¿«é€Ÿåˆ¤æ–­èŠ‚ç‚¹ç±»å‹</li></ul></li><li><p><strong>React</strong>ï¼š</p><ul><li>ä½¿ç”¨<strong>åŒæŒ‡é’ˆéå† + key æ¯”è¾ƒ</strong>ï¼Œé»˜è®¤æ—¶é—´å¤æ‚åº¦ä¸º <strong>O(n)</strong></li><li>ä¾èµ–<code>key</code>å±æ€§è¯†åˆ«åŒå±‚èŠ‚ç‚¹å˜åŒ–</li><li>2020 å¹´åå¼•å…¥<strong>Fiber æ¶æ„</strong>ï¼Œå°†æ¸²æŸ“ä»»åŠ¡æ‹†åˆ†ä¸ºå°å•å…ƒï¼ˆå¯ä¸­æ–­ï¼‰</li></ul></li></ul><p>javascript<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br></pre></td><td class="code"><pre><span class="line">// Vue 3çš„Diffç®—æ³•ï¼ˆç®€åŒ–ï¼‰</span><br><span class="line">// 1. é¢„å¤„ç†ç›¸åŒå‰ç½®/åç½®èŠ‚ç‚¹</span><br><span class="line">// 2. å¤„ç†æ–°å¢/åˆ é™¤èŠ‚ç‚¹</span><br><span class="line">// 3. ä½¿ç”¨LISç®—æ³•è®¡ç®—æœ€å°ç§»åŠ¨æ¬¡æ•°</span><br><span class="line">function patchKeyedChildren(c1, c2, container, parentAnchor) &#123;</span><br><span class="line">  let i = 0;</span><br><span class="line">  const l1 = c1.length;</span><br><span class="line">  const l2 = c2.length;</span><br><span class="line">  let e1 = l1 - 1; // æ—§èŠ‚ç‚¹çš„ç»“æŸç´¢å¼•</span><br><span class="line">  let e2 = l2 - 1; // æ–°èŠ‚ç‚¹çš„ç»“æŸç´¢å¼•</span><br><span class="line"></span><br><span class="line">  // 1. é¢„å¤„ç†ç›¸åŒå‰ç½®èŠ‚ç‚¹</span><br><span class="line">  // (a b) c</span><br><span class="line">  // (a b) d e</span><br><span class="line">  while (i &lt;= e1 &amp;&amp; i &lt;= e2) &#123;</span><br><span class="line">    const n1 = c1[i];</span><br><span class="line">    const n2 = c2[i];</span><br><span class="line">    if (isSameVNodeType(n1, n2)) &#123;</span><br><span class="line">      patch(n1, n2, container);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      break;</span><br><span class="line">    &#125;</span><br><span class="line">    i++;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 2. é¢„å¤„ç†ç›¸åŒåç½®èŠ‚ç‚¹</span><br><span class="line">  // a (b c)</span><br><span class="line">  // d e (b c)</span><br><span class="line">  while (i &lt;= e1 &amp;&amp; i &lt;= e2) &#123;</span><br><span class="line">    const n1 = c1[e1];</span><br><span class="line">    const n2 = c2[e2];</span><br><span class="line">    if (isSameVNodeType(n1, n2)) &#123;</span><br><span class="line">      patch(n1, n2, container);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      break;</span><br><span class="line">    &#125;</span><br><span class="line">    e1--;</span><br><span class="line">    e2--;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 3. å¤„ç†æ–°å¢èŠ‚ç‚¹ï¼ˆæ—§èŠ‚ç‚¹å·²éå†å®Œï¼Œæ–°èŠ‚ç‚¹æœ‰å‰©ä½™ï¼‰</span><br><span class="line">  // (a b)</span><br><span class="line">  // (a b) c d</span><br><span class="line">  // i = 2, e1 = 1, e2 = 3</span><br><span class="line">  if (i &gt; e1) &#123;</span><br><span class="line">    if (i &lt;= e2) &#123;</span><br><span class="line">      const nextPos = e2 + 1;</span><br><span class="line">      const anchor = nextPos &lt; l2 ? c2[nextPos].el : parentAnchor;</span><br><span class="line">      while (i &lt;= e2) &#123;</span><br><span class="line">        patch(null, c2[i], container, anchor);</span><br><span class="line">        i++;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 4. å¤„ç†åˆ é™¤èŠ‚ç‚¹ï¼ˆæ–°èŠ‚ç‚¹å·²éå†å®Œï¼Œæ—§èŠ‚ç‚¹æœ‰å‰©ä½™ï¼‰</span><br><span class="line">  // (a b) c d</span><br><span class="line">  // (a b)</span><br><span class="line">  // i = 2, e1 = 3, e2 = 1</span><br><span class="line">  else if (i &gt; e2) &#123;</span><br><span class="line">    while (i &lt;= e1) &#123;</span><br><span class="line">      unmount(c1[i]);</span><br><span class="line">      i++;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 5. å¤„ç†ä¹±åºèŠ‚ç‚¹ï¼ˆæ ¸å¿ƒDiffï¼‰</span><br><span class="line">  // a b [c d e] f g</span><br><span class="line">  // a b [e d c h] f g</span><br><span class="line">  else &#123;</span><br><span class="line">    const s1 = i; // æ—§èŠ‚ç‚¹çš„å¼€å§‹ç´¢å¼•</span><br><span class="line">    const s2 = i; // æ–°èŠ‚ç‚¹çš„å¼€å§‹ç´¢å¼•</span><br><span class="line"></span><br><span class="line">    // 5.1 å»ºç«‹æ–°èŠ‚ç‚¹çš„keyåˆ°indexçš„æ˜ å°„</span><br><span class="line">    const keyToNewIndexMap = new Map();</span><br><span class="line">    for (i = s2; i &lt;= e2; i++) &#123;</span><br><span class="line">      const nextChild = c2[i];</span><br><span class="line">      if (nextChild.key !== null) &#123;</span><br><span class="line">        keyToNewIndexMap.set(nextChild.key, i);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 5.2 éå†æ—§èŠ‚ç‚¹ï¼Œå¯»æ‰¾åŒ¹é…çš„æ–°èŠ‚ç‚¹</span><br><span class="line">    let j;</span><br><span class="line">    let patched = 0;</span><br><span class="line">    const toBePatched = e2 - s2 + 1;</span><br><span class="line">    let moved = false;</span><br><span class="line">    let maxNewIndexSoFar = 0;</span><br><span class="line">    const newIndexToOldIndexMap = new Array(toBePatched).fill(0);</span><br><span class="line"></span><br><span class="line">    for (i = s1; i &lt;= e1; i++) &#123;</span><br><span class="line">      const prevChild = c1[i];</span><br><span class="line">      if (patched &gt;= toBePatched) &#123;</span><br><span class="line">        // æ‰€æœ‰æ–°èŠ‚ç‚¹éƒ½å·²å¤„ç†ï¼Œå‰©ä½™æ—§èŠ‚ç‚¹å…¨éƒ¨åˆ é™¤</span><br><span class="line">        unmount(prevChild);</span><br><span class="line">        continue;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      let newIndex;</span><br><span class="line">      if (prevChild.key !== null) &#123;</span><br><span class="line">        // é€šè¿‡keyæŸ¥æ‰¾æ–°èŠ‚ç‚¹ä½ç½®</span><br><span class="line">        newIndex = keyToNewIndexMap.get(prevChild.key);</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        // æ²¡æœ‰keyï¼Œéå†æŸ¥æ‰¾</span><br><span class="line">        for (j = s2; j &lt;= e2; j++) &#123;</span><br><span class="line">          if (</span><br><span class="line">            newIndexToOldIndexMap[j - s2] === 0 &amp;&amp;</span><br><span class="line">            isSameVNodeType(prevChild, c2[j])</span><br><span class="line">          ) &#123;</span><br><span class="line">            newIndex = j;</span><br><span class="line">            break;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      if (newIndex === undefined) &#123;</span><br><span class="line">        // æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„æ–°èŠ‚ç‚¹ï¼Œåˆ é™¤å½“å‰æ—§èŠ‚ç‚¹</span><br><span class="line">        unmount(prevChild);</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        // ä¿å­˜æ—§èŠ‚ç‚¹ç´¢å¼•ï¼ˆ+1 æ˜¯ä¸ºäº†é¿å…ä¸é»˜è®¤å€¼0å†²çªï¼‰</span><br><span class="line">        newIndexToOldIndexMap[newIndex - s2] = i + 1;</span><br><span class="line">        </span><br><span class="line">        // åˆ¤æ–­èŠ‚ç‚¹æ˜¯å¦éœ€è¦ç§»åŠ¨</span><br><span class="line">        if (newIndex &gt;= maxNewIndexSoFar) &#123;</span><br><span class="line">          maxNewIndexSoFar = newIndex;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          moved = true;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        // å¤ç”¨æ—§èŠ‚ç‚¹ï¼Œæ›´æ–°å†…å®¹</span><br><span class="line">        patch(prevChild, c2[newIndex], container);</span><br><span class="line">        patched++;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 5.3 ä½¿ç”¨LISç®—æ³•è®¡ç®—æœ€å°ç§»åŠ¨æ¬¡æ•°</span><br><span class="line">    const increasingNewIndexSequence = moved</span><br><span class="line">      ? getSequence(newIndexToOldIndexMap)</span><br><span class="line">      : [];</span><br><span class="line">    j = increasingNewIndexSequence.length - 1;</span><br><span class="line"></span><br><span class="line">    // 5.4 ç§»åŠ¨å’Œæ’å…¥èŠ‚ç‚¹</span><br><span class="line">    for (i = toBePatched - 1; i &gt;= 0; i--) &#123;</span><br><span class="line">      const nextIndex = s2 + i;</span><br><span class="line">      const nextChild = c2[nextIndex];</span><br><span class="line">      const anchor = nextIndex + 1 &lt; l2 ? c2[nextIndex + 1].el : parentAnchor;</span><br><span class="line"></span><br><span class="line">      if (newIndexToOldIndexMap[i] === 0) &#123;</span><br><span class="line">        // æ–°èŠ‚ç‚¹ï¼Œéœ€è¦æ’å…¥</span><br><span class="line">        patch(null, nextChild, container, anchor);</span><br><span class="line">      &#125; else if (moved) &#123;</span><br><span class="line">        // éœ€è¦ç§»åŠ¨èŠ‚ç‚¹</span><br><span class="line">        if (j &lt; 0 || i !== increasingNewIndexSequence[j]) &#123;</span><br><span class="line">          move(nextChild, container, anchor);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          j--;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// åˆ¤æ–­ä¸¤ä¸ªVNodeæ˜¯å¦å¯ä»¥å¤ç”¨ï¼ˆkeyå’Œtypeéƒ½ç›¸åŒï¼‰</span><br><span class="line">function isSameVNodeType(n1, n2) &#123;</span><br><span class="line">  return n1.type === n2.type &amp;&amp; n1.key === n2.key;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æœ€é•¿é€’å¢å­åºåˆ—ç®—æ³•ï¼ˆVue 3æºç å®ç°ï¼‰</span><br><span class="line">function getSequence(arr) &#123;</span><br><span class="line">  const p = arr.slice();</span><br><span class="line">  const result = [0];</span><br><span class="line">  let i, j, u, v, c;</span><br><span class="line">  const len = arr.length;</span><br><span class="line">  for (i = 0; i &lt; len; i++) &#123;</span><br><span class="line">    const arrI = arr[i];</span><br><span class="line">    if (arrI !== 0) &#123;</span><br><span class="line">      j = result[result.length - 1];</span><br><span class="line">      if (arr[j] &lt; arrI) &#123;</span><br><span class="line">        p[i] = j;</span><br><span class="line">        result.push(i);</span><br><span class="line">        continue;</span><br><span class="line">      &#125;</span><br><span class="line">      u = 0;</span><br><span class="line">      v = result.length - 1;</span><br><span class="line">      while (u &lt; v) &#123;</span><br><span class="line">        c = (u + v) &gt;&gt; 1;</span><br><span class="line">        if (arr[result[c]] &lt; arrI) &#123;</span><br><span class="line">          u = c + 1;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          v = c;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      if (arrI &lt; arr[result[u]]) &#123;</span><br><span class="line">        if (u &gt; 0) &#123;</span><br><span class="line">          p[i] = result[u - 1];</span><br><span class="line">        &#125;</span><br><span class="line">        result[u] = i;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  u = result.length;</span><br><span class="line">  v = result[u - 1];</span><br><span class="line">  while (u-- &gt; 0) &#123;</span><br><span class="line">    result[u] = v;</span><br><span class="line">    v = p[v];</span><br><span class="line">  &#125;</span><br><span class="line">  return result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><span class="line">// Reactçš„Diffç®—æ³•ï¼ˆç®€åŒ–ï¼‰</span><br><span class="line">// 1. åŒæŒ‡é’ˆéå†æ–°æ—§children</span><br><span class="line">// 2. æ ¹æ®keyåˆ¤æ–­èŠ‚ç‚¹æ˜¯æ›´æ–°ã€æ–°å¢è¿˜æ˜¯åˆ é™¤</span><br><span class="line">function reconcileChildren(current, workInProgress) &#123;</span><br><span class="line">  // å½“å‰æ¸²æŸ“çš„fiberèŠ‚ç‚¹</span><br><span class="line">  const currentFirstChild = current.child;</span><br><span class="line">  // å·¥ä½œä¸­çš„fiberèŠ‚ç‚¹ï¼ˆæ–°çš„è™šæ‹ŸDOMï¼‰</span><br><span class="line">  let workInProgressChild = workInProgress.child;</span><br><span class="line">  </span><br><span class="line">  // 1. åŒæŒ‡é’ˆåˆå§‹åŒ–</span><br><span class="line">  let oldFiber = currentFirstChild;</span><br><span class="line">  let newIdx = 0;</span><br><span class="line">  let prevNewFiber = null;</span><br><span class="line">  </span><br><span class="line">  // 2. ç¬¬ä¸€è½®éå†ï¼šå¤„ç†ç›¸åŒä½ç½®çš„èŠ‚ç‚¹ï¼ˆå¿«é€Ÿè·¯å¾„ï¼‰</span><br><span class="line">  while (oldFiber !== null &amp;&amp; newIdx &lt; newChildren.length) &#123;</span><br><span class="line">    const newChild = newChildren[newIdx];</span><br><span class="line">    </span><br><span class="line">    // 2.1 é€šè¿‡keyå’Œtypeåˆ¤æ–­èŠ‚ç‚¹æ˜¯å¦å¯ä»¥å¤ç”¨</span><br><span class="line">    const sameType = oldFiber.type === newChild.type;</span><br><span class="line">    </span><br><span class="line">    if (!sameType) &#123;</span><br><span class="line">      // 2.2 ç±»å‹ä¸åŒï¼Œæ— æ³•å¤ç”¨ï¼Œæ ‡è®°æ—§èŠ‚ç‚¹ä¸ºåˆ é™¤</span><br><span class="line">      if (oldFiber) &#123;</span><br><span class="line">        deleteChild(workInProgress, oldFiber);</span><br><span class="line">      &#125;</span><br><span class="line">      break;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // 2.3 å¯ä»¥å¤ç”¨ï¼Œåˆ›å»ºæ–°çš„fiberèŠ‚ç‚¹</span><br><span class="line">    const newFiber = createWorkInProgress(oldFiber, newChild.props);</span><br><span class="line">    </span><br><span class="line">    // 2.4 è¿æ¥åˆ°DOMæ ‘</span><br><span class="line">    if (prevNewFiber === null) &#123;</span><br><span class="line">      workInProgressChild = newFiber;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      prevNewFiber.sibling = newFiber;</span><br><span class="line">    &#125;</span><br><span class="line">    prevNewFiber = newFiber;</span><br><span class="line">    </span><br><span class="line">    // 2.5 ç§»åŠ¨æŒ‡é’ˆ</span><br><span class="line">    oldFiber = oldFiber.sibling;</span><br><span class="line">    newIdx++;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  // 3. å¤„ç†æ–°å¢èŠ‚ç‚¹ï¼ˆæ—§åˆ—è¡¨å·²éå†å®Œï¼Œæ–°åˆ—è¡¨è¿˜æœ‰å‰©ä½™ï¼‰</span><br><span class="line">  if (oldFiber === null) &#123;</span><br><span class="line">    while (newIdx &lt; newChildren.length) &#123;</span><br><span class="line">      const newChild = newChildren[newIdx];</span><br><span class="line">      const newFiber = createFiberFromElement(newChild);</span><br><span class="line">      </span><br><span class="line">      if (prevNewFiber === null) &#123;</span><br><span class="line">        workInProgressChild = newFiber;</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        prevNewFiber.sibling = newFiber;</span><br><span class="line">      &#125;</span><br><span class="line">      prevNewFiber = newFiber;</span><br><span class="line">      newIdx++;</span><br><span class="line">    &#125;</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  // 4. å¤„ç†åˆ é™¤èŠ‚ç‚¹ï¼ˆæ–°åˆ—è¡¨å·²éå†å®Œï¼Œæ—§åˆ—è¡¨è¿˜æœ‰å‰©ä½™ï¼‰</span><br><span class="line">  if (newIdx === newChildren.length) &#123;</span><br><span class="line">    while (oldFiber !== null) &#123;</span><br><span class="line">      deleteChild(workInProgress, oldFiber);</span><br><span class="line">      oldFiber = oldFiber.sibling;</span><br><span class="line">    &#125;</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  // 5. å¤æ‚æƒ…å†µï¼šä¹±åºèŠ‚ç‚¹å¤„ç†ï¼ˆä½¿ç”¨keyè¿›è¡Œé‡æ’åºï¼‰</span><br><span class="line">  // 5.1 å»ºç«‹æ—§èŠ‚ç‚¹çš„keyåˆ°indexçš„æ˜ å°„</span><br><span class="line">  const existingChildren = mapRemainingChildren(oldFiber);</span><br><span class="line">  </span><br><span class="line">  // 5.2 éå†å‰©ä½™æ–°èŠ‚ç‚¹ï¼Œå¯»æ‰¾æœ€ä½³åŒ¹é…</span><br><span class="line">  for (; newIdx &lt; newChildren.length; newIdx++) &#123;</span><br><span class="line">    const newChild = newChildren[newIdx];</span><br><span class="line">    </span><br><span class="line">    // 5.3 é€šè¿‡keyæŸ¥æ‰¾å¯å¤ç”¨çš„æ—§èŠ‚ç‚¹</span><br><span class="line">    const matchedFiber = existingChildren.get(</span><br><span class="line">      newChild.key === null ? newChild.type : newChild.key</span><br><span class="line">    );</span><br><span class="line">    </span><br><span class="line">    if (matchedFiber) &#123;</span><br><span class="line">      // 5.4 å¤ç”¨æ‰¾åˆ°çš„èŠ‚ç‚¹</span><br><span class="line">      const newFiber = useFiber(matchedFiber, newChild.props);</span><br><span class="line">      // ä»æ˜ å°„ä¸­åˆ é™¤å·²å¤ç”¨çš„èŠ‚ç‚¹</span><br><span class="line">      existingChildren.delete(</span><br><span class="line">        newChild.key === null ? newChild.type : newChild.key</span><br><span class="line">      );</span><br><span class="line">      </span><br><span class="line">      // è¿æ¥åˆ°DOMæ ‘</span><br><span class="line">      if (prevNewFiber === null) &#123;</span><br><span class="line">        workInProgressChild = newFiber;</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        prevNewFiber.sibling = newFiber;</span><br><span class="line">      &#125;</span><br><span class="line">      prevNewFiber = newFiber;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      // 5.5 æ²¡æœ‰å¯å¤ç”¨çš„èŠ‚ç‚¹ï¼Œåˆ›å»ºæ–°èŠ‚ç‚¹</span><br><span class="line">      const newFiber = createFiberFromElement(newChild);</span><br><span class="line">      </span><br><span class="line">      if (prevNewFiber === null) &#123;</span><br><span class="line">        workInProgressChild = newFiber;</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        prevNewFiber.sibling = newFiber;</span><br><span class="line">      &#125;</span><br><span class="line">      prevNewFiber = newFiber;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  // 5.6 åˆ é™¤æ‰€æœ‰æœªè¢«å¤ç”¨çš„æ—§èŠ‚ç‚¹</span><br><span class="line">  existingChildren.forEach(child =&gt; deleteChild(workInProgress, child));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// è¾…åŠ©å‡½æ•°ï¼šå»ºç«‹æ—§èŠ‚ç‚¹çš„keyåˆ°fiberçš„æ˜ å°„</span><br><span class="line">function mapRemainingChildren(currentFirstChild) &#123;</span><br><span class="line">  const existingChildren = new Map();</span><br><span class="line">  let existingChild = currentFirstChild;</span><br><span class="line">  </span><br><span class="line">  while (existingChild !== null) &#123;</span><br><span class="line">    if (existingChild.key !== null) &#123;</span><br><span class="line">      existingChildren.set(existingChild.key, existingChild);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      existingChildren.set(existingChild.type, existingChild);</span><br><span class="line">    &#125;</span><br><span class="line">    existingChild = existingChild.sibling;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  return existingChildren;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-æ¸²æŸ“ä¼˜åŒ–"><a href="#2-æ¸²æŸ“ä¼˜åŒ–" class="headerlink" title="2. æ¸²æŸ“ä¼˜åŒ–"></a>2. <strong>æ¸²æŸ“ä¼˜åŒ–</strong></h4><ul><li><p><strong>Vue 3</strong>ï¼š</p><ul><li><strong>ç¼–è¯‘æ—¶ä¼˜åŒ–</strong>ï¼šé™æ€æå‡ï¼ˆStatic Hoistingï¼‰ã€Block Tree</li><li>è‡ªåŠ¨æ ‡è®°åŠ¨æ€èŠ‚ç‚¹ï¼Œå‡å°‘ Diff èŒƒå›´</li><li>äº‹ä»¶å¤„ç†å‡½æ•°ç¼“å­˜ï¼ˆ<code>cacheHandlers</code>ï¼‰</li></ul></li><li><p><strong>React</strong>ï¼š</p><ul><li><strong>è¿è¡Œæ—¶ä¼˜åŒ–</strong>ï¼šä¾èµ–<code>React.memo</code>ã€<code>useMemo</code>ã€<code>useCallback</code>ç­‰æ‰‹åŠ¨ä¼˜åŒ–</li><li>éœ€è¦å¼€å‘è€…ä¸»åŠ¨æ§åˆ¶ç»„ä»¶æ›´æ–°ï¼ˆå¦‚<code>shouldComponentUpdate</code>ï¼‰</li><li>å¼•å…¥<strong>Concurrent Mode</strong>ï¼ˆå®éªŒæ€§ï¼‰å®ç°ä¼˜å…ˆçº§æ¸²æŸ“</li></ul></li></ul><h3 id="äºŒã€å®ç°ç­–ç•¥å·®å¼‚"><a href="#äºŒã€å®ç°ç­–ç•¥å·®å¼‚" class="headerlink" title="äºŒã€å®ç°ç­–ç•¥å·®å¼‚"></a><strong>äºŒã€å®ç°ç­–ç•¥å·®å¼‚</strong></h3><h4 id="1-æ¨¡æ¿-vs-JSX"><a href="#1-æ¨¡æ¿-vs-JSX" class="headerlink" title="1. æ¨¡æ¿ vs JSX"></a>1. <strong>æ¨¡æ¿ vs JSX</strong></h4><ul><li><p><strong>Vue 3</strong>ï¼š</p><ul><li><p>ä¸»è¦ä½¿ç”¨<strong>æ¨¡æ¿è¯­æ³•</strong>ï¼ˆ<code>.vue</code>æ–‡ä»¶ï¼‰</p></li><li><p>ç¼–è¯‘æ—¶ç”Ÿæˆä¼˜åŒ–çš„æ¸²æŸ“å‡½æ•°</p></li><li><p>ç¤ºä¾‹ï¼š</p><p>vue</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;&#123;&#123; message &#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure></li></ul></li></ul><ul><li><p><strong>React</strong>ï¼š</p><ul><li><p>ä¸»è¦ä½¿ç”¨<strong>JSX</strong>ï¼ˆJavaScript è¯­æ³•æ‰©å±•ï¼‰</p></li><li><p>è¿è¡Œæ—¶ç¼–è¯‘ JSX ä¸º<code>React.createElement</code>è°ƒç”¨</p></li><li><p>ç¤ºä¾‹ï¼š</p><p>jsx</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function App() &#123;</span><br><span class="line">  return &lt;div&gt;&#123;message&#125;&lt;/div&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul><h4 id="2-å“åº”å¼ç³»ç»Ÿ"><a href="#2-å“åº”å¼ç³»ç»Ÿ" class="headerlink" title="2. å“åº”å¼ç³»ç»Ÿ"></a>2. <strong>å“åº”å¼ç³»ç»Ÿ</strong></h4><ul><li><p><strong>Vue 3</strong>ï¼š</p><ul><li><p>å†…ç½®<strong>Proxy-based å“åº”å¼ç³»ç»Ÿ</strong></p></li><li><p>è‡ªåŠ¨è¿½è¸ªä¾èµ–ï¼Œç²¾ç¡®è§¦å‘æ›´æ–°</p></li><li><p>ç¤ºä¾‹ï¼š</p><p>javascript</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import &#123; reactive &#125; from &apos;vue&apos;</span><br><span class="line">const state = reactive(&#123; count: 0 &#125;)</span><br><span class="line">// state.countå˜åŒ–æ—¶è‡ªåŠ¨è§¦å‘æ›´æ–°</span><br></pre></td></tr></table></figure></li></ul></li></ul><ul><li><p><strong>React</strong>ï¼š</p><ul><li><p>ä½¿ç”¨<strong>ä¸å¯å˜æ•°æ®</strong>å’Œ<strong>çŠ¶æ€ç®¡ç†åº“</strong>ï¼ˆå¦‚ Reduxï¼‰</p></li><li><p>é€šè¿‡<code>setState</code>æˆ–<code>useState</code>æ˜¾å¼è§¦å‘æ›´æ–°</p></li><li><p>ç¤ºä¾‹ï¼š</p><p>javascript</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const [count, setCount] = useState(0)</span><br><span class="line">// å¿…é¡»è°ƒç”¨setCountæ‰èƒ½è§¦å‘æ›´æ–°</span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="ä¸‰ã€æ€§èƒ½ä¼˜åŒ–å·®å¼‚"><a href="#ä¸‰ã€æ€§èƒ½ä¼˜åŒ–å·®å¼‚" class="headerlink" title="ä¸‰ã€æ€§èƒ½ä¼˜åŒ–å·®å¼‚"></a><strong>ä¸‰ã€æ€§èƒ½ä¼˜åŒ–å·®å¼‚</strong></h3><h4 id="1-é™æ€å†…å®¹å¤„ç†"><a href="#1-é™æ€å†…å®¹å¤„ç†" class="headerlink" title="1. é™æ€å†…å®¹å¤„ç†"></a>1. <strong>é™æ€å†…å®¹å¤„ç†</strong></h4><ul><li><p><strong>Vue 3</strong>ï¼š</p><ul><li><p>ç¼–è¯‘æ—¶è¯†åˆ«é™æ€èŠ‚ç‚¹å¹¶æå‡ï¼ˆStatic Hoistingï¼‰</p></li><li><p>é™æ€èŠ‚ç‚¹åªåˆ›å»ºä¸€æ¬¡ï¼Œåç»­æ¸²æŸ“ç›´æ¥å¤ç”¨</p></li><li><p>ç¤ºä¾‹ï¼š</p><p>vue</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">  &lt;h1&gt;Static Title&lt;/h1&gt; &lt;!-- ç¼–è¯‘æ—¶æå‡ --&gt;</span><br><span class="line">  &lt;p&gt;&#123;&#123; dynamic &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></li></ul></li></ul><ul><li><p><strong>React</strong>ï¼š</p><ul><li>æ²¡æœ‰ç¼–è¯‘æ—¶ä¼˜åŒ–ï¼Œé™æ€èŠ‚ç‚¹æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šé‡æ–°åˆ›å»º</li><li>éœ€æ‰‹åŠ¨ä½¿ç”¨<code>React.memo</code>æˆ–æå–ç»„ä»¶é¿å…é‡å¤æ¸²æŸ“</li></ul></li></ul><h4 id="2-äº‹ä»¶å¤„ç†ä¼˜åŒ–"><a href="#2-äº‹ä»¶å¤„ç†ä¼˜åŒ–" class="headerlink" title="2. äº‹ä»¶å¤„ç†ä¼˜åŒ–"></a>2. <strong>äº‹ä»¶å¤„ç†ä¼˜åŒ–</strong></h4><ul><li><p><strong>Vue 3</strong>ï¼š</p><ul><li><p>è‡ªåŠ¨ç¼“å­˜äº‹ä»¶å¤„ç†å‡½æ•°ï¼ˆ<code>cacheHandlers</code>ï¼‰</p></li><li><p>ç¤ºä¾‹ï¼š</p><p>vue</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;button @click=&quot;handleClick&quot;&gt;Click&lt;/button&gt;</span><br><span class="line">&lt;!-- ç¼–è¯‘åè‡ªåŠ¨ç¼“å­˜handleClick --&gt;</span><br></pre></td></tr></table></figure></li></ul></li></ul><ul><li><p><strong>React</strong>ï¼š</p><ul><li><p>éœ€è¦æ‰‹åŠ¨ä½¿ç”¨<code>useCallback</code>ç¼“å­˜å›è°ƒå‡½æ•°</p></li><li><p>ç¤ºä¾‹ï¼š</p><p>jsx</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const handleClick = useCallback(() =&gt; &#123;</span><br><span class="line">  // å¤„ç†é€»è¾‘</span><br><span class="line">&#125;, [dependencies])</span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="å››ã€æ¶æ„è®¾è®¡å·®å¼‚"><a href="#å››ã€æ¶æ„è®¾è®¡å·®å¼‚" class="headerlink" title="å››ã€æ¶æ„è®¾è®¡å·®å¼‚"></a><strong>å››ã€æ¶æ„è®¾è®¡å·®å¼‚</strong></h3><h4 id="1-ç»„ä»¶æ›´æ–°ç²’åº¦"><a href="#1-ç»„ä»¶æ›´æ–°ç²’åº¦" class="headerlink" title="1. ç»„ä»¶æ›´æ–°ç²’åº¦"></a>1. <strong>ç»„ä»¶æ›´æ–°ç²’åº¦</strong></h4><ul><li><p><strong>Vue 3</strong>ï¼š</p><ul><li>ç»„ä»¶çº§æ›´æ–°ï¼šå•ä¸ªç»„ä»¶çŠ¶æ€å˜åŒ–åªä¼šè§¦å‘è¯¥ç»„ä»¶é‡æ–°æ¸²æŸ“</li><li>åŸºäºå“åº”å¼ç³»ç»Ÿç²¾ç¡®è¿½è¸ªä¾èµ–</li></ul></li><li><p><strong>React</strong>ï¼š</p><ul><li>å‡½æ•°å¼ç»„ä»¶é»˜è®¤å…¨é‡é‡æ–°æ¸²æŸ“</li><li>éœ€è¦é€šè¿‡<code>React.memo</code>ã€<code>useMemo</code>ç­‰æ‰‹åŠ¨æ§åˆ¶</li></ul></li></ul><h4 id="2-å¼‚æ­¥æ¸²æŸ“"><a href="#2-å¼‚æ­¥æ¸²æŸ“" class="headerlink" title="2. å¼‚æ­¥æ¸²æŸ“"></a>2. <strong>å¼‚æ­¥æ¸²æŸ“</strong></h4><ul><li><p><strong>Vue 3</strong>ï¼š</p><ul><li>æ¸²æŸ“è¿‡ç¨‹æ˜¯<strong>åŒæ­¥</strong>çš„ï¼Œä½†æ›´æ–°æ˜¯<strong>å¼‚æ­¥æ‰¹é‡</strong>çš„</li><li>é€šè¿‡<code>nextTick</code>è®¿é—®æ›´æ–°åçš„ DOM</li></ul></li><li><p><strong>React</strong>ï¼š</p><ul><li><strong>Concurrent Mode</strong>ï¼ˆå®éªŒæ€§ï¼‰æ”¯æŒå¼‚æ­¥æ¸²æŸ“</li><li>å¯ä¸­æ–­æ¸²æŸ“è¿‡ç¨‹ï¼Œä¼˜å…ˆå¤„ç†é«˜ä¼˜å…ˆçº§ä»»åŠ¡</li></ul></li></ul><h3 id="äº”ã€æ€»ç»“å¯¹æ¯”è¡¨"><a href="#äº”ã€æ€»ç»“å¯¹æ¯”è¡¨" class="headerlink" title="äº”ã€æ€»ç»“å¯¹æ¯”è¡¨"></a><strong>äº”ã€æ€»ç»“å¯¹æ¯”è¡¨</strong></h3><table><thead><tr><th>ç‰¹æ€§</th><th>Vue 3</th><th>React</th></tr></thead><tbody><tr><td><strong>Diff ç®—æ³•</strong></td><td>é¢„å¤„ç† + LISï¼ˆO (n log n)ï¼‰</td><td>åŒæŒ‡é’ˆ + keyï¼ˆO (n)ï¼‰</td></tr><tr><td><strong>ä¼˜åŒ–æ–¹å¼</strong></td><td>ç¼–è¯‘æ—¶è‡ªåŠ¨ä¼˜åŒ–ï¼ˆé™æ€æå‡ã€Blockï¼‰</td><td>è¿è¡Œæ—¶æ‰‹åŠ¨ä¼˜åŒ–ï¼ˆReact.memoï¼‰</td></tr><tr><td><strong>å“åº”å¼ç³»ç»Ÿ</strong></td><td>å†…ç½® Proxy-based å“åº”å¼</td><td>ä¸å¯å˜æ•°æ® + æ˜¾å¼ setState</td></tr><tr><td><strong>æ¨¡æ¿è¯­æ³•</strong></td><td>å£°æ˜å¼æ¨¡æ¿</td><td>JSX</td></tr><tr><td><strong>æ›´æ–°ç²’åº¦</strong></td><td>ç»„ä»¶çº§</td><td>å‡½æ•°å¼ç»„ä»¶é»˜è®¤å…¨é‡æ›´æ–°</td></tr><tr><td><strong>å¼‚æ­¥æ¸²æŸ“</strong></td><td>å¼‚æ­¥æ‰¹é‡æ›´æ–°</td><td>Concurrent Modeï¼ˆå®éªŒæ€§ï¼‰</td></tr></tbody></table><h3 id="å…­ã€é€‚ç”¨åœºæ™¯"><a href="#å…­ã€é€‚ç”¨åœºæ™¯" class="headerlink" title="å…­ã€é€‚ç”¨åœºæ™¯"></a><strong>å…­ã€é€‚ç”¨åœºæ™¯</strong></h3><ul><li><p><strong>Vue 3</strong>ï¼š</p><ul><li>é€‚åˆéœ€è¦é«˜æ€§èƒ½æ¸²æŸ“çš„å¤§å‹åº”ç”¨</li><li>å¯¹å¼€å‘æ•ˆç‡æœ‰è¾ƒé«˜è¦æ±‚ï¼ˆç¼–è¯‘æ—¶ä¼˜åŒ–å‡å°‘æ‰‹åŠ¨å·¥ä½œï¼‰</li><li>åå¥½å£°æ˜å¼æ¨¡æ¿è¯­æ³•çš„å¼€å‘è€…</li></ul></li><li><p><strong>React</strong>ï¼š</p><ul><li>é€‚åˆéœ€è¦çµæ´»æ§åˆ¶æ¸²æŸ“è¿‡ç¨‹çš„åº”ç”¨</li><li>å›¢é˜Ÿç†Ÿæ‚‰ JavaScript / å‡½æ•°å¼ç¼–ç¨‹</li><li>éœ€è¦ä¸å¤æ‚çŠ¶æ€ç®¡ç†åº“é›†æˆçš„åœºæ™¯</li></ul></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Vue 3 å’Œ React çš„è™šæ‹Ÿ DOM åœ¨æ ¸å¿ƒæ¦‚å¿µä¸Šç±»ä¼¼ï¼Œä½†åœ¨å®ç°ç»†èŠ‚ã€ä¼˜åŒ–ç­–ç•¥å’Œä½¿ç”¨æ–¹å¼ä¸Šå­˜åœ¨æ˜¾è‘—å·®å¼‚ã€‚ä»¥ä¸‹æ˜¯ä¸¤è€…çš„å…³é”®å¯¹æ¯”ï¼š&lt;/p&gt;
&lt;h3 id=&quot;ä¸€ã€æ ¸å¿ƒå®ç°å·®å¼‚&quot;&gt;&lt;a href=&quot;#ä¸€ã€æ ¸å¿ƒå®ç°å·®å¼‚&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€</summary>
      
    
    
    
    <category term="å‰ç«¯" scheme="https://gofugui.github.io/categories/å‰ç«¯/"/>
    
    
    <category term="ES6" scheme="https://gofugui.github.io/tags/ES6/"/>
    
    <category term="html" scheme="https://gofugui.github.io/tags/html/"/>
    
    <category term="vue3" scheme="https://gofugui.github.io/tags/vue3/"/>
    
    <category term="react" scheme="https://gofugui.github.io/tags/react/"/>
    
  </entry>
  
  <entry>
    <title>ES6ä¸­Reflectå¯¹è±¡ä¸Proxyç»“åˆå®ç°ä»£ç†å’Œå“åº”å¼ç¼–ç¨‹</title>
    <link href="https://gofugui.github.io/2025/05/21/ES6%E4%B8%ADReflect%E5%AF%B9%E8%B1%A1%E4%B8%8EProxy%E7%BB%93%E5%90%88%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%90%86%E5%92%8C%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B/"/>
    <id>https://gofugui.github.io/2025/05/21/ES6%E4%B8%ADReflect%E5%AF%B9%E8%B1%A1%E4%B8%8EProxy%E7%BB%93%E5%90%88%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%90%86%E5%92%8C%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B/</id>
    <published>2025-05-20T16:00:00.000Z</published>
    <updated>2025-05-22T14:21:32.086Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>åœ¨ JavaScript ä¸­ï¼Œ<strong><code>Reflect</code></strong> æ˜¯ä¸€ä¸ªå†…ç½®å¯¹è±¡ï¼Œæä¾›äº†æ‹¦æˆªå’Œæ“ä½œ JavaScript å¯¹è±¡çš„å…ƒæ–¹æ³•ã€‚å®ƒæ˜¯ ES6 (ES2015) å¼•å…¥çš„ç‰¹æ€§ï¼Œä¸»è¦ç”¨äºç®€åŒ–å…ƒç¼–ç¨‹ï¼ˆmeta-programmingï¼‰å¹¶ä¸ <strong>Proxy</strong> ç»“åˆä½¿ç”¨å®ç°å¯¹å¯¹è±¡å±æ€§æ›´ç»†ç²’åº¦çš„æ“ä½œæ§åˆ¶ã€‚</p><h1 id="ä»£ç†å¯¹è±¡"><a href="#ä»£ç†å¯¹è±¡" class="headerlink" title="ä»£ç†å¯¹è±¡"></a>ä»£ç†å¯¹è±¡</h1><p><strong>Proxy</strong> çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè¦è¿›è¡Œä»£ç†çš„ç›®æ ‡å¯¹è±¡ï¼Œç±»å‹ä¸ºObjectï¼Œå¦‚æœæˆ‘ä»¬ä»£ç†çš„ç›®æ ‡æ˜¯ä¸€ä¸ªåŸºç¡€æ•°æ®ç±»å‹é‚£åº”è¯¥æ€ä¹ˆå®ç°å‘¢ï¼Ÿ</p><h3 id="åŸºç¡€æ•°æ®ç±»å‹çš„ä»£ç†"><a href="#åŸºç¡€æ•°æ®ç±»å‹çš„ä»£ç†" class="headerlink" title="åŸºç¡€æ•°æ®ç±»å‹çš„ä»£ç†"></a>åŸºç¡€æ•°æ®ç±»å‹çš„ä»£ç†</h3><p>åœ¨ JavaScript ä¸­ï¼Œ<strong>åŸºç¡€æ•°æ®ç±»å‹ï¼ˆå¦‚ <code>number</code>ã€<code>string</code>ã€<code>boolean</code> ç­‰ï¼‰æ— æ³•ç›´æ¥è¢« <code>Proxy</code> ä»£ç†</strong>ï¼Œå› ä¸º <code>Proxy</code> åªèƒ½æ‹¦æˆªå¯¹è±¡ï¼ˆåŒ…æ‹¬æ•°ç»„ã€å‡½æ•°ã€ç±»ç­‰ï¼‰çš„æ“ä½œã€‚ä½†å¯ä»¥é€šè¿‡å¯¹è±¡å°è£…çš„æ–¹å¼é—´æ¥ä»£ç†åŸºç¡€ç±»å‹ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> target  = &#123;</span><br><span class="line">    value: <span class="string">'123'</span> <span class="comment">// è¿™é‡Œå¯ä»¥æ˜¯number ã€stringã€boolean...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> proxy = <span class="keyword">new</span> <span class="built_in">Proxy</span>(target, &#123;</span><br><span class="line">    <span class="keyword">get</span> (target, key, receiver)&#123;</span><br><span class="line">        <span class="comment">// receiver æŒ‡å‘ proxyå®ä¾‹</span></span><br><span class="line">        <span class="comment">// æ€è€ƒ ï¼Ÿ æ­¤å¤„å¯å¦ç›´æ¥è¿”å› target[key]</span></span><br><span class="line">         <span class="keyword">return</span> <span class="built_in">Reflect</span>.get(target, key, receiver)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">set</span> (target, key, value, receiver)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Reflect</span>.set(target, key, value, receiver)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>ä¸Šè¿°ä»£ç ä¸­æœ‰ä¸€ä¸ªç–‘é—®ï¼Œèƒ½å¦é€šè¿‡<code>return target[key]</code> å–ä»£ <code>return Reflect.get(target, key, receiver)</code>? äº‹å®ä¸Šè¿™é‡Œ<code>target[key] ç­‰ä»·äº Reflect.get(target, key)</code>, <code>receiver</code>æ˜¯æŒ‡å‘ä»£ç†çš„å®ä¾‹ï¼Œç›¸å½“äº<code>call/apply</code>çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œç”¨äºæŒ‡å®šå‡½æ•°æ‰§è¡Œçš„ä¸Šä¸‹æ–‡,ä¸Šé¢ä¾‹å­ä¸­å¦‚æœä¸æ¶‰åŠthisæŒ‡å‘ï¼Œä»…ä»…æ˜¯å¯¹äºç®€å•ç±»å‹çš„ä»£ç†å¯ä½¿ç”¨<code>Reflect.get(target, key) æˆ– target[key]ï¼ˆä½†ä¸æ¨èï¼‰</code>ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­è¯´æ˜ä¸æ¨èçš„åŸå› ï¼š</p><h3 id="å¤æ‚æ•°æ®ç±»å‹çš„ä»£ç†"><a href="#å¤æ‚æ•°æ®ç±»å‹çš„ä»£ç†" class="headerlink" title="å¤æ‚æ•°æ®ç±»å‹çš„ä»£ç†"></a>å¤æ‚æ•°æ®ç±»å‹çš„ä»£ç†</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> people  = &#123;</span><br><span class="line">    <span class="keyword">get</span> name()&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'thisArg:'</span>, <span class="keyword">this</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>._name;</span><br><span class="line">    &#125;,</span><br><span class="line">    _name:<span class="string">'xixi'</span></span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">const</span> proxy1 = <span class="keyword">new</span> <span class="built_in">Proxy</span>(people, &#123;</span><br><span class="line">     <span class="keyword">get</span> (target, key, receiver)&#123;</span><br><span class="line">      <span class="comment">// æ€è€ƒ ï¼Ÿ æ­¤å¤„å¯å¦ç›´æ¥è¿”å› target[key]</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'get name:'</span>, target, receiver)</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">Reflect</span>.get(target, key, receiver);</span><br><span class="line">     &#125;,</span><br><span class="line">     </span><br><span class="line"> &#125;)</span><br><span class="line"> <span class="built_in">console</span>.log(proxy1.name)</span><br><span class="line"> <span class="comment">// è¾“å‡ºï¼š</span></span><br><span class="line"> <span class="comment">// get name: &#123; name: [Getter], _name: 'xixi' &#125; name &#123; name: [Getter], _name: 'xixi' &#125;</span></span><br><span class="line"> <span class="comment">// thisArg: &#123; name: [Getter], _name: 'xixi' &#125;</span></span><br><span class="line"> <span class="comment">// get name: &#123; name: [Getter], _name: 'xixi' &#125; _name &#123; name: [Getter], _name: 'xixi' &#125;</span></span><br><span class="line"> <span class="comment">// xixi</span></span><br><span class="line"> </span><br><span class="line"> <span class="keyword">const</span> proxy2 = <span class="keyword">new</span> <span class="built_in">Proxy</span>(people, &#123;</span><br><span class="line">     <span class="keyword">get</span> (target, key, receiver)&#123;</span><br><span class="line">      <span class="comment">// æ€è€ƒ ï¼Ÿ æ­¤å¤„å¯å¦ç›´æ¥è¿”å› target[key]</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'get name:'</span>, target, receiver)</span><br><span class="line">      <span class="keyword">return</span> target[key];</span><br><span class="line">     &#125;,</span><br><span class="line"> &#125;)</span><br><span class="line"> <span class="built_in">console</span>.log(proxy2.name)</span><br><span class="line"> <span class="comment">// è¾“å‡ºï¼š</span></span><br><span class="line"> <span class="comment">// get name: &#123; name: [Getter], _name: 'xixi' &#125; name &#123; name: [Getter], _name: 'xixi' &#125;</span></span><br><span class="line"> <span class="comment">// thisArg: &#123; name: [Getter], _name: 'xixi' &#125;</span></span><br><span class="line"> <span class="comment">// xixi</span></span><br></pre></td></tr></table></figure><p>ç»“è®ºï¼šé€šè¿‡å¯¹æ¯”è¾“å‡ºç»“æœï¼Œå¯ä»¥çœ‹å‡ºç›´æ¥<code>return target[key]</code>ä¼šå¯¼è‡´<code>this</code>æ— æ³•ç»‘å®šåœ¨ä»£ç†å¯¹è±¡ä¸Šï¼Œå½“ä¿®æ”¹å±æ€§æ—¶ä»£ç†äº‹ä»¶å°±æ— æ³•è§¦å‘å¯¼è‡´é”™è¯¯ï¼Œæ‰€ä»¥å»ºè®®ç›´æ¥æŒ‰ç…§<code>Reflect.get(target, key, receiver)</code>å¤„ç†ã€‚</p><h1 id="å“åº”å¼ç¼–ç¨‹"><a href="#å“åº”å¼ç¼–ç¨‹" class="headerlink" title="å“åº”å¼ç¼–ç¨‹"></a>å“åº”å¼ç¼–ç¨‹</h1><p>æ­¤å¤„æˆ‘ä»¬ä»¥<code>vue3</code>çš„å“åº”å¼ç¼–ç¨‹ä¸ºä¾‹ï¼Œè‡ªå®šä¹‰å®ç°refå’Œreactiveçš„ç®€åŒ–ç‰ˆ:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// å­˜å‚¨ä¾èµ–å…³ç³»çš„ WeakMap</span></span><br><span class="line"><span class="keyword">const</span> targetMap = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// å½“å‰æ­£åœ¨æ”¶é›†ä¾èµ–çš„å‰¯ä½œç”¨å‡½æ•°</span></span><br><span class="line"><span class="keyword">let</span> activeEffect = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‰¯ä½œç”¨å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">effect</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  activeEffect = fn;</span><br><span class="line">  fn(); <span class="comment">// æ‰§è¡Œå‰¯ä½œç”¨ï¼Œè§¦å‘ä¾èµ–æ”¶é›†</span></span><br><span class="line">  activeEffect = <span class="literal">null</span>; <span class="comment">// æ¸…ç©º</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¾èµ–æ”¶é›†å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">track</span>(<span class="params">target, key</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (activeEffect) &#123;</span><br><span class="line">    <span class="keyword">let</span> depsMap = targetMap.get(target);</span><br><span class="line">    <span class="keyword">if</span> (!depsMap) &#123;</span><br><span class="line">      targetMap.set(target, (depsMap = <span class="keyword">new</span> <span class="built_in">Map</span>()));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> dep = depsMap.get(key);</span><br><span class="line">    <span class="keyword">if</span> (!dep) &#123;</span><br><span class="line">      depsMap.set(key, (dep = <span class="keyword">new</span> <span class="built_in">Set</span>()));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    dep.add(activeEffect); <span class="comment">// å°†å‰¯ä½œç”¨æ·»åŠ åˆ°ä¾èµ–é›†åˆ</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è§¦å‘ä¾èµ–æ›´æ–°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">trigger</span>(<span class="params">target, key</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> depsMap = targetMap.get(target);</span><br><span class="line">  <span class="keyword">if</span> (!depsMap) <span class="keyword">return</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> dep = depsMap.get(key);</span><br><span class="line">  <span class="keyword">if</span> (dep) &#123;</span><br><span class="line">    dep.forEach(<span class="function"><span class="params">effect</span> =&gt;</span> effect()); <span class="comment">// æ‰§è¡Œæ‰€æœ‰ä¾èµ–å‰¯ä½œç”¨</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç®€åŒ–ç‰ˆ reactive</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reactive</span>(<span class="params">target</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Proxy</span>(target, &#123;</span><br><span class="line">    <span class="keyword">get</span>(target, key, receiver) &#123;</span><br><span class="line">      <span class="keyword">const</span> result = <span class="built_in">Reflect</span>.get(target, key, receiver);</span><br><span class="line">      track(target, key); <span class="comment">// æ”¶é›†ä¾èµ–</span></span><br><span class="line">      <span class="keyword">return</span> result;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">set</span>(target, key, value, receiver) &#123;</span><br><span class="line">      <span class="keyword">const</span> oldValue = target[key];</span><br><span class="line">      <span class="keyword">const</span> result = <span class="built_in">Reflect</span>.set(target, key, value, receiver);</span><br><span class="line">      <span class="keyword">if</span> (oldValue !== value) &#123;</span><br><span class="line">        trigger(target, key); <span class="comment">// è§¦å‘æ›´æ–°</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç®€åŒ–ç‰ˆ ref</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ref</span>(<span class="params">initialValue</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> _value = &#123; <span class="attr">value</span>: initialValue &#125;; <span class="comment">// åˆ›å»ºä¸€ä¸ªåŒ…è£¹å¯¹è±¡</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">// å¯¹äºå¯¹è±¡ç±»å‹ï¼Œä½¿ç”¨ reactive è½¬æ¢ä¸ºå“åº”å¼</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> initialValue === <span class="string">'object'</span> &amp;&amp; initialValue !== <span class="literal">null</span>) &#123;</span><br><span class="line">    _value.value = reactive(initialValue);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Proxy</span>(_value, &#123;</span><br><span class="line">    <span class="keyword">get</span>(target, key) &#123;</span><br><span class="line">      track(target, key); <span class="comment">// æ”¶é›†ä¾èµ–</span></span><br><span class="line">      <span class="keyword">return</span> target[key];</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">set</span>(target, key, value) &#123;</span><br><span class="line">      <span class="comment">// å¯¹äºå¯¹è±¡ç±»å‹ï¼Œä½¿ç”¨ reactive è½¬æ¢</span></span><br><span class="line">      <span class="keyword">if</span> (key === <span class="string">'value'</span> &amp;&amp; <span class="keyword">typeof</span> value === <span class="string">'object'</span> &amp;&amp; value !== <span class="literal">null</span>) &#123;</span><br><span class="line">        target[key] = reactive(value);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        target[key] = value;</span><br><span class="line">      &#125;</span><br><span class="line">      trigger(target, key); <span class="comment">// è§¦å‘æ›´æ–°</span></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;åœ¨ JavaScript ä¸­ï¼Œ&lt;strong&gt;&lt;code&gt;Reflect&lt;/code&gt;&lt;/strong&gt; æ˜¯ä¸€ä¸ªå†…ç½®å¯¹è±¡ï¼Œæä¾›äº†æ‹¦æˆªå’Œæ“ä½œ </summary>
      
    
    
    
    <category term="å‰ç«¯" scheme="https://gofugui.github.io/categories/å‰ç«¯/"/>
    
    
    <category term="JavaScript" scheme="https://gofugui.github.io/tags/JavaScript/"/>
    
    <category term="Web" scheme="https://gofugui.github.io/tags/Web/"/>
    
    <category term="ES6" scheme="https://gofugui.github.io/tags/ES6/"/>
    
  </entry>
  
  <entry>
    <title>å‰ç«¯æŠ€æœ¯åˆ†äº«MediaRecordå®ç°è¿åŠ¨ç›¸æœº</title>
    <link href="https://gofugui.github.io/2024/07/27/%E4%BD%BF%E7%94%A8MediaRecord%E5%AE%9E%E7%8E%B0%E8%BF%90%E5%8A%A8%E7%9B%B8%E6%9C%BA%E5%8A%9F%E8%83%BD%20copy/"/>
    <id>https://gofugui.github.io/2024/07/27/%E4%BD%BF%E7%94%A8MediaRecord%E5%AE%9E%E7%8E%B0%E8%BF%90%E5%8A%A8%E7%9B%B8%E6%9C%BA%E5%8A%9F%E8%83%BD%20copy/</id>
    <published>2024-07-27T06:52:14.975Z</published>
    <updated>2024-07-27T06:52:14.976Z</updated>
    
    <content type="html"><![CDATA[<h3 id="é¡¹ç›®ä½“éªŒåœ°å€"><a href="#é¡¹ç›®ä½“éªŒåœ°å€" class="headerlink" title="é¡¹ç›®ä½“éªŒåœ°å€"></a>é¡¹ç›®ä½“éªŒåœ°å€</h3><p><a href="/webrtc/index.html">è¿åŠ¨ç›¸æœºä½“éªŒåœ°å€2</a><br><a href="/dist/index.html">è¿åŠ¨ç›¸æœºä½“éªŒåœ°å€(æ–°)</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;é¡¹ç›®ä½“éªŒåœ°å€&quot;&gt;&lt;a href=&quot;#é¡¹ç›®ä½“éªŒåœ°å€&quot; class=&quot;headerlink&quot; title=&quot;é¡¹ç›®ä½“éªŒåœ°å€&quot;&gt;&lt;/a&gt;é¡¹ç›®ä½“éªŒåœ°å€&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;/webrtc/index.html&quot;&gt;è¿åŠ¨ç›¸æœºä½“éªŒåœ°å€2&lt;/a&gt;&lt;br&gt;&lt;a href=</summary>
      
    
    
    
    <category term="å‰ç«¯" scheme="https://gofugui.github.io/categories/å‰ç«¯/"/>
    
    
    <category term="JavaScript" scheme="https://gofugui.github.io/tags/JavaScript/"/>
    
    <category term="Web" scheme="https://gofugui.github.io/tags/Web/"/>
    
    <category term="ES6" scheme="https://gofugui.github.io/tags/ES6/"/>
    
    <category term="html" scheme="https://gofugui.github.io/tags/html/"/>
    
  </entry>
  
  <entry>
    <title>reactåŸºç¡€æ¦‚å¿µ</title>
    <link href="https://gofugui.github.io/2024/07/03/react%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/"/>
    <id>https://gofugui.github.io/2024/07/03/react%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/</id>
    <published>2024-07-03T08:26:21.233Z</published>
    <updated>2024-07-07T05:12:34.897Z</updated>
    
    <content type="html"><![CDATA[<h3 id="react-fiberç®—æ³•"><a href="#react-fiberç®—æ³•" class="headerlink" title="react fiberç®—æ³•"></a>react fiberç®—æ³•</h3><pre><code class="bash">1ã€åœ¨æ—©æœŸç‰ˆæœ¬ä¸­ï¼Œreactæ¸²æŸ“çš„æ–¹å¼æ˜¯é€’å½’æ–¹å¼ï¼Œæ¯æ¬¡æ¸²æŸ“éƒ½ä¼šé‡æ–°åˆ›å»ºç»„ä»¶ï¼Œç„¶åè¿›è¡Œdiffæ¯”è¾ƒï¼Œæœ€åæ›´æ–°è§†å›¾ï¼Œæ•´ä¸ªè¿‡ç¨‹æ˜¯ä¸€æ°”å‘µæˆï¼Œä¸­é—´ä¸è®¸ä¸­æ­¢æˆ–æš‚åœï¼Œä½†æ˜¯éšç€reactçš„æ›´æ–°ï¼Œä¸šåŠ¡è¶Šæ¥è¶Šå¤æ‚ï¼Œè¿™ç§æ–¹å¼åœ¨å¤„ç†å¤æ‚è§†å›¾å’Œå¤§æ•°æ®é‡ä¸šåŠ¡æ—¶ä¼šé¢ä¸´é˜»å¡å’Œå¡é¡¿çš„é—®é¢˜ï¼Œä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œreactå¼€å§‹ä½¿ç”¨fiberç®—æ³•ï¼Œfiberç®—æ³•å¯ä»¥ç†è§£ä¸ºreactçš„è™šæ‹Ÿdomï¼Œreactä¼šæ ¹æ®fiberç®—æ³•æ¥ç¡®å®šç»„ä»¶çš„æ›´æ–°é¡ºåºï¼Œå¦‚æœä¸»çº¿ç¨‹ä¸Šæœ‰è¾“å…¥ç­‰æ›´é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡åˆ™ä¼šè®©æ¸¡å‡ºæ‰§è¡Œæƒï¼Œè®©ä¸»çº¿ç¨‹æ‰§è¡Œå…¶ä»–ä»»åŠ¡ã€‚2ã€åœ¨æœ¬è´¨ä¸Šfiberæ˜¯ä¸€ä¸ªjavascriptå¯¹è±¡ï¼Œä»£è¡¨ç€reactçš„å·¥ä½œå•å…ƒï¼Œå®ƒåŒ…å«äº†ç»„ä»¶çš„ä¿¡æ¯ã€‚reactå¯ä»¥åœ¨å¤„ç†ä»»ä½•fiberå¯¹è±¡ä¹‹å‰åˆ¤æ–­æ˜¯å¦æœ‰è¶³å¤Ÿçš„æ—¶é—´å®Œæˆæ”¹å·¥ä½œï¼Œå¹¶åœ¨å¿…è¦æ—¶æ¢å¤å’Œä¸­æ–­è¯¥å·¥ä½œã€‚</code></pre><h3 id="react-hooksä½¿ç”¨"><a href="#react-hooksä½¿ç”¨" class="headerlink" title="react hooksä½¿ç”¨"></a>react hooksä½¿ç”¨</h3><pre><code class="bash"><span class="comment"># react hooksä¸èƒ½æ”¾åœ¨å¾ªç¯ã€æ¡ä»¶åˆ¤æ–­ã€å‡½æ•°å†…éƒ¨</span>ï¼ˆ1ï¼‰ã€ç¡®ä¿hooksæ‰§è¡Œé¡ºåºçš„ç¨³å®šæ€§ï¼šreactéœ€è¦æ ¹æ®Hooksçš„è°ƒç”¨é¡ºåºæ¥ç»´æŠ¤å†…éƒ¨çš„çŠ¶æ€ã€‚å°†hooksæ”¾åœ¨æ¡ä»¶è¯­å¥æˆ–å¾ªç¯ä¸­å¯èƒ½å¯¼è‡´æ¯æ¬¡æ¸²æŸ“æ—¶hooksæ‰§è¡Œé¡ºåºå˜åŒ–ï¼Œè¿™ä¼šç ´åReactå¯¹çŠ¶æ€çš„ç®¡ç†ï¼Œä½¿å¾—ç»„ä»¶çŠ¶æ€å˜å¾—ä¸å¯é¢„æµ‹ã€‚ï¼ˆ2ï¼‰ã€ç»´æŠ¤hooksçš„è°ƒç”¨é“¾è¡¨ï¼šreactå†…éƒ¨ä½¿ç”¨ä¸€ä¸ªé“¾è¡¨æ¥è·Ÿè¸ªæ¯ä¸ªhooksè°ƒç”¨ï¼Œç¡®ä¿åœ¨ç»„ä»¶çš„æ¯æ¬¡æ›´æ–°æ—¶èƒ½å‡†ç¡®çš„æ¢å¤çŠ¶æ€ã€‚æ¡ä»¶æˆ–å¾ªç¯å†…çš„hooksä¼šæ‰“ç ´è¿™ä¸€æœºåˆ¶ï¼Œå› ä¸ºå®ƒä»¬å¯èƒ½ä¸ä¼šæŒ‰ç…§ä¸Šæ¬¡æ¸²æŸ“çš„é¡ºåºè¢«è°ƒç”¨ã€‚ï¼ˆ3ï¼‰ã€å‡½æ•°ç»„ä»¶çš„çº¯å‡½æ•°ç‰¹æ€§ï¼šå‡½æ•°ç»„ä»¶åº”è¢«è§†ä¸ºçº¯å‡½æ•°ï¼Œå¯¹äºç›¸åŒçš„è¾“å…¥åº”å½“äº§ç”Ÿç›¸åŒçš„è¾“å‡ºï¼Œæ¡ä»¶æ€§çš„ä½¿ç”¨hooksä¼šä½¿å¾—ç»„ä»¶è¡Œä¸ºä¾èµ–äºå¤–éƒ¨æ¡ä»¶ï¼Œè€Œä¸æ˜¯çŠ¶æ€ï¼Œè¿™ç ´åäº†ç»„ä»¶çš„å°è£…æ€§å’Œå¯é¢„æµ‹æ€§ã€‚ï¼ˆ4ï¼‰ä¾¿äºç†è§£å’Œè°ƒè¯•ã€‚<span class="comment"># åœ¨Reactå¼€å‘ä¸­ä½¿ç”¨React Hookså¯ä»¥å¸¦æ¥ä»¥ä¸‹ä¼˜åŠ¿ï¼š</span>ç®€åŒ–ä»£ç ï¼šç›¸æ¯”äºä¼ ç»Ÿçš„ç±»ç»„ä»¶ï¼Œä½¿ç”¨React Hookså¯ä»¥æ›´ç®€æ´åœ°ç®¡ç†ç»„ä»¶çš„çŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œå‡å°‘äº†å†—ä½™ä»£ç ã€‚æé«˜å¯é‡ç”¨æ€§ï¼šReact Hookså¯ä»¥å°†ç»„ä»¶é€»è¾‘è¿›è¡Œå°è£…ï¼Œä½¿å¾—é€»è¾‘å¯ä»¥åœ¨å¤šä¸ªç»„ä»¶ä¸­å…±äº«å’Œå¤ç”¨ã€‚æ–¹ä¾¿æµ‹è¯•ï¼šç”±äºReact Hooksä½¿ç»„ä»¶çš„é€»è¾‘æ›´åŠ çº¯ç²¹ï¼Œæ²¡æœ‰å‰¯ä½œç”¨ï¼Œå› æ­¤æ›´å®¹æ˜“è¿›è¡Œå•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•ã€‚<span class="comment"># React Hooksçš„åº”ç”¨åœºæ™¯åŒ…æ‹¬ä½†ä¸é™äºï¼š</span>ç®€å•çš„ç»„ä»¶ï¼šå¯¹äºåªæœ‰å°‘é‡çŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„ç»„ä»¶ï¼Œä½¿ç”¨React Hookså¯ä»¥æ›´åŠ ç®€æ´åœ°å®ç°ã€‚å¤æ‚çš„ç»„ä»¶é€»è¾‘ï¼šå¯¹äºéœ€è¦ç®¡ç†å¤šä¸ªçŠ¶æ€å’Œå¤„ç†å¤æ‚é€»è¾‘çš„ç»„ä»¶ï¼Œä½¿ç”¨React Hookså¯ä»¥æ›´å¥½åœ°ç»„ç»‡ä»£ç ã€‚å‡½æ•°å¼ç»„ä»¶ï¼šReact Hooksä¸»è¦é€‚ç”¨äºå‡½æ•°å¼ç»„ä»¶ï¼Œå¯ä»¥è®©å‡½æ•°å¼ç»„ä»¶å…·å¤‡ç±»ç»„ä»¶çš„åŠŸèƒ½ã€‚</code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;react-fiberç®—æ³•&quot;&gt;&lt;a href=&quot;#react-fiberç®—æ³•&quot; class=&quot;headerlink&quot; title=&quot;react fiberç®—æ³•&quot;&gt;&lt;/a&gt;react fiberç®—æ³•&lt;/h3&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;1ã€åœ¨æ—©æœŸ</summary>
      
    
    
    
    <category term="å‰ç«¯" scheme="https://gofugui.github.io/categories/å‰ç«¯/"/>
    
    
    <category term="JavaScript" scheme="https://gofugui.github.io/tags/JavaScript/"/>
    
    <category term="Web" scheme="https://gofugui.github.io/tags/Web/"/>
    
    <category term="ES6" scheme="https://gofugui.github.io/tags/ES6/"/>
    
    <category term="html" scheme="https://gofugui.github.io/tags/html/"/>
    
  </entry>
  
  <entry>
    <title>å¾®ä¿¡å°ç¨‹åºä½¿ç”¨canvasåˆ›å»ºåƒç´ å¤´åƒ</title>
    <link href="https://gofugui.github.io/2023/08/05/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%BD%BF%E7%94%A8canvas%E5%88%9B%E5%BB%BA%E5%83%8F%E7%B4%A0%E5%A4%B4%E5%83%8F/"/>
    <id>https://gofugui.github.io/2023/08/05/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%BD%BF%E7%94%A8canvas%E5%88%9B%E5%BB%BA%E5%83%8F%E7%B4%A0%E5%A4%B4%E5%83%8F/</id>
    <published>2023-08-05T06:02:28.621Z</published>
    <updated>2024-07-27T07:07:24.442Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ä¹æ¶‚ç”»æ¿-å°ç¨‹åºåˆ›ä½œç¤ºä¾‹"><a href="#ä¹æ¶‚ç”»æ¿-å°ç¨‹åºåˆ›ä½œç¤ºä¾‹" class="headerlink" title="ä¹æ¶‚ç”»æ¿ å°ç¨‹åºåˆ›ä½œç¤ºä¾‹"></a>ä¹æ¶‚ç”»æ¿ å°ç¨‹åºåˆ›ä½œç¤ºä¾‹</h3><p><img src="https://gofugui.github.io/images/img148.jpg" alt="ç¤ºä¾‹ä¸€"><br><img src="https://gofugui.github.io/images/img149.jpg" alt="ç¤ºä¾‹äºŒ"><br><img src="https://gofugui.github.io/images/img150.jpg" alt="ç¤ºä¾‹ä¸‰"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;ä¹æ¶‚ç”»æ¿-å°ç¨‹åºåˆ›ä½œç¤ºä¾‹&quot;&gt;&lt;a href=&quot;#ä¹æ¶‚ç”»æ¿-å°ç¨‹åºåˆ›ä½œç¤ºä¾‹&quot; class=&quot;headerlink&quot; title=&quot;ä¹æ¶‚ç”»æ¿ å°ç¨‹åºåˆ›ä½œç¤ºä¾‹&quot;&gt;&lt;/a&gt;ä¹æ¶‚ç”»æ¿ å°ç¨‹åºåˆ›ä½œç¤ºä¾‹&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;https://gofugui.gith</summary>
      
    
    
    
    <category term="å‰ç«¯" scheme="https://gofugui.github.io/categories/å‰ç«¯/"/>
    
    
    <category term="JavaScript" scheme="https://gofugui.github.io/tags/JavaScript/"/>
    
    <category term="Web" scheme="https://gofugui.github.io/tags/Web/"/>
    
    <category term="ES6" scheme="https://gofugui.github.io/tags/ES6/"/>
    
    <category term="html" scheme="https://gofugui.github.io/tags/html/"/>
    
  </entry>
  
  <entry>
    <title>å‰ç«¯åŸºç¡€æ¦‚å¿µ</title>
    <link href="https://gofugui.github.io/2021/04/08/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/"/>
    <id>https://gofugui.github.io/2021/04/08/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/</id>
    <published>2021-04-08T07:44:39.405Z</published>
    <updated>2024-07-05T12:52:21.423Z</updated>
    
    <content type="html"><![CDATA[<h3 id="è°ƒç”¨å †æ ˆ"><a href="#è°ƒç”¨å †æ ˆ" class="headerlink" title="è°ƒç”¨å †æ ˆ"></a>è°ƒç”¨å †æ ˆ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">è°ƒç”¨æ ˆæ˜¯è§£é‡Šå™¨ï¼ˆæ¯”å¦‚æµè§ˆå™¨ä¸­çš„ JavaScript è§£é‡Šå™¨ï¼‰è¿½è¸ªå‡½æ•°æ‰§è¡Œæµçš„ä¸€ç§æœºåˆ¶ã€‚å½“æ‰§è¡Œç¯å¢ƒä¸­è°ƒç”¨äº†å¤šä¸ªå‡½æ•°æ—¶ï¼Œé€šè¿‡è¿™ç§æœºåˆ¶ï¼Œæˆ‘ä»¬èƒ½å¤Ÿè¿½è¸ªåˆ°å“ªä¸ªå‡½æ•°æ­£åœ¨æ‰§è¡Œï¼Œæ‰§è¡Œçš„å‡½æ•°ä½“ä¸­åˆè°ƒç”¨äº†å“ªä¸ªå‡½æ•°ã€‚</span><br><span class="line"></span><br><span class="line">æ¯è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œè§£é‡Šå™¨å°±ä¼šæŠŠè¯¥å‡½æ•°æ·»åŠ è¿›è°ƒç”¨æ ˆå¹¶å¼€å§‹æ‰§è¡Œã€‚</span><br><span class="line">æ­£åœ¨è°ƒç”¨æ ˆä¸­æ‰§è¡Œçš„å‡½æ•°è¿˜è°ƒç”¨äº†å…¶å®ƒå‡½æ•°ï¼Œé‚£ä¹ˆæ–°å‡½æ•°ä¹Ÿå°†ä¼šè¢«æ·»åŠ è¿›è°ƒç”¨æ ˆï¼Œä¸€æ—¦è¿™ä¸ªå‡½æ•°è¢«è°ƒç”¨ï¼Œä¾¿ä¼šç«‹å³æ‰§è¡Œã€‚</span><br><span class="line">å½“å‰å‡½æ•°æ‰§è¡Œå®Œæ¯•åï¼Œè§£é‡Šå™¨å°†å…¶æ¸…å‡ºè°ƒç”¨æ ˆï¼Œç»§ç»­æ‰§è¡Œå½“å‰æ‰§è¡Œç¯å¢ƒä¸‹çš„å‰©ä½™çš„ä»£ç ã€‚</span><br><span class="line">å½“åˆ†é…çš„è°ƒç”¨æ ˆç©ºé—´è¢«å æ»¡æ—¶ï¼Œä¼šå¼•å‘â€œå †æ ˆæº¢å‡ºâ€é”™è¯¯ã€‚</span><br></pre></td></tr></table></figure><h3 id="åŸå§‹ç±»å‹"><a href="#åŸå§‹ç±»å‹" class="headerlink" title="åŸå§‹ç±»å‹"></a>åŸå§‹ç±»å‹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æœ€æ–°çš„ ECMAScript æ ‡å‡†å®šä¹‰äº† 9 ç§æ•°æ®ç±»å‹:</span></span><br><span class="line"><span class="comment"># 6 ç§åŸå§‹ç±»å‹ï¼Œä½¿ç”¨ typeof è¿ç®—ç¬¦æ£€æŸ¥:</span></span><br><span class="line"></span><br><span class="line">undefined: typeof =&gt; <span class="string">'undefined'</span></span><br><span class="line">Boolean: typeof =&gt; <span class="string">'boolean'</span></span><br><span class="line">Number: typeof =&gt; <span class="string">'number'</span></span><br><span class="line">String: typeof =&gt; <span class="string">'string'</span></span><br><span class="line">BigInt: typeof =&gt; <span class="string">'bigint'</span></span><br><span class="line">Symbol: typeof =&gt; <span class="string">'symbol'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¹è±¡å’Œå‡½æ•°ç±»å‹</span></span><br><span class="line">null: typeof =&gt; <span class="string">'object'</span></span><br><span class="line">Object: typeof =&gt; <span class="string">'object'</span></span><br><span class="line">Function: typeof =&gt; <span class="string">'function'</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># å†…å»ºå¯¹è±¡ typeof =&gt; 'function'</span></span><br><span class="line">Date</span><br><span class="line">Array </span><br><span class="line">Map</span><br><span class="line">Set</span><br><span class="line">WeakMap</span><br><span class="line">WeakSet</span><br><span class="line">Regxp</span><br></pre></td></tr></table></figure><h3 id="å€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹"><a href="#å€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹" class="headerlink" title="å€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹"></a>å€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å€¼ç±»å‹ï¼š</span></span><br><span class="line">string, number, boolean, undefined, bigint, symbol å’Œ null</span><br><span class="line"><span class="comment"># å¼•ç”¨ç±»å‹ï¼š</span></span><br><span class="line">Object, Array, Function,...</span><br></pre></td></tr></table></figure><h3 id="éšå¼-æ˜¾å¼-åä¹‰å’Œé¸­å­ç±»å‹"><a href="#éšå¼-æ˜¾å¼-åä¹‰å’Œé¸­å­ç±»å‹" class="headerlink" title="éšå¼, æ˜¾å¼, åä¹‰å’Œé¸­å­ç±»å‹"></a>éšå¼, æ˜¾å¼, åä¹‰å’Œé¸­å­ç±»å‹</h3><p><strong>JavaScript æ˜¯ä¸€ç§<code>å¼±ç±»å‹</code>æˆ–è€…è¯´<code>åŠ¨æ€</code>è¯­è¨€ã€‚è¿™æ„å‘³ç€ä½ ä¸ç”¨æå‰å£°æ˜å˜é‡çš„ç±»å‹ï¼Œåœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œç±»å‹ä¼šè¢«è‡ªåŠ¨ç¡®å®šã€‚è¿™ä¹Ÿæ„å‘³ç€ä½ å¯ä»¥ä½¿ç”¨åŒä¸€ä¸ªå˜é‡ä¿å­˜ä¸åŒç±»å‹çš„æ•°æ®ï¼š</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var foo = 42;   <span class="comment"># foo is a Number now</span></span><br><span class="line">foo = <span class="string">"bar"</span>;    <span class="comment"># foo is a String now</span></span><br><span class="line">foo = <span class="literal">true</span>;     <span class="comment"># foo is a Boolean now</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># éšå¼è½¬æ¢ä¸ºå¸ƒå°”ï¼šâ€œtruthyâ€å’Œâ€œfalsyâ€ã€‚å½“ JavaScript éœ€è¦ä¸€ä¸ªå¸ƒå°”å€¼æ—¶ï¼ˆä¾‹å¦‚ï¼šif è¯­å¥ï¼‰ï¼Œä»»ä½•å€¼éƒ½å¯ä»¥è¢«ä½¿ç”¨ã€‚ æœ€ç»ˆè¿™äº›å€¼å°†è¢«è½¬æ¢ä¸º true æˆ– falseã€‚</span></span><br><span class="line"><span class="string">''</span>, +0, -0, NaN, null, undefined, 0, è½¬æ¢ä¸ºbooleanç±»å‹çš„æ—¶å€™éƒ½æ˜¯<span class="literal">false</span></span><br></pre></td></tr></table></figure></p><h3 id="ä¸-typeof-ä¸-instanceof"><a href="#ä¸-typeof-ä¸-instanceof" class="headerlink" title="== ä¸ ===, typeof ä¸ instanceof"></a>== ä¸ ===, typeof ä¸ instanceof</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment"># == ä¼šè¿›è¡Œéšå¼è½¬æ¢</span></span><br><span class="line">    1.å¦‚æœæ¯”è¾ƒçš„ä¸¤è€…ä¸­æœ‰å¸ƒå°”å€¼(Boolean)ï¼Œä¼šæŠŠ Boolean å…ˆè½¬æ¢ä¸ºå¯¹åº”çš„ Numberï¼Œå³ 0 å’Œ 1ï¼Œç„¶åè¿›è¡Œæ¯”è¾ƒã€‚</span><br><span class="line">    2.å¦‚æœæ¯”è¾ƒçš„åŒæ–¹ä¸­æœ‰ä¸€æ–¹ä¸º Numberï¼Œä¸€æ–¹ä¸º Stringæ—¶ï¼Œä¼šæŠŠ String é€šè¿‡ Number() æ–¹æ³•è½¬æ¢ä¸ºæ•°å­—ï¼Œç„¶åè¿›è¡Œæ¯”è¾ƒã€‚</span><br><span class="line">    3.å¦‚æœæ¯”è¾ƒçš„åŒæ–¹ä¸­æœ‰ä¸€æ–¹ä¸º Booleanï¼Œä¸€æ–¹ä¸º Stringæ—¶ï¼Œä¼šå°†åŒæ–¹è½¬æ¢ä¸ºæ•°å­—ï¼Œç„¶åå†è¿›è¡Œæ¯”è¾ƒã€‚</span><br><span class="line">    4.å¦‚æœæ¯”è¾ƒçš„åŒæ–¹ä¸­æœ‰ä¸€æ–¹ä¸º Numberï¼Œä¸€æ–¹ä¸ºObjectæ—¶ï¼Œåˆ™ä¼šè°ƒç”¨ valueOf æ–¹æ³•å°†Objectè½¬æ¢ä¸ºæ•°å­—ï¼Œç„¶åè¿›è¡Œæ¯”è¾ƒã€‚ </span><br><span class="line"><span class="comment"># === ä¸ä¼šè¿›è¡Œè½¬æ¢</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># typeof è¿”å›æ•°æ®ç±»å‹çš„ ç±»å‹æ ‡ç­¾</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># instanceof è¿ç®—ç¬¦ç”¨äºæ£€æµ‹æ„é€ å‡½æ•°çš„prototypeå±æ€§æ˜¯å¦å‡ºç°åœ¨æŸä¸ªå®ä¾‹å¯¹è±¡çš„åŸå‹é“¾ä¸Š</span></span><br></pre></td></tr></table></figure><h3 id="this-call-apply-å’Œ-bind"><a href="#this-call-apply-å’Œ-bind" class="headerlink" title="this, call, apply å’Œ bind"></a>this, call, apply å’Œ bind</h3><p><strong>ä¸å…¶ä»–è¯­è¨€ç›¸æ¯”ï¼Œå‡½æ•°çš„ this å…³é”®å­—åœ¨ JavaScript ä¸­çš„è¡¨ç°ç•¥æœ‰ä¸åŒï¼Œæ­¤å¤–ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼å’Œéä¸¥æ ¼æ¨¡å¼ä¹‹é—´ä¹Ÿä¼šæœ‰ä¸€äº›å·®åˆ«ã€‚</strong><br><strong>åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå‡½æ•°çš„è°ƒç”¨æ–¹å¼å†³å®šäº†thisçš„å€¼  <code>ï¼ˆè¿è¡Œæ—¶ç»‘å®šï¼‰</code>ï¼Œæ‰€ä»¥thisçš„å€¼åœ¨æ¯æ¬¡å‡½æ•°è°ƒç”¨çš„æ—¶å€™éƒ½å¯èƒ½ä¸åŒã€‚es5 ä¸­å¼•å…¥äº†bindæ¥è®¾ç½®thisçš„å€¼ã€‚</strong><br><strong>éœ€è¦æŒ‡å‡ºçš„æ˜¯åœ¨es2015ä¸­å¼•å…¥çš„ç®­å¤´å‡½æ•°ä¸­ï¼Œä¸æä¾›è‡ªèº«çš„thisç»‘å®šï¼Œå…¶thiså€¼ä¿æŒä¸ºé—­åˆè¯æ³•çš„ä¸Šä¸‹æ–‡å€¼</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># call ,apply</span></span><br><span class="line">äºŒè€…ä½œç”¨ç±»ä¼¼ï¼Œéƒ½æ˜¯æŒ‡å®šå…·ä½“thiså’Œå‚æ•°è°ƒç”¨å‡½æ•°ï¼ŒåŒºåˆ«æ˜¯callè°ƒç”¨æ—¶å‚æ•°ä»¥åˆ—è¡¨çš„å½¢å¼ä¼ é€’ï¼Œè€Œapplyåˆ™æ˜¯ä»¥æ•°ç»„çš„å½¢å¼ä¼ é€’å‚æ•°</span><br></pre></td></tr></table></figure></p><h3 id="å‡½æ•°ä½œç”¨åŸŸ-å—çº§ä½œç”¨åŸŸå’Œè¯æ³•ä½œç”¨åŸŸ"><a href="#å‡½æ•°ä½œç”¨åŸŸ-å—çº§ä½œç”¨åŸŸå’Œè¯æ³•ä½œç”¨åŸŸ" class="headerlink" title="å‡½æ•°ä½œç”¨åŸŸ, å—çº§ä½œç”¨åŸŸå’Œè¯æ³•ä½œç”¨åŸŸ"></a>å‡½æ•°ä½œç”¨åŸŸ, å—çº§ä½œç”¨åŸŸå’Œè¯æ³•ä½œç”¨åŸŸ</h3><p>ä½œç”¨åŸŸï¼šå½“å‰æ‰§è¡Œçš„ä¸Šä¸‹æ–‡ã€‚å€¼å’Œè¡¨è¾¾å¼åœ¨å…¶ä¸­â€œå¯è§â€œæˆ–è€…å¯ä»¥è¢«è®¿é—®åˆ°çš„ä¸Šä¸‹æ–‡ï¼Œjsä½œç”¨åŸŸä»¥é“¾çš„å½¢å¼å­˜åœ¨ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">jsä»£ç æ‰§è¡Œæ—¶ï¼Œé¦–å…ˆå›åˆ›å»ºä¸€ä¸ªå…¨å±€çš„æ‰§è¡Œä¸Šä¸‹æ–‡</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‡½æ•°ä½œç”¨åŸŸ</span></span><br><span class="line">é€šå¸¸æƒ…å†µä¸‹ï¼Œåœ¨å‡½æ•°å†…éƒ¨å®šä¹‰çš„å˜é‡ä¸èƒ½åœ¨å‡½æ•°ä¹‹å¤–çš„ä»»ä½•åœ°æ–¹è®¿é—®ï¼ŒåŒæ—¶å†…éƒ¨å‡½æ•°åŒ…å«å¤–éƒ¨å‡½æ•°ä½œç”¨åŸŸã€‚</span><br><span class="line"><span class="comment"># å—çº§ä½œç”¨åŸŸ</span></span><br><span class="line">åœ¨jsä¸­å‡½æ•°å—æ˜¯ğŸˆ¯ï¸è¢«&#123;&#125;åŒ…è£¹ä½çš„ç›¸å…³è”çš„çŠ¶æ€é›†åˆï¼Œä¾‹å¦‚ä¸€ä¸ª<span class="keyword">for</span>å¾ªç¯ä½“ï¼Œä¸€ä¸ªæ¡ä»¶<span class="keyword">if</span>åˆ¤æ–­éƒ½å¯ä»¥çº³å…¥ä¸€ä¸ªå—çº§ä½œç”¨åŸŸèŒƒå›´</span><br></pre></td></tr></table></figure></p><h3 id="é—­åŒ…"><a href="#é—­åŒ…" class="headerlink" title="é—­åŒ…"></a>é—­åŒ…</h3><p><strong>ä½ å¯ä»¥åœ¨å‡½æ•°çš„å†…éƒ¨å†å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼ŒåµŒå¥—å‡½æ•°å¯¹å…¶å®¹å™¨å‡½æ•°æ˜¯ç§æœ‰çš„ï¼Œä»–è‡ªèº«ä¹Ÿå½¢æˆäº†ä¸€ä¸ªé—­åŒ…ï¼Œå½“é—­åŒ…å†…åŒ…å«å¤–éƒ¨ä½œç”¨åŸŸçš„å‚æ•°å’Œå˜é‡æ—¶ï¼Œä¼šä¿å­˜å…¶å€¼ï¼Œå½“ä¸€ä¸ªé—­åŒ…ä¸­è¿›è¡Œå˜é‡æŸ¥æ‰¾æ—¶ï¼Œæ›´è¿‘çš„ä½œç”¨åŸŸæœ‰æ›´é«˜çš„ä¼˜å…ˆæƒï¼Œè¿™å°±å½¢æˆäº†ä½œç”¨åŸŸé“¾</strong></p><h3 id="map-reduce-filter-ç­‰é«˜é˜¶å‡½æ•°"><a href="#map-reduce-filter-ç­‰é«˜é˜¶å‡½æ•°" class="headerlink" title="map, reduce, filter ç­‰é«˜é˜¶å‡½æ•°"></a>map, reduce, filter ç­‰é«˜é˜¶å‡½æ•°</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># map</span></span><br><span class="line">map() æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ï¼Œå…¶ç»“æœæ˜¯è¯¥æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ˜¯è°ƒç”¨ä¸€æ¬¡æä¾›çš„å‡½æ•°åçš„è¿”å›å€¼ã€‚</span><br><span class="line"><span class="comment"># reduce </span></span><br><span class="line">reduce() æ–¹æ³•å¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œä¸€ä¸ªç”±æ‚¨æä¾›çš„reducerå‡½æ•°(å‡åºæ‰§è¡Œ)ï¼Œå°†å…¶ç»“æœæ±‡æ€»ä¸ºå•ä¸ªè¿”å›å€¼ã€‚</span><br><span class="line"><span class="comment"># filter</span></span><br><span class="line">filter() æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„, å…¶åŒ…å«é€šè¿‡æ‰€æä¾›å‡½æ•°å®ç°çš„æµ‹è¯•çš„æ‰€æœ‰å…ƒç´ ã€‚</span><br></pre></td></tr></table></figure><h3 id="å˜é‡æå‡"><a href="#å˜é‡æå‡" class="headerlink" title="å˜é‡æå‡"></a>å˜é‡æå‡</h3><p><strong>å…¶å®è´¨æ˜¯å˜é‡çš„å£°æ˜æå‡</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">console.log(b)  <span class="comment"># undefined</span></span><br><span class="line">var b;          <span class="comment"># å£°æ˜æå‡</span></span><br><span class="line"></span><br><span class="line">console.log(c)  <span class="comment"># VM315:1 Uncaught ReferenceError: c is not defined</span></span><br><span class="line"><span class="built_in">let</span> c;          <span class="comment"># let å’Œ const å£°æ˜çš„æ— æ³•æå‡å˜é‡å£°æ˜</span></span><br></pre></td></tr></table></figure></p><h3 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h3><p><strong>Promise å¯¹è±¡ç”¨äºè¡¨ç¤ºä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„æœ€ç»ˆå®Œæˆ (æˆ–å¤±è´¥)åŠå…¶ç»“æœå€¼ã€‚</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ä¸€ä¸ª Promise å¿…ç„¶å¤„äºä»¥ä¸‹å‡ ç§çŠ¶æ€ä¹‹ä¸€ï¼š</span><br><span class="line"><span class="comment"># å¾…å®šï¼ˆpendingï¼‰: åˆå§‹çŠ¶æ€ï¼Œæ—¢æ²¡æœ‰è¢«å…‘ç°ï¼Œä¹Ÿæ²¡æœ‰è¢«æ‹’ç»ã€‚</span></span><br><span class="line"><span class="comment"># å·²å…‘ç°ï¼ˆfulfilledï¼‰: æ„å‘³ç€æ“ä½œæˆåŠŸå®Œæˆã€‚</span></span><br><span class="line"><span class="comment"># å·²æ‹’ç»ï¼ˆrejectedï¼‰: æ„å‘³ç€æ“ä½œå¤±è´¥ã€‚</span></span><br></pre></td></tr></table></figure></p><h3 id="ç«‹å³æ‰§è¡Œå‡½æ•°-æ¨¡å—åŒ–-å‘½åç©ºé—´"><a href="#ç«‹å³æ‰§è¡Œå‡½æ•°-æ¨¡å—åŒ–-å‘½åç©ºé—´" class="headerlink" title="ç«‹å³æ‰§è¡Œå‡½æ•°, æ¨¡å—åŒ–, å‘½åç©ºé—´"></a>ç«‹å³æ‰§è¡Œå‡½æ•°, æ¨¡å—åŒ–, å‘½åç©ºé—´</h3><h3 id="é€’å½’"><a href="#é€’å½’" class="headerlink" title="é€’å½’"></a>é€’å½’</h3><h3 id="ç®—æ³•"><a href="#ç®—æ³•" class="headerlink" title="ç®—æ³•"></a>ç®—æ³•</h3><h3 id="æ•°æ®ç»“æ„"><a href="#æ•°æ®ç»“æ„" class="headerlink" title="æ•°æ®ç»“æ„"></a>æ•°æ®ç»“æ„</h3><h3 id="æ¶ˆæ¯é˜Ÿåˆ—å’Œäº‹ä»¶å¾ªç¯"><a href="#æ¶ˆæ¯é˜Ÿåˆ—å’Œäº‹ä»¶å¾ªç¯" class="headerlink" title="æ¶ˆæ¯é˜Ÿåˆ—å’Œäº‹ä»¶å¾ªç¯"></a>æ¶ˆæ¯é˜Ÿåˆ—å’Œäº‹ä»¶å¾ªç¯</h3><p><strong>JavaScriptæœ‰ä¸€ä¸ªåŸºäºäº‹ä»¶å¾ªç¯çš„å¹¶å‘æ¨¡å‹ï¼Œäº‹ä»¶å¾ªç¯è´Ÿè´£æ‰§è¡Œä»£ç ã€æ”¶é›†å’Œå¤„ç†äº‹ä»¶ä»¥åŠæ‰§è¡Œé˜Ÿåˆ—ä¸­çš„å­ä»»åŠ¡ã€‚è¿™ä¸ªæ¨¡å‹ä¸å…¶å®ƒè¯­è¨€ä¸­çš„æ¨¡å‹æˆªç„¶ä¸åŒï¼Œæ¯”å¦‚ C å’Œ Javaã€‚</strong></p><p>ä¸€ä¸ª JavaScript è¿è¡Œæ—¶åŒ…å«äº†ä¸€ä¸ªå¾…å¤„ç†æ¶ˆæ¯çš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚æ¯ä¸€ä¸ªæ¶ˆæ¯éƒ½å…³è”ç€ä¸€ä¸ªç”¨ä»¥å¤„ç†è¿™ä¸ªæ¶ˆæ¯çš„å›è°ƒå‡½æ•°ã€‚</p><p>åœ¨ äº‹ä»¶å¾ªç¯ æœŸé—´çš„æŸä¸ªæ—¶åˆ»ï¼Œè¿è¡Œæ—¶ä¼šä»æœ€å…ˆè¿›å…¥é˜Ÿåˆ—çš„æ¶ˆæ¯å¼€å§‹å¤„ç†é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ã€‚è¢«å¤„ç†çš„æ¶ˆæ¯ä¼šè¢«ç§»å‡ºé˜Ÿåˆ—ï¼Œå¹¶ä½œä¸ºè¾“å…¥å‚æ•°æ¥è°ƒç”¨ä¸ä¹‹å…³è”çš„å‡½æ•°ã€‚æ­£å¦‚å‰é¢æ‰€æåˆ°çš„ï¼Œè°ƒç”¨ä¸€ä¸ªå‡½æ•°æ€»æ˜¯ä¼šä¸ºå…¶åˆ›é€ ä¸€ä¸ªæ–°çš„æ ˆå¸§ã€‚</p><p>å‡½æ•°çš„å¤„ç†ä¼šä¸€ç›´è¿›è¡Œåˆ°æ‰§è¡Œæ ˆå†æ¬¡ä¸ºç©ºä¸ºæ­¢ï¼›ç„¶åäº‹ä»¶å¾ªç¯å°†ä¼šå¤„ç†é˜Ÿåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªæ¶ˆæ¯ï¼ˆå¦‚æœè¿˜æœ‰çš„è¯ï¼‰ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¹‹æ‰€ä»¥ç§°ä¹‹ä¸º äº‹ä»¶å¾ªç¯ï¼Œæ˜¯å› ä¸ºå®ƒç»å¸¸æŒ‰ç…§ç±»ä¼¼å¦‚ä¸‹çš„æ–¹å¼æ¥è¢«å®ç°ï¼š</span></span><br><span class="line"><span class="keyword">while</span> (queue.waitForMessage()) &#123;</span><br><span class="line">  queue.processNextMessage();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>åœ¨æµè§ˆå™¨é‡Œï¼Œæ¯å½“ä¸€ä¸ªäº‹ä»¶å‘ç”Ÿå¹¶ä¸”æœ‰ä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨ç»‘å®šåœ¨è¯¥äº‹ä»¶ä¸Šæ—¶ï¼Œä¸€ä¸ªæ¶ˆæ¯å°±ä¼šè¢«æ·»åŠ è¿›æ¶ˆæ¯é˜Ÿåˆ—ã€‚å¦‚æœæ²¡æœ‰äº‹ä»¶ç›‘å¬å™¨ï¼Œè¿™ä¸ªäº‹ä»¶å°†ä¼šä¸¢å¤±ã€‚æ‰€ä»¥å½“ä¸€ä¸ªå¸¦æœ‰ç‚¹å‡»äº‹ä»¶å¤„ç†å™¨çš„å…ƒç´ è¢«ç‚¹å‡»æ—¶ï¼Œå°±ä¼šåƒå…¶ä»–äº‹ä»¶ä¸€æ ·äº§ç”Ÿä¸€ä¸ªç±»ä¼¼çš„æ¶ˆæ¯ã€‚</p><h3 id="setTimeout-setInterval-å’ŒrequestAnimationFrame"><a href="#setTimeout-setInterval-å’ŒrequestAnimationFrame" class="headerlink" title="setTimeout, setInterval å’ŒrequestAnimationFrame"></a>setTimeout, setInterval å’ŒrequestAnimationFrame</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># setTimeout</span></span><br><span class="line">ç”±setTimeout()è°ƒç”¨çš„ä»£ç è¿è¡Œåœ¨ä¸æ‰€åœ¨å‡½æ•°å®Œå…¨åˆ†ç¦»çš„æ‰§è¡Œç¯å¢ƒä¸Šã€‚è¿™ä¼šå¯¼è‡´ï¼Œè¿™äº›ä»£ç ä¸­åŒ…å«çš„ this å…³é”®å­—åœ¨éä¸¥æ ¼æ¨¡å¼ä¼šæŒ‡å‘ window (æˆ–å…¨å±€)å¯¹è±¡ï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹ä¸º undefinedï¼Œè¿™å’Œæ‰€æœŸæœ›çš„thisçš„å€¼æ˜¯ä¸ä¸€æ ·çš„ã€‚</span><br><span class="line">å®šæ—¶å™¨</span><br><span class="line">éœ€è¦åšthisç»‘å®šï¼Œæˆ–è€…ä½¿ç”¨å‡½æ•°åŒ…è£¹ï¼Œç®­å¤´å‡½æ•°è§£å†³</span><br><span class="line"><span class="comment"># requestAnimationFrame</span></span><br><span class="line">window.requestAnimationFrame() å‘Šè¯‰æµè§ˆå™¨â€”â€”ä½ å¸Œæœ›æ‰§è¡Œä¸€ä¸ªåŠ¨ç”»ï¼Œå¹¶ä¸”è¦æ±‚æµè§ˆå™¨åœ¨ä¸‹æ¬¡é‡ç»˜ä¹‹å‰è°ƒç”¨æŒ‡å®šçš„å›è°ƒå‡½æ•°æ›´æ–°åŠ¨ç”»ã€‚è¯¥æ–¹æ³•éœ€è¦ä¼ å…¥ä¸€ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å›è°ƒå‡½æ•°ä¼šåœ¨æµè§ˆå™¨ä¸‹ä¸€æ¬¡é‡ç»˜ä¹‹å‰æ‰§è¡Œ</span><br></pre></td></tr></table></figure><h3 id="å¤šæ€å’Œä»£ç å¤ç”¨"><a href="#å¤šæ€å’Œä»£ç å¤ç”¨" class="headerlink" title="å¤šæ€å’Œä»£ç å¤ç”¨"></a>å¤šæ€å’Œä»£ç å¤ç”¨</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¤šæ€</span></span><br></pre></td></tr></table></figure><h3 id="æŒ‰ä½æ“ä½œç¬¦-ç±»æ•°ç»„å¯¹è±¡å’Œç±»å‹åŒ–æ•°ç»„"><a href="#æŒ‰ä½æ“ä½œç¬¦-ç±»æ•°ç»„å¯¹è±¡å’Œç±»å‹åŒ–æ•°ç»„" class="headerlink" title="æŒ‰ä½æ“ä½œç¬¦, ç±»æ•°ç»„å¯¹è±¡å’Œç±»å‹åŒ–æ•°ç»„"></a>æŒ‰ä½æ“ä½œç¬¦, ç±»æ•°ç»„å¯¹è±¡å’Œç±»å‹åŒ–æ•°ç»„</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŒ‰ä½ä¸</span></span><br><span class="line">ä¸¤ä¸ªæ“ä½œæ•°éƒ½ä¸º1æ—¶ï¼Œåˆ™åœ¨è¯¥ä½è¿”å›1</span><br><span class="line"><span class="comment"># æŒ‰ä½æˆ–</span></span><br><span class="line">ä¸¤ä¸ªæ“ä½œæ•°å¯¹åº”ä½åªè¦æœ‰ä¸€ä¸ªä¸º1ï¼Œåˆ™åœ¨è¯¥ä½è¿”å›1</span><br><span class="line"><span class="comment"># æŒ‰ä½å¼‚æˆ–</span></span><br><span class="line">ä¸¤ä¸ªæ“ä½œæ•°çš„å¯¹åº”ä½åªæœ‰ä¸€ä¸ªä¸º1ï¼Œåˆ™åœ¨è¯¥ä½è¿”å›1</span><br><span class="line"><span class="comment"># æŒ‰ä½å–å</span></span><br><span class="line">é‡0åˆ™è¿”å›1ï¼Œåä¹‹äº¦ç„¶</span><br><span class="line"><span class="comment"># åº”ç”¨</span></span><br><span class="line">1ã€é€šè¿‡ä½è¿ç®—ç¬¦å–æ•´</span><br><span class="line">3.14|0 ; // 3</span><br></pre></td></tr></table></figure><h3 id="DOM-æ ‘å’Œæ¸²æŸ“è¿‡ç¨‹"><a href="#DOM-æ ‘å’Œæ¸²æŸ“è¿‡ç¨‹" class="headerlink" title="DOM æ ‘å’Œæ¸²æŸ“è¿‡ç¨‹"></a>DOM æ ‘å’Œæ¸²æŸ“è¿‡ç¨‹</h3><p>DOMï¼ˆDocument Object Modelâ€”â€”æ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼‰æ˜¯ç”¨æ¥å‘ˆç°ä»¥åŠä¸ä»»æ„ HTML æˆ– XMLæ–‡æ¡£äº¤äº’çš„APIã€‚DOM æ˜¯è½½å…¥åˆ°æµè§ˆå™¨ä¸­çš„æ–‡æ¡£æ¨¡å‹ï¼Œä»¥èŠ‚ç‚¹æ ‘çš„å½¢å¼æ¥è¡¨ç°æ–‡æ¡£ï¼Œæ¯ä¸ªèŠ‚ç‚¹ä»£è¡¨æ–‡æ¡£çš„æ„æˆéƒ¨åˆ†</p><p>ç­‰å¾…èµ„æºåŠ è½½æ—¶é—´å’Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹çš„æµè§ˆå™¨å•çº¿ç¨‹æ‰§è¡Œæ˜¯å½±å“Webæ€§èƒ½çš„ä¸¤å¤§ä¸»è¦åŸå› ã€‚</p><p>é€šè¿‡äº†è§£æµè§ˆå™¨å•çº¿ç¨‹çš„æœ¬è´¨ä¸æœ€å°åŒ–ä¸»çº¿ç¨‹çš„è´£ä»»å¯ä»¥ä¼˜åŒ–Webæ€§èƒ½ï¼Œæ¥ç¡®ä¿æ¸²æŸ“çš„æµç•…å’Œäº¤äº’å“åº”çš„åŠæ—¶ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># DNSæŸ¥æ‰¾</span></span><br><span class="line">å¯¹äºä¸€ä¸ªwebé¡µé¢æ¥è¯´å¯¼èˆªçš„ç¬¬ä¸€æ­¥æ˜¯è¦å»å¯»æ‰¾é¡µé¢èµ„æºçš„ä½ç½®ã€‚å¦‚æœå¯¼èˆªåˆ°https://example.com, HTMLé¡µé¢ è¢«å®šä¸ºåˆ°IPåœ°å€ä¸º 93.184.216.34 çš„æœåŠ¡å™¨ã€‚å¦‚æœä»¥å‰æ²¡æœ‰è®¿é—®è¿‡è¿™ä¸ªç½‘ç«™ï¼Œå°±éœ€è¦è¿›è¡ŒDNSæŸ¥æ‰¾ã€‚</span><br><span class="line"><span class="comment"># TCPæ¡æ‰‹</span></span><br><span class="line">TCPçš„â€ä¸‰æ¬¡æ¡æ‰‹â€œæŠ€æœ¯ç»å¸¸è¢«ç§°ä¸ºâ€SYN-SYN-ACKâ€œâ€”æ›´ç¡®åˆ‡çš„è¯´æ˜¯ SYN, SYN-ACK, ACKâ€”å› ä¸ºé€šè¿‡TCPé¦–å…ˆå‘é€äº†ä¸‰ä¸ªæ¶ˆæ¯è¿›è¡Œåå•†ï¼Œå¼€å§‹ä¸€ä¸ªTCPä¼šè¯åœ¨ä¸¤å°ç”µè„‘ä¹‹é—´ã€‚ æ˜¯çš„ï¼Œè¿™æ„å‘³ç€æ¯å°æœåŠ¡å™¨ä¹‹é—´è¿˜è¦æ¥å›å‘é€ä¸‰æ¡æ¶ˆæ¯ï¼Œè€Œè¯·æ±‚å°šæœªå‘å‡ºã€‚</span><br><span class="line"><span class="comment"># TLSåå•†</span></span><br><span class="line">ä¸ºäº†åœ¨HTTPSä¸Šå»ºç«‹å®‰å…¨è¿æ¥ï¼Œå¦ä¸€ç§æ¡æ‰‹æ˜¯å¿…é¡»çš„ã€‚æ›´ç¡®åˆ‡çš„è¯´æ˜¯TLSåå•† ï¼Œå®ƒå†³å®šäº†ä»€ä¹ˆå¯†ç å°†ä¼šè¢«ç”¨æ¥åŠ å¯†é€šä¿¡ï¼ŒéªŒè¯æœåŠ¡å™¨ï¼Œåœ¨è¿›è¡ŒçœŸå®çš„æ•°æ®ä¼ è¾“ä¹‹å‰å»ºç«‹å®‰å…¨è¿æ¥ã€‚åœ¨å‘é€çœŸæ­£çš„è¯·æ±‚å†…å®¹ä¹‹å‰è¿˜éœ€è¦ä¸‰æ¬¡å¾€è¿”æœåŠ¡å™¨ã€‚</span><br><span class="line"><span class="comment"># å“åº”</span></span><br><span class="line">ä¸€æ—¦æˆ‘ä»¬å»ºç«‹äº†åˆ°webæœåŠ¡å™¨çš„è¿æ¥ï¼Œæµè§ˆå™¨å°±ä»£è¡¨ç”¨æˆ·å‘é€ä¸€ä¸ªåˆå§‹çš„HTTP GETè¯·æ±‚ï¼Œå¯¹äºç½‘ç«™æ¥è¯´ï¼Œè¿™ä¸ªè¯·æ±‚é€šå¸¸æ˜¯ä¸€ä¸ªHTMLæ–‡ä»¶ã€‚ ä¸€æ—¦æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ï¼Œå®ƒå°†ä½¿ç”¨ç›¸å…³çš„å“åº”å¤´å’ŒHTMLçš„å†…å®¹è¿›è¡Œå›å¤ã€‚</span><br><span class="line"><span class="comment"># tcpæ…¢å¼€å§‹/14kbè§„åˆ™</span></span><br><span class="line">ç¬¬ä¸€ä¸ªå“åº”åŒ…æ˜¯14kbå¤§å°ã€‚è¿™æ˜¯æ…¢å¼€å§‹çš„ä¸€éƒ¨åˆ†ï¼Œæ…¢å¼€å§‹æ˜¯ä¸€ç§å‡è¡¡ç½‘ç»œè¿æ¥é€Ÿåº¦çš„ç®—æ³•ã€‚æ…¢å¼€å§‹é€æ¸å¢åŠ å‘é€æ•°æ®çš„æ•°é‡ç›´åˆ°è¾¾åˆ°ç½‘ç»œçš„æœ€å¤§å¸¦å®½ã€‚</span><br><span class="line"><span class="comment"># æ‹¥å¡æ§åˆ¶</span></span><br><span class="line">å½“æœåŠ¡å™¨ç”¨TCPåŒ…æ¥å‘é€æ•°æ®æ—¶ï¼Œå®¢æˆ·ç«¯é€šè¿‡è¿”å›ç¡®è®¤å¸§æ¥ç¡®è®¤ä¼ è¾“ã€‚ç”±äºç¡¬ä»¶å’Œç½‘ç»œæ¡ä»¶ï¼Œè¿æ¥çš„å®¹é‡æ˜¯æœ‰é™çš„ã€‚ å¦‚æœæœåŠ¡å™¨å¤ªå¿«åœ°å‘é€å¤ªå¤šçš„åŒ…ï¼Œå®ƒä»¬å¯èƒ½ä¼šè¢«ä¸¢å¼ƒã€‚æ„å‘³ç€ï¼Œå°†ä¸ä¼šæœ‰ç¡®è®¤å¸§çš„è¿”å›ã€‚æœåŠ¡å™¨æŠŠå®ƒä»¬å½“åšç¡®è®¤å¸§ä¸¢å¤±ã€‚æ‹¥å¡æ§åˆ¶ç®—æ³•ä½¿ç”¨è¿™ä¸ªå‘é€åŒ…å’Œç¡®è®¤å¸§æµæ¥ç¡®å®šå‘é€é€Ÿç‡ã€‚</span><br><span class="line"><span class="comment"># è§£æ</span></span><br><span class="line">ä¸€æ—¦æµè§ˆå™¨æ”¶åˆ°æ•°æ®çš„ç¬¬ä¸€å—ï¼Œå®ƒå°±å¯ä»¥å¼€å§‹è§£ææ”¶åˆ°çš„ä¿¡æ¯ã€‚</span><br><span class="line">â€œæ¨æµ‹æ€§è§£æâ€ï¼Œâ€œè§£æâ€æ˜¯æµè§ˆå™¨å°†é€šè¿‡ç½‘ç»œæ¥æ”¶çš„æ•°æ®è½¬æ¢ä¸ºDOMå’ŒCSSOMçš„æ­¥éª¤ï¼Œé€šè¿‡æ¸²æŸ“å™¨æŠŠDOMå’ŒCSSOMåœ¨å±å¹•ä¸Šç»˜åˆ¶æˆé¡µé¢ã€‚</span><br><span class="line">å³ä½¿è¯·æ±‚é¡µé¢çš„HTMLå¤§äºåˆå§‹çš„14KBæ•°æ®åŒ…ï¼Œæµè§ˆå™¨ä¹Ÿå°†å¼€å§‹è§£æå¹¶å°è¯•æ ¹æ®å…¶æ‹¥æœ‰çš„æ•°æ®è¿›è¡Œæ¸²æŸ“ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨å‰14Kbä¸­åŒ…å«æµè§ˆå™¨å¼€å§‹æ¸²æŸ“é¡µé¢æ‰€éœ€çš„æ‰€æœ‰å†…å®¹ï¼Œæˆ–è€…è‡³å°‘åŒ…å«é¡µé¢æ¨¡æ¿ï¼ˆç¬¬ä¸€æ¬¡æ¸²æŸ“æ‰€éœ€çš„CSSå’ŒHTMLï¼‰å¯¹äºwebæ€§èƒ½ä¼˜åŒ–æ¥è¯´æ˜¯é‡è¦çš„ã€‚ä½†æ˜¯åœ¨æ¸²æŸ“åˆ°å±å¹•ä¸Šé¢ä¹‹å‰ï¼ŒHTMLã€CSSã€JavaScriptå¿…é¡»è¢«è§£æå®Œæˆã€‚</span><br><span class="line"><span class="comment"># æ„å»ºDOMæ ‘</span></span><br><span class="line">ç¬¬ä¸€æ­¥æ˜¯å¤„ç†HTMLæ ‡è®°å¹¶æ„é€ DOMæ ‘ã€‚HTMLè§£ææ¶‰åŠåˆ° tokenization å’Œæ ‘çš„æ„é€ ã€‚HTMLæ ‡è®°åŒ…æ‹¬å¼€å§‹å’Œç»“æŸæ ‡è®°ï¼Œä»¥åŠå±æ€§åå’Œå€¼ã€‚ å¦‚æœæ–‡æ¡£æ ¼å¼è‰¯å¥½ï¼Œåˆ™è§£æå®ƒä¼šç®€å•è€Œå¿«é€Ÿã€‚è§£æå™¨å°†æ ‡è®°åŒ–çš„è¾“å…¥è§£æåˆ°æ–‡æ¡£ä¸­ï¼Œæ„å»ºæ–‡æ¡£æ ‘ã€‚</span><br><span class="line">å½“è§£æå™¨å‘ç°éé˜»å¡èµ„æºï¼Œä¾‹å¦‚ä¸€å¼ å›¾ç‰‡ï¼Œæµè§ˆå™¨ä¼šè¯·æ±‚è¿™äº›èµ„æºå¹¶ä¸”ç»§ç»­è§£æã€‚å½“é‡åˆ°ä¸€ä¸ªCSSæ–‡ä»¶æ—¶ï¼Œè§£æä¹Ÿå¯ä»¥ç»§ç»­è¿›è¡Œï¼Œä½†æ˜¯å¯¹äº&lt;script&gt;æ ‡ç­¾ï¼ˆç‰¹åˆ«æ˜¯æ²¡æœ‰ async æˆ–è€… defer å±æ€§ï¼‰ä¼šé˜»å¡æ¸²æŸ“å¹¶åœæ­¢HTMLçš„è§£æã€‚å°½ç®¡æµè§ˆå™¨çš„é¢„åŠ è½½æ‰«æå™¨åŠ é€Ÿäº†è¿™ä¸ªè¿‡ç¨‹ï¼Œä½†è¿‡å¤šçš„è„šæœ¬ä»ç„¶æ˜¯ä¸€ä¸ªé‡è¦çš„ç“¶é¢ˆã€‚</span><br><span class="line"><span class="comment"># é¢„åŠ è½½æ‰«æå™¨</span></span><br><span class="line"><span class="comment"># æ„å»ºcssomæ ‘</span></span><br><span class="line">DOMå’ŒCSSOMæ˜¯ä¸¤æ£µæ ‘. å®ƒä»¬æ˜¯ç‹¬ç«‹çš„æ•°æ®ç»“æ„ã€‚æµè§ˆå™¨å°†CSSè§„åˆ™è½¬æ¢ä¸ºå¯ä»¥ç†è§£å’Œä½¿ç”¨çš„æ ·å¼æ˜ å°„ã€‚æµè§ˆå™¨éå†CSSä¸­çš„æ¯ä¸ªè§„åˆ™é›†ï¼Œæ ¹æ®CSSé€‰æ‹©å™¨åˆ›å»ºå…·æœ‰çˆ¶ã€å­å’Œå…„å¼Ÿå…³ç³»çš„èŠ‚ç‚¹æ ‘ã€‚</span><br><span class="line"><span class="comment"># javascriptç¼–è¯‘</span></span><br><span class="line">å½“CSSè¢«è§£æå¹¶åˆ›å»ºCSSOMæ—¶ï¼Œå…¶ä»–èµ„æºï¼ŒåŒ…æ‹¬JavaScriptæ–‡ä»¶æ­£åœ¨ä¸‹è½½ï¼ˆå¤šäºäº†preload scannerï¼‰ã€‚JavaScriptè¢«è§£é‡Šã€ç¼–è¯‘ã€è§£æå’Œæ‰§è¡Œã€‚è„šæœ¬è¢«è§£æä¸ºæŠ½è±¡è¯­æ³•æ ‘ã€‚ä¸€äº›æµè§ˆå™¨å¼•æ“ä½¿ç”¨â€Abstract Syntax Treeâ€œå¹¶å°†å…¶ä¼ é€’åˆ°è§£é‡Šå™¨ä¸­ï¼Œè¾“å‡ºåœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œçš„å­—èŠ‚ç ã€‚è¿™å°±æ˜¯æ‰€è°“çš„JavaScriptç¼–è¯‘ã€‚</span><br><span class="line"><span class="comment"># æ¸²æŸ“</span></span><br><span class="line">æ¸²æŸ“æ­¥éª¤åŒ…æ‹¬æ ·å¼ã€å¸ƒå±€ã€ç»˜åˆ¶ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹è¿˜åŒ…æ‹¬åˆæˆã€‚</span><br><span class="line">åœ¨è§£ææ­¥éª¤ä¸­åˆ›å»ºçš„CSSOMæ ‘å’ŒDOMæ ‘ç»„åˆæˆä¸€ä¸ªRenderæ ‘ï¼Œç„¶åç”¨äºè®¡ç®—æ¯ä¸ªå¯è§å…ƒç´ çš„å¸ƒå±€ï¼Œç„¶åå°†å…¶ç»˜åˆ¶åˆ°å±å¹•ä¸Šã€‚</span><br><span class="line"></span><br><span class="line">çŸ¥è¯†ç‚¹ï¼š</span><br><span class="line">Layout</span><br><span class="line">aã€å›æµ</span><br><span class="line">å›æµæ˜¯å¯¹é¡µé¢çš„ä»»ä½•éƒ¨åˆ†æˆ–æ•´ä¸ªæ–‡æ¡£çš„ä»»ä½•åç»­å¤§å°å’Œä½ç½®çš„ç¡®å®šã€‚</span><br><span class="line">bã€é‡ç»˜</span><br></pre></td></tr></table></figure><h3 id="new-ä¸æ„é€ å‡½æ•°-instanceof-ä¸å®ä¾‹"><a href="#new-ä¸æ„é€ å‡½æ•°-instanceof-ä¸å®ä¾‹" class="headerlink" title="new ä¸æ„é€ å‡½æ•°, instanceof ä¸å®ä¾‹"></a>new ä¸æ„é€ å‡½æ•°, instanceof ä¸å®ä¾‹</h3><p>new è¿ç®—ç¬¦åˆ›å»ºä¸€ä¸ªç”¨æˆ·å®šä¹‰çš„å¯¹è±¡ç±»å‹çš„å®ä¾‹æˆ–å…·æœ‰æ„é€ å‡½æ•°çš„å†…ç½®å¯¹è±¡çš„å®ä¾‹ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#  new å…³é”®å­—ä¼šè¿›è¡Œå¦‚ä¸‹çš„æ“ä½œï¼š</span></span><br><span class="line"></span><br><span class="line">1ã€åˆ›å»ºä¸€ä¸ªç©ºçš„ç®€å•JavaScriptå¯¹è±¡ï¼ˆå³&#123;&#125;ï¼‰ï¼›</span><br><span class="line">2ã€é“¾æ¥è¯¥å¯¹è±¡ï¼ˆè®¾ç½®è¯¥å¯¹è±¡çš„constructorï¼‰åˆ°å¦ä¸€ä¸ªå¯¹è±¡ ï¼›</span><br><span class="line">3ã€å°†æ­¥éª¤1æ–°åˆ›å»ºçš„å¯¹è±¡ä½œä¸ºthisçš„ä¸Šä¸‹æ–‡ ï¼›</span><br><span class="line">4ã€å¦‚æœè¯¥å‡½æ•°æ²¡æœ‰è¿”å›å¯¹è±¡ï¼Œåˆ™è¿”å›thisã€‚</span><br><span class="line"></span><br><span class="line"><span class="comment"># å½“ä»£ç  new Foo(...) æ‰§è¡Œæ—¶ï¼Œä¼šå‘ç”Ÿä»¥ä¸‹äº‹æƒ…ï¼š</span></span><br><span class="line"></span><br><span class="line">1ã€ä¸€ä¸ªç»§æ‰¿è‡ª Foo.prototype çš„æ–°å¯¹è±¡è¢«åˆ›å»ºã€‚</span><br><span class="line">2ã€ä½¿ç”¨æŒ‡å®šçš„å‚æ•°è°ƒç”¨æ„é€ å‡½æ•° Fooï¼Œå¹¶å°† this ç»‘å®šåˆ°æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚new Foo ç­‰åŒäº new Foo()ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰æŒ‡å®šå‚æ•°åˆ—è¡¨ï¼ŒFoo ä¸å¸¦ä»»ä½•å‚æ•°è°ƒç”¨çš„æƒ…å†µã€‚</span><br><span class="line">3ã€ç”±æ„é€ å‡½æ•°è¿”å›çš„å¯¹è±¡å°±æ˜¯ new è¡¨è¾¾å¼çš„ç»“æœã€‚å¦‚æœæ„é€ å‡½æ•°æ²¡æœ‰æ˜¾å¼è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™ä½¿ç”¨æ­¥éª¤1åˆ›å»ºçš„å¯¹è±¡ã€‚ï¼ˆä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ„é€ å‡½æ•°ä¸è¿”å›å€¼ï¼Œä½†æ˜¯ç”¨æˆ·å¯ä»¥é€‰æ‹©ä¸»åŠ¨è¿”å›å¯¹è±¡ï¼Œæ¥è¦†ç›–æ­£å¸¸çš„å¯¹è±¡åˆ›å»ºæ­¥éª¤ï¼‰</span><br></pre></td></tr></table></figure></p><h3 id="åŸå‹ç»§æ‰¿ä¸åŸå‹é“¾"><a href="#åŸå‹ç»§æ‰¿ä¸åŸå‹é“¾" class="headerlink" title="åŸå‹ç»§æ‰¿ä¸åŸå‹é“¾"></a>åŸå‹ç»§æ‰¿ä¸åŸå‹é“¾</h3><p>æœ‰äº›äººè®¤ä¸ºJavaScriptå¹¶ä¸æ˜¯çœŸæ­£çš„é¢å‘å¯¹è±¡è¯­è¨€ï¼Œåœ¨ç»å…¸çš„é¢å‘å¯¹è±¡è¯­è¨€ä¸­ï¼Œæ‚¨å¯èƒ½å€¾å‘äºå®šä¹‰ç±»å¯¹è±¡,ç„¶åæ‚¨å¯ä»¥ç®€å•åœ°å®šä¹‰å“ªäº›ç±»ç»§æ‰¿å“ªäº›ç±»ï¼ŒJavaScriptä½¿ç”¨äº†å¦ä¸€å¥—å®ç°æ–¹å¼ï¼Œç»§æ‰¿çš„å¯¹è±¡å‡½æ•°å¹¶ä¸æ˜¯é€šè¿‡å¤åˆ¶è€Œæ¥ï¼Œè€Œæ˜¯é€šè¿‡åŸå‹é“¾ç»§æ‰¿ï¼ˆåœ¨ ES2015/ES6 ä¸­å¼•å…¥äº† class å…³é”®å­—ï¼Œä½†é‚£åªæ˜¯è¯­æ³•ç³–ï¼ŒJavaScript ä»ç„¶æ˜¯åŸºäºåŸå‹çš„ï¼‰</p><p><strong>å½“è°ˆåˆ°ç»§æ‰¿æ—¶ï¼ŒJavaScript åªæœ‰ä¸€ç§ç»“æ„ï¼šå¯¹è±¡ã€‚æ¯ä¸ªå®ä¾‹å¯¹è±¡ï¼ˆ object ï¼‰éƒ½æœ‰ä¸€ä¸ªç§æœ‰å±æ€§ï¼ˆç§°ä¹‹ä¸º `</strong>proto__<code>ï¼‰æŒ‡å‘å®ƒçš„æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ï¼ˆprototype ï¼‰ã€‚è¯¥åŸå‹å¯¹è±¡ä¹Ÿæœ‰ä¸€ä¸ªè‡ªå·±çš„åŸå‹å¯¹è±¡(</code><strong>proto</strong>` ) ï¼Œå±‚å±‚å‘ä¸Šç›´åˆ°ä¸€ä¸ªå¯¹è±¡çš„åŸå‹å¯¹è±¡ä¸º nullã€‚æ ¹æ®å®šä¹‰ï¼Œnull æ²¡æœ‰åŸå‹ï¼Œå¹¶ä½œä¸ºè¿™ä¸ªåŸå‹é“¾ä¸­çš„æœ€åä¸€ä¸ªç¯èŠ‚ã€‚__</p><p>å‡ ä¹æ‰€æœ‰ JavaScript ä¸­çš„å¯¹è±¡éƒ½æ˜¯ä½äºåŸå‹é“¾é¡¶ç«¯çš„ Object çš„å®ä¾‹ã€‚</p><p><strong>JavaScript å¯¹è±¡æœ‰ä¸€ä¸ªæŒ‡å‘ä¸€ä¸ªåŸå‹å¯¹è±¡çš„é“¾ã€‚å½“è¯•å›¾è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œå®ƒä¸ä»…ä»…åœ¨è¯¥å¯¹è±¡ä¸Šæœå¯»ï¼Œè¿˜ä¼šæœå¯»è¯¥å¯¹è±¡çš„åŸå‹ï¼Œä»¥åŠè¯¥å¯¹è±¡çš„åŸå‹çš„åŸå‹ï¼Œä¾æ¬¡å±‚å±‚å‘ä¸Šæœç´¢ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªåå­—åŒ¹é…çš„å±æ€§æˆ–åˆ°è¾¾åŸå‹é“¾çš„æœ«å°¾ã€‚</strong></p><p>Object.prototype å±æ€§è¡¨ç¤º Object çš„åŸå‹å¯¹è±¡ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åŸå‹é“¾ç»§æ‰¿</span></span><br><span class="line"><span class="keyword">function</span> Person(first, last, age, gender, interests) &#123;</span><br><span class="line">  this.name = &#123;</span><br><span class="line">    first,</span><br><span class="line">    last</span><br><span class="line">  &#125;;</span><br><span class="line">  this.age = age;</span><br><span class="line">  this.gender = gender;</span><br><span class="line">  this.interests = interests;</span><br><span class="line">&#125;;</span><br><span class="line">Person.prototype.greeting = <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">  // <span class="keyword">do</span> something</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment"># é€šè¿‡callå’Œapplyç»§æ‰¿</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> Teacher(first, last, age, gender, interests, subject) &#123;</span><br><span class="line">  Person.call(this, first, last, age, gender, interests);</span><br><span class="line"></span><br><span class="line">  this.subject = subject;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> <strong>æ³¨ï¼šæ¯ä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼ˆFunctionï¼‰éƒ½æœ‰ä¸€ä¸ªprototypeå±æ€§ï¼Œå¹¶ä¸”åªæœ‰å‡½æ•°å¯¹è±¡æœ‰prototypeå±æ€§ï¼Œå› ä¸ºprototypeæœ¬èº«å°±æ˜¯å®šä¹‰åœ¨Functionå¯¹è±¡ä¸‹çš„å±æ€§ã€‚å½“æˆ‘ä»¬è¾“å…¥ç±»ä¼¼var person1=new Person(â€¦)æ¥æ„é€ å¯¹è±¡æ—¶ï¼ŒJavaScriptå®é™…ä¸Šå‚è€ƒçš„æ˜¯Person.prototypeæŒ‡å‘çš„å¯¹è±¡æ¥ç”Ÿæˆperson1ã€‚å¦ä¸€æ–¹é¢ï¼ŒPerson()å‡½æ•°æ˜¯Person.prototypeçš„æ„é€ å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´Person===Person.prototype.constructorï¼ˆä¸ä¿¡çš„è¯å¯ä»¥è¯•è¯•ï¼‰ã€‚åœ¨å®šä¹‰æ–°çš„æ„é€ å‡½æ•°Teacheræ—¶ï¼Œæˆ‘ä»¬é€šè¿‡function.callæ¥è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œä½†æ˜¯è¿™æ ·æ— æ³•è‡ªåŠ¨æŒ‡å®šTeacher.prototypeçš„å€¼ï¼Œè¿™æ ·Teacher.prototypeå°±åªèƒ½åŒ…å«åœ¨æ„é€ å‡½æ•°é‡Œæ„é€ çš„å±æ€§ï¼Œè€Œæ²¡æœ‰æ–¹æ³•ã€‚å› æ­¤æˆ‘ä»¬åˆ©ç”¨Object.create()æ–¹æ³•å°†Person.prototypeä½œä¸ºTeacher.prototypeçš„åŸå‹å¯¹è±¡ï¼Œå¹¶æ”¹å˜å…¶æ„é€ å™¨æŒ‡å‘ï¼Œä½¿ä¹‹ä¸Teacherå…³è”ã€‚</strong></p><p> <strong><font color="red">*</font> åœ¨åŸå‹é“¾ä¸ŠæŸ¥æ‰¾å±æ€§æ¯”è¾ƒè€—æ—¶ï¼Œå¯¹æ€§èƒ½æœ‰å‰¯ä½œç”¨ï¼Œè¿™åœ¨æ€§èƒ½è¦æ±‚è‹›åˆ»çš„æƒ…å†µä¸‹å¾ˆé‡è¦ã€‚å¦å¤–ï¼Œè¯•å›¾è®¿é—®ä¸å­˜åœ¨çš„å±æ€§æ—¶ä¼šéå†æ•´ä¸ªåŸå‹é“¾ã€‚</strong></p><h3 id="Object-create-å’Œ-Object-assign"><a href="#Object-create-å’Œ-Object-assign" class="headerlink" title="Object.create å’Œ Object.assign"></a>Object.create å’Œ Object.assign</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Object.create()æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œä½¿ç”¨ç°æœ‰çš„å¯¹è±¡æ¥æä¾›æ–°åˆ›å»ºçš„å¯¹è±¡çš„__proto__ï¼ˆåŸå‹å¯¹è±¡ï¼‰ã€‚æ–°å¯¹è±¡çš„åŸå‹å°±æ˜¯è°ƒç”¨ create æ–¹æ³•æ—¶ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼š</span></span><br><span class="line">var a = &#123;a: 1&#125;;</span><br><span class="line">// a ---&gt; Object.prototype ---&gt; null</span><br><span class="line"></span><br><span class="line">var b = Object.create(a);</span><br><span class="line">// b ---&gt; a ---&gt; Object.prototype ---&gt; null</span><br><span class="line">console.log(b.a); // 1 (ç»§æ‰¿è€Œæ¥)</span><br></pre></td></tr></table></figure><h3 id="å·¥å‚å‡½æ•°å’Œç±»"><a href="#å·¥å‚å‡½æ•°å’Œç±»" class="headerlink" title="å·¥å‚å‡½æ•°å’Œç±»"></a>å·¥å‚å‡½æ•°å’Œç±»</h3><h3 id="è®¾è®¡æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼"></a>è®¾è®¡æ¨¡å¼</h3><h3 id="Memoization"><a href="#Memoization" class="headerlink" title="Memoization"></a>Memoization</h3><h3 id="çº¯å‡½æ•°-å‡½æ•°å‰¯ä½œç”¨å’ŒçŠ¶æ€å˜åŒ–"><a href="#çº¯å‡½æ•°-å‡½æ•°å‰¯ä½œç”¨å’ŒçŠ¶æ€å˜åŒ–" class="headerlink" title="çº¯å‡½æ•°, å‡½æ•°å‰¯ä½œç”¨å’ŒçŠ¶æ€å˜åŒ–"></a>çº¯å‡½æ•°, å‡½æ•°å‰¯ä½œç”¨å’ŒçŠ¶æ€å˜åŒ–</h3><h3 id="è€—æ€§èƒ½æ“ä½œå’Œæ—¶é—´å¤æ‚åº¦"><a href="#è€—æ€§èƒ½æ“ä½œå’Œæ—¶é—´å¤æ‚åº¦" class="headerlink" title="è€—æ€§èƒ½æ“ä½œå’Œæ—¶é—´å¤æ‚åº¦"></a>è€—æ€§èƒ½æ“ä½œå’Œæ—¶é—´å¤æ‚åº¦</h3><h3 id="JavaScript-å¼•æ“"><a href="#JavaScript-å¼•æ“" class="headerlink" title="JavaScript å¼•æ“"></a>JavaScript å¼•æ“</h3><h3 id="äºŒè¿›åˆ¶-åè¿›åˆ¶-åå…­è¿›åˆ¶-ç§‘å­¦è®°æ•°æ³•"><a href="#äºŒè¿›åˆ¶-åè¿›åˆ¶-åå…­è¿›åˆ¶-ç§‘å­¦è®°æ•°æ³•" class="headerlink" title="äºŒè¿›åˆ¶, åè¿›åˆ¶, åå…­è¿›åˆ¶, ç§‘å­¦è®°æ•°æ³•"></a>äºŒè¿›åˆ¶, åè¿›åˆ¶, åå…­è¿›åˆ¶, ç§‘å­¦è®°æ•°æ³•</h3><h3 id="åå‡½æ•°-æŸ¯é‡ŒåŒ–-Compose-å’Œ-Pipe"><a href="#åå‡½æ•°-æŸ¯é‡ŒåŒ–-Compose-å’Œ-Pipe" class="headerlink" title="åå‡½æ•°, æŸ¯é‡ŒåŒ–, Compose å’Œ Pipe"></a>åå‡½æ•°, æŸ¯é‡ŒåŒ–, Compose å’Œ Pipe</h3><h3 id="ä»£ç æ•´æ´ä¹‹é“"><a href="#ä»£ç æ•´æ´ä¹‹é“" class="headerlink" title="ä»£ç æ•´æ´ä¹‹é“"></a>ä»£ç æ•´æ´ä¹‹é“</h3><h3 id="promiseæ‰§è¡Œé¡ºåº"><a href="#promiseæ‰§è¡Œé¡ºåº" class="headerlink" title="promiseæ‰§è¡Œé¡ºåº"></a>promiseæ‰§è¡Œé¡ºåº</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(()=&gt;&#123;</span><br><span class="line">    console.log(1)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">setTimeout(()=&gt;&#123;</span><br><span class="line">    console.log(2)</span><br><span class="line">&#125;, 500)</span><br><span class="line"></span><br><span class="line">setTimeout(()=&gt;&#123;</span><br><span class="line">    console.log(2)</span><br><span class="line">&#125;, 1000)</span><br><span class="line"></span><br><span class="line">new Promise((resolve, reject)=&gt;&#123;</span><br><span class="line">    resolve(3)</span><br><span class="line">&#125;).<span class="keyword">then</span>(res=&gt;&#123;</span><br><span class="line">    console.log(res)</span><br><span class="line">    <span class="built_in">return</span> 4</span><br><span class="line">&#125;).<span class="keyword">then</span>(res=&gt;&#123;</span><br><span class="line">    console.log(res)</span><br><span class="line">&#125;)</span><br><span class="line">new Promise((resolve, reject)=&gt;&#123;</span><br><span class="line">    resolve(5)</span><br><span class="line">&#125;).<span class="keyword">then</span>(res=&gt;&#123;</span><br><span class="line">    console.log(res)</span><br><span class="line">    <span class="built_in">return</span> 6</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;è°ƒç”¨å †æ ˆ&quot;&gt;&lt;a href=&quot;#è°ƒç”¨å †æ ˆ&quot; class=&quot;headerlink&quot; title=&quot;è°ƒç”¨å †æ ˆ&quot;&gt;&lt;/a&gt;è°ƒç”¨å †æ ˆ&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre</summary>
      
    
    
    
    <category term="å‰ç«¯" scheme="https://gofugui.github.io/categories/å‰ç«¯/"/>
    
    
    <category term="JavaScript" scheme="https://gofugui.github.io/tags/JavaScript/"/>
    
    <category term="Web" scheme="https://gofugui.github.io/tags/Web/"/>
    
    <category term="ES6" scheme="https://gofugui.github.io/tags/ES6/"/>
    
    <category term="html" scheme="https://gofugui.github.io/tags/html/"/>
    
  </entry>
  
  <entry>
    <title>ä¸­é«˜çº§å‰ç«¯é¡»æ³¨æ„çš„40æ¡ç§»åŠ¨ç«¯H5å‘ä½æŒ‡å—</title>
    <link href="https://gofugui.github.io/2021/03/30/%E4%B8%AD%E9%AB%98%E7%BA%A7%E5%89%8D%E7%AB%AF%E9%A1%BB%E6%B3%A8%E6%84%8F%E7%9A%8440%E6%9D%A1%E7%A7%BB%E5%8A%A8%E7%AB%AFH5%E5%9D%91%E4%BD%8D%E6%8C%87%E5%8D%97/"/>
    <id>https://gofugui.github.io/2021/03/30/%E4%B8%AD%E9%AB%98%E7%BA%A7%E5%89%8D%E7%AB%AF%E9%A1%BB%E6%B3%A8%E6%84%8F%E7%9A%8440%E6%9D%A1%E7%A7%BB%E5%8A%A8%E7%AB%AFH5%E5%9D%91%E4%BD%8D%E6%8C%87%E5%8D%97/</id>
    <published>2021-03-30T08:50:07.935Z</published>
    <updated>2021-03-31T05:06:27.636Z</updated>
    
    <content type="html"><![CDATA[<p><code>ç§»åŠ¨ç«¯å¼€å‘åœ¨å‰ç«¯é‡Œåƒç¥ä¸€æ ·åœ°å­˜åœ¨ï¼Œä¸æ˜¯è¯´å®ƒå¤šéš¾è€Œæ˜¯è¯´å®ƒå‘ä½å®åœ¨å¤ªå¤šäº†ï¼Œæ€æ ·å¡«éƒ½å¡«ä¸å®Œã€‚Androidå’ŒiOSå„æ˜¾ç¥é€šï¼ŒAndroidçš„ç³»ç»Ÿç‰ˆæœ¬å’Œå±å¹•åˆ†è¾¨ç‡å¤šå¾—éš¾ä»¥ä¸€æ‹›å…¼å®¹ï¼ŒiOSçš„é¡½å›ºæ ‡å‡†å’ŒæœªçŸ¥ç‰¹æ€§å¤šå¾—éš¾ä»¥å¿«é€ŸæŒæ¡ã€‚</code></p><p><code>ä¸‰å¹´åŠæ²‰æ·€é€šè¿‡æœ¬æ–‡è®°å½•ä¸‹æ‰€é‡åˆ°çš„å‘ä½ï¼Œæˆ–è®¸æœ‰äº›å‘ä½è¿˜æœªé‡åˆ°ï¼Œä½†æœ¬æ–‡è®°å½•çš„ã€Œ40æ¡å‘ä½ã€ç»å¯¹èƒ½è®©åŒå­¦ä»¬å°‘èµ°å¾ˆå¤šå¼¯è·¯ï¼Œç‰¹åˆ«æ˜¯å‰ç«¯å°ç™½ã€‚ä¸ºäº†å‡å°‘åºŸè¯æé«˜æœ¬æ–‡è´¨é‡ï¼Œå¯¹ä»¥ä¸‹å†…å®¹åšä¸€äº›çº¦å®šã€‚</code></p><h2 id="HTMLæ–¹å‘"><a href="#HTMLæ–¹å‘" class="headerlink" title="HTMLæ–¹å‘"></a>HTMLæ–¹å‘</h2><h4 id="è°ƒç”¨ç³»ç»ŸåŠŸèƒ½"><a href="#è°ƒç”¨ç³»ç»ŸåŠŸèƒ½" class="headerlink" title="è°ƒç”¨ç³»ç»ŸåŠŸèƒ½"></a>è°ƒç”¨ç³»ç»ŸåŠŸèƒ½</h4><p>ä½¿ç”¨<code>&lt;a&gt;</code>èƒ½å¿«é€Ÿè°ƒç”¨ç§»åŠ¨è®¾å¤‡çš„<code>ç”µè¯/çŸ­ä¿¡/é‚®ä»¶</code>ä¸‰å¤§é€šè®¯åŠŸèƒ½ï¼Œä½¿ç”¨<code>&lt;input&gt;</code>èƒ½å¿«é€Ÿè°ƒç”¨ç§»åŠ¨è®¾å¤‡çš„çš„å›¾åº“/æ–‡ä»¶ã€‚</p><p>è¿™äº›åŠŸèƒ½æ–¹ä¾¿äº†é¡µé¢ä¸ç³»ç»Ÿçš„äº¤äº’ï¼Œå…³é”®åœ¨äºè°ƒç”¨æ ¼å¼ä¸€å®šè¦å‡†ç¡®ï¼Œå¦åˆ™ä¼šè¢«ç§»åŠ¨ç«¯æµè§ˆå™¨å¿½ç•¥ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- æ‹¨æ‰“ç”µè¯ --&gt;</span><br><span class="line">&lt;a href=<span class="string">"tel:10086"</span>&gt;æ‹¨æ‰“ç”µè¯ç»™10086å°å§å§&lt;/a&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- å‘é€çŸ­ä¿¡ --&gt;</span><br><span class="line">&lt;a href=<span class="string">"sms:10086"</span>&gt;å‘é€çŸ­ä¿¡ç»™10086å°å§å§&lt;/a&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- å‘é€é‚®ä»¶ --&gt;</span><br><span class="line">&lt;a href=<span class="string">"mailto:young.joway@aliyun.com"</span>&gt;å‘é€é‚®ä»¶ç»™JowayYoung&lt;/a&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- é€‰æ‹©ç…§ç‰‡æˆ–æ‹æ‘„ç…§ç‰‡ --&gt;</span><br><span class="line">&lt;input <span class="built_in">type</span>=<span class="string">"file"</span> accept=<span class="string">"image/*"</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- é€‰æ‹©è§†é¢‘æˆ–æ‹æ‘„è§†é¢‘ --&gt;</span><br><span class="line">&lt;input <span class="built_in">type</span>=<span class="string">"file"</span> accept=<span class="string">"video/*"</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- å¤šé€‰æ–‡ä»¶ --&gt;</span><br><span class="line">&lt;input <span class="built_in">type</span>=<span class="string">"file"</span> multiple&gt;</span><br></pre></td></tr></table></figure><h4 id="å¿½ç•¥è‡ªåŠ¨è¯†åˆ«"><a href="#å¿½ç•¥è‡ªåŠ¨è¯†åˆ«" class="headerlink" title="å¿½ç•¥è‡ªåŠ¨è¯†åˆ«"></a>å¿½ç•¥è‡ªåŠ¨è¯†åˆ«</h4><p>æœ‰äº›ç§»åŠ¨ç«¯æµè§ˆå™¨ä¼šè‡ªåŠ¨å°†æ•°å­—å­—æ¯ç¬¦å·è¯†åˆ«ä¸ºç”µè¯/é‚®ç®±å¹¶å°†å…¶æ¸²æŸ“æˆä¸Šè¿°ã€Œè°ƒç”¨ç³»ç»ŸåŠŸèƒ½ã€é‡Œçš„<code>&lt;a&gt;</code>ã€‚è™½ç„¶å¾ˆæ–¹ä¾¿å´æœ‰å¯èƒ½è¿èƒŒéœ€æ±‚ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- å¿½ç•¥è‡ªåŠ¨è¯†åˆ«ç”µè¯ --&gt;</span><br><span class="line">&lt;meta name=<span class="string">"format-detection"</span> content=<span class="string">"telephone=no"</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- å¿½ç•¥è‡ªåŠ¨è¯†åˆ«é‚®ç®± --&gt;</span><br><span class="line">&lt;meta name=<span class="string">"format-detection"</span> content=<span class="string">"email=no"</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- å¿½ç•¥è‡ªåŠ¨è¯†åˆ«ç”µè¯å’Œé‚®ç®± --&gt;</span><br><span class="line">&lt;meta name=<span class="string">"format-detection"</span> content=<span class="string">"telephone=no, email=no"</span>&gt;</span><br></pre></td></tr></table></figure><h4 id="å¼¹å‡ºæ•°å­—é”®ç›˜"><a href="#å¼¹å‡ºæ•°å­—é”®ç›˜" class="headerlink" title="å¼¹å‡ºæ•°å­—é”®ç›˜"></a>å¼¹å‡ºæ•°å­—é”®ç›˜</h4><p>ä½¿ç”¨<code>&lt;input type=&quot;tel&quot;&gt;</code>å¼¹èµ·æ•°å­—é”®ç›˜ä¼šå¸¦ä¸Š#å’Œ<em>ï¼Œé€‚åˆè¾“å…¥ç”µè¯ã€‚æ¨èä½¿ç”¨ `&lt;input type=â€numberâ€ pattern=â€\d</em>â€œ&gt;`å¼¹èµ·æ•°å­—é”®ç›˜ï¼Œé€‚åˆè¾“å…¥éªŒè¯ç ç­‰çº¯æ•°å­—æ ¼å¼ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- çº¯æ•°å­—å¸¦<span class="comment">#å’Œ* --&gt;</span></span><br><span class="line">&lt;input <span class="built_in">type</span>=<span class="string">"tel"</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- çº¯æ•°å­— --&gt;</span><br><span class="line">&lt;input <span class="built_in">type</span>=<span class="string">"number"</span> pattern=<span class="string">"\d*"</span>&gt;</span><br></pre></td></tr></table></figure><h4 id="å”¤é†’åŸç”Ÿåº”ç”¨"><a href="#å”¤é†’åŸç”Ÿåº”ç”¨" class="headerlink" title="å”¤é†’åŸç”Ÿåº”ç”¨"></a>å”¤é†’åŸç”Ÿåº”ç”¨</h4><p>é€šè¿‡<code>location.href</code>ä¸åŸç”Ÿåº”ç”¨å»ºç«‹é€šè®¯æ¸ é“ï¼Œè¿™ç§é¡µé¢ä¸å®¢æˆ·ç«¯çš„é€šè®¯æ–¹å¼ç§°ä¸º<code>ã€ŒURL Schemeã€</code>ï¼Œå…¶åŸºæœ¬æ ¼å¼ä¸º<code>scheme://[path][?query]</code>ï¼Œç¬”è€…æ›¾ç»å‘è¡¨è¿‡ã€ŠH5ä¸Appçš„é€šè®¯æ–¹å¼ã€‹è®²è¿°<code>URL Scheme</code>çš„ä½¿ç”¨ã€‚</p><ul><li><code>ã€Œschemeã€</code>ï¼šåº”ç”¨æ ‡è¯†ï¼Œè¡¨ç¤ºåº”ç”¨åœ¨ç³»ç»Ÿé‡Œçš„å”¯ä¸€æ ‡è¯†</li><li><code>ã€Œpathã€</code> ï¼šåº”ç”¨è¡Œä¸ºï¼Œè¡¨ç¤ºåº”ç”¨æŸä¸ªé¡µé¢æˆ–åŠŸèƒ½</li><li><code>ã€Œqueryã€</code>ï¼šåº”ç”¨å‚æ•°ï¼Œè¡¨ç¤ºåº”ç”¨é¡µé¢æˆ–åº”ç”¨åŠŸèƒ½æ‰€éœ€çš„æ¡ä»¶å‚æ•°</li></ul><p><code>URL Scheme</code>ä¸€èˆ¬ç”±å‰ç«¯ä¸å®¢æˆ·ç«¯å…±åŒåå•†ã€‚å”¤é†’åŸç”Ÿåº”ç”¨çš„å‰ææ˜¯å¿…é¡»åœ¨ç§»åŠ¨è®¾å¤‡é‡Œå®‰è£…äº†è¯¥åº”ç”¨ï¼Œæœ‰äº›ç§»åŠ¨ç«¯æµè§ˆå™¨å³ä½¿å®‰è£…äº†è¯¥åº”ç”¨ä¹Ÿæ— æ³•å”¤é†’åŸç”Ÿåº”ç”¨ï¼Œå› ä¸ºå®ƒè®¤ä¸º<code>URL Scheme</code>æ˜¯ä¸€ç§æ½œåœ¨çš„å±é™©è¡Œä¸ºè€Œç¦ç”¨å®ƒï¼ŒåƒSafariå’Œå¾®ä¿¡æµè§ˆå™¨ã€‚è¿˜å¥½å¾®ä¿¡æµè§ˆå™¨å¯å¼€å¯ç™½åå•è®©<code>URL Scheme</code>æœ‰æ•ˆã€‚</p><p>è‹¥åœ¨é¡µé¢å¼•ç”¨ç¬¬ä¸‰æ–¹åŸç”Ÿåº”ç”¨çš„<code>URL Schema</code>ï¼Œå¯é€šè¿‡æŠ“åŒ…ç¬¬ä¸‰æ–¹åŸç”Ÿåº”ç”¨è·å–å…¶<code>URL</code>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- æ‰“å¼€å¾®ä¿¡ --&gt;</span><br><span class="line">&lt;a href=<span class="string">"weixin://"</span>&gt;æ‰“å¼€å¾®ä¿¡&lt;/a&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- æ‰“å¼€æ”¯ä»˜å® --&gt;</span><br><span class="line">&lt;a href=<span class="string">"alipays://"</span>&gt;æ‰“å¼€æ”¯ä»˜å®&lt;/a&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- æ‰“å¼€æ”¯ä»˜å®çš„æ‰«ä¸€æ‰« --&gt;</span><br><span class="line">&lt;a href=<span class="string">"alipays://platformapi/startapp?saId=10000007"</span>&gt;æ‰“å¼€æ”¯ä»˜å®çš„æ‰«ä¸€æ‰«&lt;/a&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- æ‰“å¼€æ”¯ä»˜å®çš„èš‚èšæ£®æ— --&gt;</span><br><span class="line">&lt;a href=<span class="string">"alipays://platformapi/startapp?appId=60000002"</span>&gt;æ‰“å¼€æ”¯ä»˜å®çš„èš‚èšæ£®æ—&lt;/a&gt;</span><br></pre></td></tr></table></figure><h4 id="ç¦æ­¢é¡µé¢ç¼©æ”¾"><a href="#ç¦æ­¢é¡µé¢ç¼©æ”¾" class="headerlink" title="ç¦æ­¢é¡µé¢ç¼©æ”¾"></a>ç¦æ­¢é¡µé¢ç¼©æ”¾</h4><p>åœ¨æ™ºèƒ½æ‰‹æœºçš„æ™®åŠä¸‹ï¼Œå¾ˆå¤šç½‘ç«™éƒ½å…·å¤‡<code>æ¡Œé¢ç«¯</code>å’Œ<code>ç§»åŠ¨ç«¯</code>ä¸¤ç§æµè§ˆç‰ˆæœ¬ï¼Œå› æ­¤æ— éœ€åŒå‡»ç¼©æ”¾æŸ¥çœ‹é¡µé¢ã€‚ç¦æ­¢é¡µé¢ç¼©æ”¾å¯ä¿éšœ<code>ç§»åŠ¨ç«¯</code>æµè§ˆå™¨èƒ½æ— é—æ¼åœ°å±•ç°é¡µé¢æ‰€æœ‰å¸ƒå±€ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta name=<span class="string">"viewport"</span> content=<span class="string">"width=device-width, user-scalable=no, initial-scale=1, minimum-scale=1, maximum-scale=1"</span>&gt;</span><br></pre></td></tr></table></figure><h4 id="ç¦æ­¢é¡µé¢ç¼“å­˜"><a href="#ç¦æ­¢é¡µé¢ç¼“å­˜" class="headerlink" title="ç¦æ­¢é¡µé¢ç¼“å­˜"></a>ç¦æ­¢é¡µé¢ç¼“å­˜</h4><p><code>ã€ŒCache-Controlã€</code>æŒ‡å®šè¯·æ±‚å’Œå“åº”éµå¾ªçš„ç¼“å­˜æœºåˆ¶ï¼Œä¸æƒ³ä½¿ç”¨æµè§ˆå™¨ç¼“å­˜å°±ç¦æ­¢å‘—ï¼</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta http-equiv=<span class="string">"Cache-Control"</span> content=<span class="string">"no-cache"</span>&gt;</span><br></pre></td></tr></table></figure><h4 id="ç¦æ­¢å­—æ¯å¤§å†™"><a href="#ç¦æ­¢å­—æ¯å¤§å†™" class="headerlink" title="ç¦æ­¢å­—æ¯å¤§å†™"></a>ç¦æ­¢å­—æ¯å¤§å†™</h4><p>æœ‰æ—¶åœ¨è¾“å…¥æ¡†é‡Œè¾“å…¥æ–‡æœ¬ä¼šé»˜è®¤å¼€å¯é¦–å­—æ¯å¤§å†™çº æ­£ï¼Œå°±æ˜¯è¾“å…¥é¦–å­—æ¯å°å†™ä¼šè¢«è‡ªåŠ¨çº æ­£æˆå¤§å†™ï¼Œç‰¹ä¹ˆçš„çƒ¦ã€‚ç›´æ¥å£°æ˜<code>autocapitalize=off</code>å…³é—­é¦–å­—æ¯å¤§å†™åŠŸèƒ½å’Œ<code>autocorrect=off</code>å…³é—­çº æ­£åŠŸèƒ½ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input autocapitalize=<span class="string">"off"</span> autocorrect=<span class="string">"off"</span>&gt;</span><br></pre></td></tr></table></figure><h4 id="é’ˆå¯¹Safarié…ç½®"><a href="#é’ˆå¯¹Safarié…ç½®" class="headerlink" title="é’ˆå¯¹Safarié…ç½®"></a>é’ˆå¯¹Safarié…ç½®</h4><p>è´´ä¸€äº›Safariè¾ƒé›¶æ•£ä¸”å°‘ç”¨çš„é…ç½®ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- è®¾ç½®Safariå…¨å±ï¼Œåœ¨iOS7+æ— æ•ˆ --&gt;</span><br><span class="line">&lt;meta name=<span class="string">"apple-mobile-web-app-capable"</span> content=<span class="string">"yes"</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- æ”¹å˜SafariçŠ¶æ€æ æ ·å¼ï¼Œå¯é€‰default/black/black-translucentï¼Œéœ€åœ¨ä¸Šè¿°å…¨å±æ¨¡å¼ä¸‹æ‰æœ‰æ•ˆ --&gt;</span><br><span class="line">&lt;meta name=<span class="string">"apple-mobile-web-app-status-bar-style"</span> content=<span class="string">"black"</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- æ·»åŠ é¡µé¢å¯åŠ¨å ä½å›¾ --&gt;</span><br><span class="line">&lt;link rel=<span class="string">"apple-touch-startup-image"</span> href=<span class="string">"pig.jpg"</span> media=<span class="string">"(device-width: 375px)"</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- ä¿å­˜ç½‘ç«™åˆ°æ¡Œé¢æ—¶æ·»åŠ å›¾æ ‡ --&gt;</span><br><span class="line">&lt;link rel=<span class="string">"apple-touch-icon"</span> sizes=<span class="string">"76x76"</span> href=<span class="string">"pig.jpg"</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- ä¿å­˜ç½‘ç«™åˆ°æ¡Œé¢æ—¶æ·»åŠ å›¾æ ‡ä¸”æ¸…é™¤é»˜è®¤å…‰æ³½ --&gt;</span><br><span class="line">&lt;link rel=<span class="string">"apple-touch-icon-precomposed"</span> href=<span class="string">"pig.jpg"</span>&gt;</span><br></pre></td></tr></table></figure><h4 id="é’ˆå¯¹å…¶ä»–æµè§ˆå™¨é…ç½®"><a href="#é’ˆå¯¹å…¶ä»–æµè§ˆå™¨é…ç½®" class="headerlink" title="é’ˆå¯¹å…¶ä»–æµè§ˆå™¨é…ç½®"></a>é’ˆå¯¹å…¶ä»–æµè§ˆå™¨é…ç½®</h4><p>è´´ä¸€äº›å…¶ä»–æµè§ˆå™¨è¾ƒé›¶æ•£ä¸”å°‘ç”¨çš„é…ç½®ï¼Œä¸»è¦æ˜¯å¸¸ç”¨çš„QQæµè§ˆå™¨ã€UCæµè§ˆå™¨å’Œ360æµè§ˆå™¨ã€‚ä»ç½‘æ˜“MTLçš„æµ‹è¯•æ•°æ®å¾—çŸ¥ï¼Œæ–°ç‰ˆçš„QQæµè§ˆå™¨å’ŒUCæµè§ˆå™¨å·²ä¸æ”¯æŒä»¥ä¸‹<code>&lt;meta&gt;</code>å£°æ˜äº†ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- å¼ºåˆ¶QQæµè§ˆå™¨ç«–å± --&gt;</span><br><span class="line">&lt;meta name=<span class="string">"x5-orientation"</span> content=<span class="string">"portrait"</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- å¼ºåˆ¶QQæµè§ˆå™¨å…¨å± --&gt;</span><br><span class="line">&lt;meta name=<span class="string">"x5-fullscreen"</span> content=<span class="string">"true"</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- å¼€å¯QQæµè§ˆå™¨åº”ç”¨æ¨¡å¼ --&gt;</span><br><span class="line">&lt;meta name=<span class="string">"x5-page-mode"</span> content=<span class="string">"app"</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- å¼ºåˆ¶UCæµè§ˆå™¨ç«–å± --&gt;</span><br><span class="line">&lt;meta name=<span class="string">"screen-orientation"</span> content=<span class="string">"portrait"</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- å¼ºåˆ¶UCæµè§ˆå™¨å…¨å± --&gt;</span><br><span class="line">&lt;meta name=<span class="string">"full-screen"</span> content=<span class="string">"yes"</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- å¼€å¯UCæµè§ˆå™¨åº”ç”¨æ¨¡å¼ --&gt;</span><br><span class="line">&lt;meta name=<span class="string">"browsermode"</span> content=<span class="string">"application"</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- å¼€å¯360æµè§ˆå™¨æé€Ÿæ¨¡å¼ --&gt;</span><br><span class="line">&lt;meta name=<span class="string">"renderer"</span> content=<span class="string">"webkit"</span>&gt;</span><br></pre></td></tr></table></figure><h4 id="è®©-activeæœ‰æ•ˆï¼Œè®©-hoveræ— æ•ˆ"><a href="#è®©-activeæœ‰æ•ˆï¼Œè®©-hoveræ— æ•ˆ" class="headerlink" title="è®©:activeæœ‰æ•ˆï¼Œè®©:hoveræ— æ•ˆ"></a>è®©:activeæœ‰æ•ˆï¼Œè®©:hoveræ— æ•ˆ</h4><p>æœ‰äº›å…ƒç´ çš„:activeå¯èƒ½ä¼šæ— æ•ˆï¼Œè€Œå…ƒç´ çš„:hoveråœ¨ç‚¹å‡»åä¼šä¸€ç›´å¤„äºç‚¹å‡»çŠ¶æ€ï¼Œéœ€ç‚¹å‡»å…¶ä»–ä½ç½®æ‰èƒ½è§£é™¤ç‚¹å‡»çŠ¶æ€ã€‚ç»™<body>æ³¨å†Œä¸€ä¸ªç©ºçš„touchstartäº‹ä»¶å¯å°†ä¸¤ç§çŠ¶æ€åè½¬ã€‚</body></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;body ontouchstart&gt;&lt;/body&gt;</span><br></pre></td></tr></table></figure><h2 id="CSSæ–¹å‘"><a href="#CSSæ–¹å‘" class="headerlink" title="CSSæ–¹å‘"></a>CSSæ–¹å‘</h2><h4 id="è‡ªåŠ¨é€‚åº”å¸ƒå±€"><a href="#è‡ªåŠ¨é€‚åº”å¸ƒå±€" class="headerlink" title="è‡ªåŠ¨é€‚åº”å¸ƒå±€"></a>è‡ªåŠ¨é€‚åº”å¸ƒå±€</h4><p>é’ˆå¯¹ç§»åŠ¨ç«¯ï¼Œç¬”è€…é€šå¸¸ä¼šç»“åˆJSä¾æ®å±å¹•å®½åº¦ä¸è®¾è®¡å›¾å®½åº¦çš„æ¯”ä¾‹åŠ¨æ€å£°æ˜<code>&lt;html&gt;</code>çš„<code>font-size</code>ï¼Œä»¥<code>rem</code>ä¸ºé•¿åº¦å•ä½å£°æ˜æ‰€æœ‰èŠ‚ç‚¹çš„å‡ ä½•å±æ€§ï¼Œè¿™æ ·å°±èƒ½åšåˆ°å¤§éƒ¨åˆ†ç§»åŠ¨è®¾å¤‡çš„é¡µé¢å…¼å®¹ï¼Œå…¼å®¹å‡ºå…¥è¾ƒå¤§çš„åœ°æ–¹å†é€šè¿‡åª’ä½“æŸ¥è¯¢åšç‰¹åˆ«å¤„ç†ã€‚</p><p>ç¬”è€…é€šå¸¸å°†remå¸ƒå±€æ¯”ä¾‹è®¾ç½®æˆ1rem=100pxï¼Œå³åœ¨è®¾è®¡å›¾ä¸Š100pxé•¿åº¦åœ¨CSSä»£ç ä¸Šä½¿ç”¨1remè¡¨ç¤ºã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">function</span> AutoResponse(width = 750) &#123;</span><br><span class="line">    const target = document.documentElement;</span><br><span class="line">    <span class="keyword">if</span> (target.clientWidth &gt;= 600) &#123;</span><br><span class="line">        target.style.fontSize = <span class="string">"80px"</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        target.style.fontSize = target.clientWidth / width * 100 + <span class="string">"px"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">AutoResponse();</span><br><span class="line">window.addEventListener(<span class="string">"resize"</span>, () =&gt; AutoResponse());</span><br></pre></td></tr></table></figure><p>å½“ç„¶è¿˜å¯ä¾æ®å±å¹•å®½åº¦ä¸è®¾è®¡å›¾å®½åº¦çš„æ¯”ä¾‹ä½¿ç”¨<code>calc()</code>åŠ¨æ€å£°æ˜<code>&lt;html&gt;</code>çš„<code>font-size</code>ï¼Œè¿™æ ·å°±èƒ½èŠ‚çœä¸Šè¿°ä»£ç ã€‚ä¸å¯¹ï¼Œæ˜¯å®Œå…¨ä»£æ›¿ä¸Šè¿°ä»£ç ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">html &#123;</span><br><span class="line">    font-size: calc(100vw / 7.5);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è‹¥ä»¥iPad Proåˆ†è¾¨ç‡1024pxä¸ºç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯çš„æ–­ç‚¹ï¼Œè¿˜å¯ç»“åˆåª’ä½“æŸ¥è¯¢åšæ–­ç‚¹å¤„ç†ã€‚1024pxä»¥ä¸‹ä½¿ç”¨remå¸ƒå±€ï¼Œå¦åˆ™ä¸ä½¿ç”¨remå¸ƒå±€ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@media screen and (max-width: 1024px) &#123;</span><br><span class="line">    html &#123;</span><br><span class="line">        font-size: calc(100vw / 7.5);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è‡ªåŠ¨é€‚åº”èƒŒæ™¯"><a href="#è‡ªåŠ¨é€‚åº”èƒŒæ™¯" class="headerlink" title="è‡ªåŠ¨é€‚åº”èƒŒæ™¯"></a>è‡ªåŠ¨é€‚åº”èƒŒæ™¯</h4><p>ä½¿ç”¨remå¸ƒå±€å£°æ˜ä¸€ä¸ªå…ƒç´ èƒŒæ™¯ï¼Œå¤šæ•°æƒ…å†µä¼šå°†background-sizeå£°æ˜ä¸ºcoverã€‚å¯èƒ½åœ¨è®¾è®¡å›¾å¯¹åº”åˆ†è¾¨ç‡çš„ç§»åŠ¨è®¾å¤‡ä¸‹ï¼ŒèƒŒæ™¯ä¼šå®Œç¾è´´åˆæ˜¾ç¤ºï¼Œä½†æ¢åˆ°å…¶ä»–åˆ†è¾¨ç‡çš„ç§»åŠ¨è®¾å¤‡ä¸‹å°±ä¼šå‡ºç°å·¦å³ç©ºå‡º1pxåˆ°npxçš„ç©ºéš™ã€‚</p><p>æ­¤æ—¶å°†background-sizeå£°æ˜ä¸º100% 100%ï¼Œè·Ÿéšwidthå’Œheightçš„å˜åŒ–è€Œå˜åŒ–ã€‚åæ­£widthå’Œheightéƒ½æ˜¯é‡å¥½çš„å®é™…å°ºå¯¸ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.elem &#123;</span><br><span class="line">    width: 1rem;</span><br><span class="line">    height: 1rem;</span><br><span class="line">    background: url(<span class="string">"pig.jpg"</span>) no-repeat center/100% 100%;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç›‘å¬å±å¹•æ—‹è½¬"><a href="#ç›‘å¬å±å¹•æ—‹è½¬" class="headerlink" title="ç›‘å¬å±å¹•æ—‹è½¬"></a>ç›‘å¬å±å¹•æ—‹è½¬</h4><p>ä½ è¿˜åœ¨ä½¿ç”¨JSåˆ¤æ–­æ¨ªå±ç«–å±è°ƒæ•´æ ·å¼å—ï¼Ÿé‚£å°±çœŸçš„Outäº†ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">/* ç«–å± */</span><br><span class="line">@media all and (orientation: portrait) &#123;</span><br><span class="line">    /* è‡ªå®šä¹‰æ ·å¼ */</span><br><span class="line">&#125;</span><br><span class="line">/* æ¨ªå± */</span><br><span class="line">@media all and (orientation: landscape) &#123;</span><br><span class="line">    /* è‡ªå®šä¹‰æ ·å¼ */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ”¯æŒå¼¹æ€§æ»šåŠ¨"><a href="#æ”¯æŒå¼¹æ€§æ»šåŠ¨" class="headerlink" title="æ”¯æŒå¼¹æ€§æ»šåŠ¨"></a>æ”¯æŒå¼¹æ€§æ»šåŠ¨</h4><p>åœ¨è‹¹æœç³»ç»Ÿä¸Šé<code>&lt;body&gt;</code>å…ƒç´ çš„æ»šåŠ¨æ“ä½œå¯èƒ½ä¼šå­˜åœ¨å¡é¡¿ï¼Œä½†å®‰å“ç³»ç»Ÿä¸ä¼šå‡ºç°è¯¥æƒ…å†µã€‚é€šè¿‡å£°æ˜<code>overflow-scrolling:touch</code>è°ƒç”¨ç³»ç»ŸåŸç”Ÿæ»šåŠ¨äº‹ä»¶ä¼˜åŒ–å¼¹æ€§æ»šåŠ¨ï¼Œå¢åŠ é¡µé¢æ»šåŠ¨çš„æµç•…åº¦ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">body &#123;</span><br><span class="line">    -webkit-overflow-scrolling: touch;</span><br><span class="line">&#125;</span><br><span class="line">.elem &#123;</span><br><span class="line">    overflow: auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¦æ­¢æ»šåŠ¨ä¼ æ’­"><a href="#ç¦æ­¢æ»šåŠ¨ä¼ æ’­" class="headerlink" title="ç¦æ­¢æ»šåŠ¨ä¼ æ’­"></a>ç¦æ­¢æ»šåŠ¨ä¼ æ’­</h4><p>ä¸æ¡Œé¢ç«¯æµè§ˆå™¨ä¸ä¸€æ ·ï¼Œç§»åŠ¨ç«¯æµè§ˆå™¨æœ‰ä¸€ä¸ªå¥‡æ€ªè¡Œä¸ºã€‚å½“é¡µé¢åŒ…å«å¤šä¸ªæ»šåŠ¨åŒºåŸŸæ—¶ï¼Œæ»šå®Œä¸€ä¸ªåŒºåŸŸåè‹¥è¿˜å­˜åœ¨æ»šåŠ¨åŠ¨é‡åˆ™ä¼šå°†è¿™äº›å‰©ä½™åŠ¨é‡ä¼ æ’­åˆ°ä¸‹ä¸€ä¸ªæ»šåŠ¨åŒºåŸŸï¼Œé€ æˆè¯¥åŒºåŸŸä¹Ÿæ»šåŠ¨èµ·æ¥ã€‚è¿™ç§è¡Œä¸ºç§°ä¸º<code>ã€Œæ»šåŠ¨ä¼ æ’­ã€</code>ã€‚</p><p>è‹¥ä¸æƒ³äº§ç”Ÿè¿™ç§å¥‡æ€ªè¡Œä¸ºå¯ç›´æ¥ç¦æ­¢ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.elem &#123;</span><br><span class="line">    overscroll-behavior: contain;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¦æ­¢å±å¹•æŠ–åŠ¨"><a href="#ç¦æ­¢å±å¹•æŠ–åŠ¨" class="headerlink" title="ç¦æ­¢å±å¹•æŠ–åŠ¨"></a>ç¦æ­¢å±å¹•æŠ–åŠ¨</h4><p>å¯¹äºä¸€äº›çªç„¶å‡ºç°æ»šåŠ¨æ¡çš„é¡µé¢ï¼Œå¯èƒ½ä¼šäº§ç”Ÿå·¦å³æŠ–åŠ¨çš„ä¸è‰¯å½±å“ã€‚åœ¨ä¸€ä¸ªæ»šåŠ¨å®¹å™¨é‡Œï¼Œæ‰“å¼€å¼¹çª—å°±éšè—æ»šåŠ¨æ¡ï¼Œå…³é—­å¼¹çª—å°±æ˜¾ç¤ºæ»šåŠ¨æ¡ï¼Œæ¥å›æ“ä½œä¼šè®©å±å¹•æŠ–åŠ¨èµ·æ¥ã€‚æå‰å£°æ˜æ»šåŠ¨å®¹å™¨çš„padding-rightä¸ºæ»šåŠ¨æ¡å®½åº¦ï¼Œå°±èƒ½æœ‰æ•ˆæ¶ˆé™¤è¿™ä¸ªä¸è‰¯å½±å“ã€‚</p><p>æ¯ä¸ªç§»åŠ¨ç«¯æµè§ˆå™¨çš„æ»šåŠ¨æ¡å®½åº¦éƒ½æœ‰å¯èƒ½ä¸ä¸€è‡´ï¼Œç”šè‡³ä¸ä¸€å®šå ä½ç½®ï¼Œé€šè¿‡ä»¥ä¸‹æ–¹å¼èƒ½é—´æ¥è®¡ç®—å‡ºæ»šåŠ¨æ¡çš„å®½åº¦ã€‚100vwä¸ºè§†çª—å®½åº¦ï¼Œ100%ä¸ºæ»šåŠ¨å®¹å™¨å†…å®¹å®½åº¦ï¼Œç›¸å‡å°±æ˜¯æ»šåŠ¨æ¡å®½åº¦ï¼Œå¦¥å¦¥çš„åŠ¨æ€è®¡ç®—ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">body &#123;</span><br><span class="line">    padding-right: calc(100vw - 100%);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¦æ­¢é•¿æŒ‰æ“ä½œ"><a href="#ç¦æ­¢é•¿æŒ‰æ“ä½œ" class="headerlink" title="ç¦æ­¢é•¿æŒ‰æ“ä½œ"></a>ç¦æ­¢é•¿æŒ‰æ“ä½œ</h4><p>æœ‰æ—¶ä¸æƒ³ç”¨æˆ·é•¿æŒ‰å…ƒç´ å‘¼å‡ºèœå•è¿›è¡Œç‚¹é“¾æ¥ã€æ‰“ç”µè¯ã€å‘é‚®ä»¶ã€ä¿å­˜å›¾ç‰‡æˆ–æ‰«æäºŒç»´ç ç­‰æ“ä½œï¼Œå£°æ˜<code>touch-callout:none</code>ç¦æ­¢ç”¨æˆ·é•¿æŒ‰æ“ä½œã€‚</p><p>æœ‰æ—¶ä¸æƒ³ç”¨æˆ·å¤åˆ¶ç²˜è´´ç›—æ–‡æ¡ˆï¼Œå£°æ˜<code>user-select:none</code>ç¦æ­¢ç”¨æˆ·é•¿æŒ‰æ“ä½œå’Œé€‰æ‹©å¤åˆ¶ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">    /* pointer-events: none; */ /* å¾®ä¿¡æµè§ˆå™¨è¿˜éœ€é™„åŠ è¯¥å±æ€§æ‰æœ‰æ•ˆ */</span><br><span class="line">    user-select: none; /* ç¦æ­¢é•¿æŒ‰é€‰æ‹©æ–‡å­— */</span><br><span class="line">    -webkit-touch-callout: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½†å£°æ˜user-select:noneä¼šè®©<code>&lt;input&gt;</code>å’Œ<code>&lt;textarea&gt;</code>æ— æ³•è¾“å…¥æ–‡æœ¬ï¼Œå¯å¯¹å…¶å£°æ˜<code>user-select:auto</code>æ’é™¤åœ¨å¤–ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">input,</span><br><span class="line">textarea &#123;</span><br><span class="line">    user-select: auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¦æ­¢å­—ä½“è°ƒæ•´"><a href="#ç¦æ­¢å­—ä½“è°ƒæ•´" class="headerlink" title="ç¦æ­¢å­—ä½“è°ƒæ•´"></a>ç¦æ­¢å­—ä½“è°ƒæ•´</h4><p>æ—‹è½¬å±å¹•å¯èƒ½ä¼šæ”¹å˜å­—ä½“å¤§å°ï¼Œå£°æ˜text-size-adjust:100%è®©å­—ä½“å¤§å°ä¿æŒä¸å˜ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">    text-size-adjust: 100%;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¦æ­¢é«˜äº®æ˜¾ç¤º"><a href="#ç¦æ­¢é«˜äº®æ˜¾ç¤º" class="headerlink" title="ç¦æ­¢é«˜äº®æ˜¾ç¤º"></a>ç¦æ­¢é«˜äº®æ˜¾ç¤º</h4><p>è§¦æ‘¸å…ƒç´ ä¼šå‡ºç°åŠé€æ˜ç°è‰²é®ç½©ï¼Œä¸æƒ³è¦ï¼</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">    -webkit-tap-highlight-color: transparent;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¦æ­¢åŠ¨ç”»é—ªå±"><a href="#ç¦æ­¢åŠ¨ç”»é—ªå±" class="headerlink" title="ç¦æ­¢åŠ¨ç”»é—ªå±"></a>ç¦æ­¢åŠ¨ç”»é—ªå±</h4><p>åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šæ·»åŠ åŠ¨ç”»ï¼Œå¤šæ•°æƒ…å†µä¼šå‡ºç°é—ªå±ï¼Œç»™åŠ¨ç”»å…ƒç´ çš„çˆ¶å…ƒç´ æ„é€ ä¸€ä¸ª3Dç¯å¢ƒå°±èƒ½è®©åŠ¨ç”»ç¨³å®šè¿è¡Œäº†ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">.elem &#123;</span><br><span class="line">    perspective: 1000;</span><br><span class="line">    backface-visibility: hidden;</span><br><span class="line">    transform-style: preserve-3d;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¾åŒ–è¡¨å•å¤–è§‚"><a href="#ç¾åŒ–è¡¨å•å¤–è§‚" class="headerlink" title="ç¾åŒ–è¡¨å•å¤–è§‚"></a>ç¾åŒ–è¡¨å•å¤–è§‚</h4><p>è¡¨å•å…ƒç´ æ ·å¼å¤ªä¸‘å¸Œæœ›è‡ªå®šä¹‰ï¼Œappearance:noneæ¥å¸®ä½ ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">button,</span><br><span class="line">input,</span><br><span class="line">select,</span><br><span class="line">textarea &#123;</span><br><span class="line">    appearance: none;</span><br><span class="line">    /* è‡ªå®šä¹‰æ ·å¼ */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¾åŒ–æ»šåŠ¨å ä½"><a href="#ç¾åŒ–æ»šåŠ¨å ä½" class="headerlink" title="ç¾åŒ–æ»šåŠ¨å ä½"></a>ç¾åŒ–æ»šåŠ¨å ä½</h4><p>æ»šåŠ¨æ¡æ ·å¼å¤ªä¸‘å¸Œæœ›è‡ªå®šä¹‰ï¼Œ<code>::-webkit-scrollbar-*</code>æ¥å¸®ä½ ã€‚è®°ä½ä»¥ä¸‹ä¸‰ä¸ªå…³é”®è¯å°±èƒ½éšæœºåº”å˜äº†ã€‚</p><ul><li style="list-style: none"><input type="checkbox" checked> ã€Œ::-webkit-scrollbarã€ï¼šæ»šåŠ¨æ¡æ•´ä½“éƒ¨åˆ†</li><li style="list-style: none"><input type="checkbox" checked> ã€Œ::-webkit-scrollbar-trackã€ï¼šæ»šåŠ¨æ¡è½¨é“éƒ¨åˆ†</li><li style="list-style: none"><input type="checkbox" checked> ã€Œ::-webkit-scrollbar-thumbã€ï¼šæ»šåŠ¨æ¡æ»‘å—éƒ¨åˆ†</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">::-webkit-scrollbar &#123;</span><br><span class="line">    width: 6px;</span><br><span class="line">    height: 6px;</span><br><span class="line">    background-color: transparent;</span><br><span class="line">&#125;</span><br><span class="line">::-webkit-scrollbar-track &#123;</span><br><span class="line">    background-color: transparent;</span><br><span class="line">&#125;</span><br><span class="line">::-webkit-scrollbar-thumb &#123;</span><br><span class="line">    border-radius: 3px;</span><br><span class="line">    background-image: linear-gradient(135deg, <span class="comment">#09f, #3c9);</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¾åŒ–è¾“å…¥å ä½"><a href="#ç¾åŒ–è¾“å…¥å ä½" class="headerlink" title="ç¾åŒ–è¾“å…¥å ä½"></a>ç¾åŒ–è¾“å…¥å ä½</h4><p>è¾“å…¥æ¡†å ä½æ–‡æœ¬å¤ªä¸‘ï¼Œ<code>::-webkit-input-placeholder</code>æ¥å¸®ä½ ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">input::-webkit-input-placeholder &#123;</span><br><span class="line">    color: <span class="comment">#66f;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å¯¹é½è¾“å…¥å ä½"><a href="#å¯¹é½è¾“å…¥å ä½" class="headerlink" title="å¯¹é½è¾“å…¥å ä½"></a>å¯¹é½è¾“å…¥å ä½</h4><p>æœ‰å¼ºè¿«ç—‡çš„åŒå­¦æ€»ä¼šè§‰å¾—è¾“å…¥æ¡†æ–‡æœ¬ä½ç½®æ•´ä½“åä¸Šï¼Œæ„Ÿè§‰æœªå±…ä¸­å¿ƒé‡Œå°±ç—’ç—’çš„ã€‚æ¡Œé¢ç«¯æµè§ˆå™¨é‡Œå£°æ˜<code>line-height</code>ç­‰äº<code>height</code>å°±èƒ½è§£å†³ï¼Œä½†ç§»åŠ¨ç«¯æµè§ˆå™¨é‡Œè¿˜æ˜¯æœªèƒ½è§£å†³ï¼Œéœ€å°†<code>line-height</code>å£°æ˜ä¸º<code>normal</code>æ‰è¡Œã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">input &#123;</span><br><span class="line">    line-height: normal;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å¯¹é½ä¸‹æ‹‰é€‰é¡¹"><a href="#å¯¹é½ä¸‹æ‹‰é€‰é¡¹" class="headerlink" title="å¯¹é½ä¸‹æ‹‰é€‰é¡¹"></a>å¯¹é½ä¸‹æ‹‰é€‰é¡¹</h4><p>ä¸‹æ‹‰æ¡†é€‰é¡¹é»˜è®¤å‘å·¦å¯¹é½ï¼Œæ˜¯æ—¶å€™æ”¹æ”¹å‘å³å¯¹é½äº†ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select option &#123;</span><br><span class="line">    direction: rtl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä¿®å¤ç‚¹å‡»æ— æ•ˆ"><a href="#ä¿®å¤ç‚¹å‡»æ— æ•ˆ" class="headerlink" title="ä¿®å¤ç‚¹å‡»æ— æ•ˆ"></a>ä¿®å¤ç‚¹å‡»æ— æ•ˆ</h4><p>åœ¨è‹¹æœç³»ç»Ÿä¸Šæœ‰äº›æƒ…å†µä¸‹éå¯ç‚¹å‡»å…ƒç´ ç›‘å¬<code>click</code>äº‹ä»¶å¯èƒ½ä¼šæ— æ•ˆï¼Œé’ˆå¯¹è¯¥æƒ…å†µåªéœ€å¯¹ä¸è§¦å‘<code>click</code>äº‹ä»¶çš„å…ƒç´ å£°æ˜<code>cursor:pointer</code>å°±èƒ½è§£å†³ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.elem &#123;</span><br><span class="line">    cursor: pointer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è¯†åˆ«æ–‡æœ¬æ¢è¡Œ"><a href="#è¯†åˆ«æ–‡æœ¬æ¢è¡Œ" class="headerlink" title="è¯†åˆ«æ–‡æœ¬æ¢è¡Œ"></a>è¯†åˆ«æ–‡æœ¬æ¢è¡Œ</h4><p>å¤šæ•°æƒ…å†µä¼šä½¿ç”¨<code>JS</code>æ¢è¡Œæ–‡æœ¬ï¼Œé‚£å°±çœŸçš„<code>Out</code>äº†ã€‚è‹¥æ¥å£è¿”å›å­—æ®µåŒ…å«<code>\n</code>æˆ–<code>&lt;br&gt;</code>ï¼Œåƒä¸‡åˆ«æ›¿æ¢æ‰ï¼Œå¯å£°æ˜<code>white-space:pre-line</code>äº¤ç”±æµè§ˆå™¨åšæ–­è¡Œå¤„ç†ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">    white-space: pre-line;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å¼€å¯ç¡¬ä»¶åŠ é€Ÿ"><a href="#å¼€å¯ç¡¬ä»¶åŠ é€Ÿ" class="headerlink" title="å¼€å¯ç¡¬ä»¶åŠ é€Ÿ"></a>å¼€å¯ç¡¬ä»¶åŠ é€Ÿ</h4><p>æƒ³åŠ¨ç”»æ›´æµç•…å—ï¼Œå¼€å¯GPUç¡¬ä»¶åŠ é€Ÿå‘—ï¼</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.elem &#123;</span><br><span class="line">    transform: translate3d(0, 0, 0);</span><br><span class="line">    /* transform: translateZ(0); */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æç»˜åƒç´ è¾¹æ¡†"><a href="#æç»˜åƒç´ è¾¹æ¡†" class="headerlink" title="æç»˜åƒç´ è¾¹æ¡†"></a>æç»˜åƒç´ è¾¹æ¡†</h4><p>ä¸‡å¹´è¯é¢˜ï¼Œå¦‚ä½•æç»˜ä¸€åƒç´ è¾¹æ¡†ï¼Ÿ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">.elem &#123;</span><br><span class="line">    position: relative;</span><br><span class="line">    width: 200px;</span><br><span class="line">    height: 80px;</span><br><span class="line">    &amp;::after &#123;</span><br><span class="line">        position: absolute;</span><br><span class="line">        left: 0;</span><br><span class="line">        top: 0;</span><br><span class="line">        border: 1px solid <span class="comment">#f66;</span></span><br><span class="line">        width: 200%;</span><br><span class="line">        height: 200%;</span><br><span class="line">        content: <span class="string">""</span>;</span><br><span class="line">        transform: scale(.5);</span><br><span class="line">        transform-origin: left top;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ§åˆ¶æº¢å‡ºæ–‡æœ¬"><a href="#æ§åˆ¶æº¢å‡ºæ–‡æœ¬" class="headerlink" title="æ§åˆ¶æº¢å‡ºæ–‡æœ¬"></a>æ§åˆ¶æº¢å‡ºæ–‡æœ¬</h4><p>ä¸‡å¹´è¯é¢˜ï¼Œå¦‚ä½•æ§åˆ¶æ–‡æœ¬åšå•è¡Œæº¢å‡ºå’Œå¤šè¡Œæº¢å‡ºï¼Ÿ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">.elem &#123;</span><br><span class="line">    width: 400px;</span><br><span class="line">    line-height: 30px;</span><br><span class="line">    font-size: 20px;</span><br><span class="line">    &amp;.sl-ellipsis &#123;</span><br><span class="line">        overflow: hidden;</span><br><span class="line">        text-overflow: ellipsis;</span><br><span class="line">        white-space: nowrap;</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;.ml-ellipsis &#123;</span><br><span class="line">        display: -webkit-box;</span><br><span class="line">        overflow: hidden;</span><br><span class="line">        text-overflow: ellipsis;</span><br><span class="line">        -webkit-line-clamp: 3;</span><br><span class="line">        -webkit-box-orient: vertical;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="jsæ–¹å‘"><a href="#jsæ–¹å‘" class="headerlink" title="jsæ–¹å‘"></a>jsæ–¹å‘</h2><h4 id="æ”¯æŒå¾€è¿”åˆ·æ–°"><a href="#æ”¯æŒå¾€è¿”åˆ·æ–°" class="headerlink" title="æ”¯æŒå¾€è¿”åˆ·æ–°"></a>æ”¯æŒå¾€è¿”åˆ·æ–°</h4><p>ç‚¹å‡»ç§»åŠ¨ç«¯æµè§ˆå™¨çš„å‰è¿›æŒ‰é’®æˆ–åé€€æŒ‰é’®ï¼Œæœ‰æ—¶ä¸ä¼šè‡ªåŠ¨æ‰§è¡Œæ—§é¡µé¢çš„JSä»£ç ï¼Œè¿™ä¸å¾€è¿”ç¼“å­˜æœ‰å…³ã€‚è¿™ç§æƒ…å†µåœ¨<code>Safari</code>ä¸Šç‰¹åˆ«æ˜æ˜¾ï¼Œç®€å•æ¦‚æ‹¬å°±æ˜¯å¾€è¿”é¡µé¢æ— æ³•åˆ·æ–°ã€‚<br><code>pageshow</code>äº‹ä»¶åœ¨æ¯æ¬¡é¡µé¢åŠ è½½æ—¶éƒ½ä¼šè§¦å‘ï¼Œæ— è®ºæ˜¯é¦–æ¬¡åŠ è½½è¿˜æ˜¯å†æ¬¡åŠ è½½éƒ½ä¼šè§¦å‘ï¼Œè¿™å°±æ˜¯å®ƒä¸<code>load</code>äº‹ä»¶çš„åŒºåˆ«ã€‚<code>pageshow</code>äº‹ä»¶æš´éœ²çš„<code>persisted</code>å¯åˆ¤æ–­é¡µé¢æ˜¯å¦ä»<code>BFCache</code>é‡Œå–å‡ºã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">window.addEventListener(<span class="string">"pageshow"</span>, e =&gt; e.persisted &amp;&amp; location.reload());</span><br></pre></td></tr></table></figure><h4 id="ç®€åŒ–å›åˆ°é¡¶éƒ¨"><a href="#ç®€åŒ–å›åˆ°é¡¶éƒ¨" class="headerlink" title="ç®€åŒ–å›åˆ°é¡¶éƒ¨"></a>ç®€åŒ–å›åˆ°é¡¶éƒ¨</h4><p>æ›¾å‡ ä½•æ—¶ç¼–å†™ä¸€ä¸ªè¿”å›é¡¶éƒ¨å‡½æ•°éº»çƒ¦å¾—è¦æ­»ï¼Œéœ€<code>scrollTop</code>ã€<code>å®šæ—¶å™¨</code>å’Œ<code>æ¡ä»¶åˆ¤æ–­</code>ä¸‰è€…é…åˆæ‰èƒ½å®Œæˆã€‚å…¶å®<code>DOM</code>å¯¹è±¡é‡Œéšè—äº†ä¸€ä¸ªå¾ˆå¥½ç”¨çš„å‡½æ•°å¯å®Œæˆä¸Šè¿°åŠŸèƒ½ï¼Œä¸€è¡Œæ ¸å¿ƒä»£ç å°±èƒ½æå®šã€‚</p><p>è¯¥å‡½æ•°å°±æ˜¯<code>scrollIntoView</code>ï¼Œå®ƒä¼šæ»šåŠ¨ç›®æ ‡å…ƒç´ çš„çˆ¶å®¹å™¨ä½¿ä¹‹å¯¹ç”¨æˆ·å¯è§ï¼Œç®€å•æ¦‚æ‹¬å°±æ˜¯ç›¸å¯¹è§†çª—è®©å®¹å™¨æ»šåŠ¨åˆ°ç›®æ ‡å…ƒç´ ä½ç½®ã€‚å®ƒæœ‰ä¸‰ä¸ªå¯é€‰å‚æ•°èƒ½è®©<code>scrollIntoView</code>æ»šåŠ¨èµ·æ¥æ›´ä¼˜é›…ã€‚</p><ul><li style="list-style: none"><input type="checkbox" checked> <code>ã€Œbehaviorã€</code>ï¼šåŠ¨ç”»è¿‡æ¸¡æ•ˆæœï¼Œé»˜è®¤<code>auto</code>æ— ï¼Œå¯é€‰<code>smooth</code>å¹³æ»‘</li><li style="list-style: none"><input type="checkbox" checked> <code>ã€Œinlineã€</code>ï¼šæ°´å¹³æ–¹å‘å¯¹é½æ–¹å¼ï¼Œé»˜è®¤<code>nearest</code>å°±è¿‘å¯¹é½ï¼Œå¯é€‰<code>start</code>é¡¶éƒ¨å¯¹é½ã€<code>center</code>ä¸­é—´å¯¹é½å’Œ<code>end</code>åº•éƒ¨å¯¹é½</li><li style="list-style: none"><input type="checkbox" checked> <code>ã€Œblockã€</code>ï¼šå‚ç›´æ–¹å‘å¯¹é½æ–¹å¼ï¼Œé»˜è®¤<code>start</code>é¡¶éƒ¨å¯¹é½ï¼Œå¯é€‰<code>center</code>ä¸­é—´å¯¹é½ã€<code>end</code>åº•éƒ¨å¯¹é½å’Œ<code>nearest</code>å°±è¿‘å¯¹é½</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const gotopBtn = document.getElementById(<span class="string">"gotop-btn"</span>);</span><br><span class="line">openBtn.addEventListener(<span class="string">"click"</span>, () =&gt; document.body.scrollIntoView(&#123; behavior: <span class="string">"smooth"</span> &#125;));</span><br></pre></td></tr></table></figure><h4 id="ç®€åŒ–æ‡’æ€§åŠ è½½"><a href="#ç®€åŒ–æ‡’æ€§åŠ è½½" class="headerlink" title="ç®€åŒ–æ‡’æ€§åŠ è½½"></a>ç®€åŒ–æ‡’æ€§åŠ è½½</h4><p>ä¸ä¸Šè¿°ã€Œç®€åŒ–å›åˆ°é¡¶éƒ¨ã€ä¸€æ ·ï¼Œç¼–å†™ä¸€ä¸ªæ‡’æ€§åŠ è½½å‡½æ•°ä¹ŸåŒæ ·éœ€<code>scrollTop</code>ã€å®šæ—¶å™¨å’Œæ¡ä»¶åˆ¤æ–­ä¸‰è€…é…åˆæ‰èƒ½å®Œæˆã€‚å…¶å®<code>DOM</code>å¯¹è±¡é‡Œéšè—äº†ä¸€ä¸ªå¾ˆå¥½ç”¨çš„å‡½æ•°å¯å®Œæˆä¸Šè¿°åŠŸèƒ½ï¼Œè¯¥å‡½æ•°æ— éœ€ç›‘å¬å®¹å™¨çš„<code>scroll</code>äº‹ä»¶ï¼Œé€šè¿‡æµè§ˆå™¨è‡ªèº«æœºåˆ¶å®Œæˆæ»šåŠ¨ç›‘å¬ã€‚</p><p>è¯¥å‡½æ•°å°±æ˜¯<code>IntersectionObserver</code>ï¼Œå®ƒæä¾›ä¸€ç§å¼‚æ­¥è§‚å¯Ÿç›®æ ‡å…ƒç´ åŠå…¶ç¥–å…ˆå…ƒç´ æˆ–é¡¶çº§æ–‡æ¡£è§†çª—äº¤å‰çŠ¶æ€çš„æ–¹æ³•ã€‚è¯¦æƒ…å¯å‚ç…§MDNæ–‡æ¡£ï¼Œåœ¨æ­¤ä¸ä½œè¿‡å¤šä»‹ç»ã€‚</p><p>æ‡’æ€§åŠ è½½çš„ç¬¬ä¸€ç§ä½¿ç”¨åœºæ™¯ï¼š<code>ã€Œå›¾ç‰‡æ‡’åŠ è½½ã€</code>ã€‚åªéœ€ç¡®è®¤å›¾ç‰‡è¿›å…¥å¯è§†åŒºåŸŸå°±èµ‹å€¼åŠ è½½å›¾ç‰‡ï¼Œèµ‹å€¼å®Œæˆè¿˜éœ€å¯¹å›¾ç‰‡åœæ­¢ç›‘å¬ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">const imgs = document.querySelectorAll(<span class="string">"img.lazyload"</span>);</span><br><span class="line">const observer = new IntersectionObserver(nodes =&gt; &#123;</span><br><span class="line">    nodes.forEach(v =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (v.isIntersecting) &#123; // åˆ¤æ–­æ˜¯å¦è¿›å…¥å¯è§†åŒºåŸŸ</span><br><span class="line">            v.target.src = v.target.dataset.src; // èµ‹å€¼åŠ è½½å›¾ç‰‡</span><br><span class="line">            observer.unobserve(v.target); // åœæ­¢ç›‘å¬å·²åŠ è½½çš„å›¾ç‰‡</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line">imgs.forEach(v =&gt; observer.observe(v));</span><br></pre></td></tr></table></figure><p>æ‡’æ€§åŠ è½½çš„ç¬¬äºŒç§ä½¿ç”¨åœºæ™¯ï¼šã€Œä¸‹æ‹‰åŠ è½½ã€ã€‚åœ¨åˆ—è¡¨æœ€åº•éƒ¨éƒ¨ç½²ä¸€ä¸ªå ä½å…ƒç´ ä¸”è¯¥å…ƒç´ æ— ä»»ä½•é«˜åº¦æˆ–å®ä½“å¤–è§‚ï¼Œåªéœ€ç¡®è®¤å ä½å…ƒç´ è¿›å…¥å¯è§†åŒºåŸŸå°±è¯·æ±‚æ¥å£åŠ è½½æ•°æ®ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line">    &lt;li&gt;&lt;/li&gt;</span><br><span class="line">    &lt;!-- å¾ˆå¤š&lt;li&gt; --&gt;</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line">&lt;!-- ä¹Ÿå¯å°†<span class="comment">#bottomä»¥&lt;li&gt;çš„å½¢å¼æ’å…¥åˆ°&lt;ul&gt;å†…éƒ¨çš„æœ€åä½ç½® --&gt;</span></span><br><span class="line">&lt;div id=<span class="string">"bottom"</span>&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">const bottom = document.getElementById(<span class="string">"bottom"</span>);</span><br><span class="line">const observer = new IntersectionObserver(nodes =&gt; &#123;</span><br><span class="line">    const tgt = nodes[0]; // åæ­£åªæœ‰ä¸€ä¸ª</span><br><span class="line">    <span class="keyword">if</span> (tgt.isIntersecting) &#123;</span><br><span class="line">        console.log(<span class="string">"å·²åˆ°åº•éƒ¨ï¼Œè¯·æ±‚æ¥å£"</span>);</span><br><span class="line">        // æ‰§è¡Œæ¥å£è¯·æ±‚ä»£ç </span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">bottom.observe(bottom);</span><br></pre></td></tr></table></figure><h4 id="ä¼˜åŒ–æ‰«ç è¯†åˆ«"><a href="#ä¼˜åŒ–æ‰«ç è¯†åˆ«" class="headerlink" title="ä¼˜åŒ–æ‰«ç è¯†åˆ«"></a>ä¼˜åŒ–æ‰«ç è¯†åˆ«</h4><p>é€šå¸¸ç§»åŠ¨ç«¯æµè§ˆå™¨éƒ½ä¼šé…å¤‡é•¿æŒ‰äºŒç»´ç å›¾ç‰‡è¯†åˆ«é“¾æ¥çš„åŠŸèƒ½ï¼Œä½†é•¿æŒ‰äºŒç»´ç å¯èƒ½æ— æ³•è¯†åˆ«æˆ–é”™è¯¯è¯†åˆ«ã€‚äºŒç»´ç è¡¨é¢çœ‹ä¸Šå»æ˜¯ä¸€å¼ å›¾ç‰‡ï¼Œå¯äºŒç»´ç ç”Ÿæˆæ–¹å¼å´äº”èŠ±å…«é—¨ï¼ŒäºŒç»´ç ç”Ÿæˆæ–¹å¼æœ‰ä»¥ä¸‹ä¸‰ç§ã€‚</p><ul><li style="list-style: none"><input type="checkbox" checked> ä½¿ç”¨<code>&lt;img&gt;</code>æ¸²æŸ“</li><li style="list-style: none"><input type="checkbox" checked> ä½¿ç”¨<code>&lt;svg&gt;</code>æ¸²æŸ“</li><li style="list-style: none"><input type="checkbox" checked> ä½¿ç”¨<code>&lt;canvas&gt;</code>æ¸²æŸ“</li></ul><p>ä»ç½‘æ˜“MTLçš„æµ‹è¯•æ•°æ®å¾—çŸ¥ï¼Œå¤§éƒ¨åˆ†ç§»åŠ¨ç«¯æµè§ˆå™¨åªèƒ½è¯†åˆ«<code>&lt;img&gt;</code>æ¸²æŸ“çš„äºŒç»´ç ï¼Œä¸ºäº†è®©å…¨éƒ¨ç§»åŠ¨ç«¯æµè§ˆå™¨éƒ½èƒ½è¯†åˆ«äºŒç»´ç ï¼Œé‚£åªèƒ½ä½¿ç”¨<code>&lt;img&gt;</code>æ¸²æŸ“äºŒç»´ç äº†ã€‚è‹¥ä½¿ç”¨<code>SVGå’ŒCanvas</code>çš„æ–¹å¼ç”ŸæˆäºŒç»´ç ï¼Œé‚£å°±æƒ³æ–¹è®¾æ³•æŠŠäºŒç»´ç æ•°æ®è½¬æ¢æˆBase64å†èµ‹å€¼åˆ°<code>&lt;img&gt;</code>çš„<code>src</code>ä¸Šã€‚</p><p>ä¸€ä¸ªé¡µé¢å¯èƒ½å­˜åœ¨å¤šä¸ªäºŒç»´ç ï¼Œè‹¥é•¿æŒ‰äºŒç»´ç åªèƒ½è¯†åˆ«æœ€åä¸€ä¸ªï¼Œé‚£åªèƒ½æ§åˆ¶æ¯ä¸ªé¡µé¢åªå­˜åœ¨ä¸€ä¸ªäºŒç»´ç ã€‚</p><h5 id="æ–‡ç« è½¬è‡ª-ä½œè€…JowayYoung-https-mp-weixin-qq-com-s-nge9FPgVS6FZcuVOTxCBtQ"><a href="#æ–‡ç« è½¬è‡ª-ä½œè€…JowayYoung-https-mp-weixin-qq-com-s-nge9FPgVS6FZcuVOTxCBtQ" class="headerlink" title="æ–‡ç« è½¬è‡ª ä½œè€…JowayYoung https://mp.weixin.qq.com/s/nge9FPgVS6FZcuVOTxCBtQ"></a>æ–‡ç« è½¬è‡ª ä½œè€…JowayYoung <a href="https://mp.weixin.qq.com/s/nge9FPgVS6FZcuVOTxCBtQ" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/nge9FPgVS6FZcuVOTxCBtQ</a></h5>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;code&gt;ç§»åŠ¨ç«¯å¼€å‘åœ¨å‰ç«¯é‡Œåƒç¥ä¸€æ ·åœ°å­˜åœ¨ï¼Œä¸æ˜¯è¯´å®ƒå¤šéš¾è€Œæ˜¯è¯´å®ƒå‘ä½å®åœ¨å¤ªå¤šäº†ï¼Œæ€æ ·å¡«éƒ½å¡«ä¸å®Œã€‚Androidå’ŒiOSå„æ˜¾ç¥é€šï¼ŒAndroidçš„ç³»ç»Ÿç‰ˆæœ¬å’Œå±å¹•åˆ†è¾¨ç‡å¤šå¾—éš¾ä»¥ä¸€æ‹›å…¼å®¹ï¼ŒiOSçš„é¡½å›ºæ ‡å‡†å’ŒæœªçŸ¥ç‰¹æ€§å¤šå¾—éš¾ä»¥å¿«é€ŸæŒæ¡ã€‚&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä¸‰å¹´</summary>
      
    
    
    
    <category term="å‰ç«¯" scheme="https://gofugui.github.io/categories/å‰ç«¯/"/>
    
    
    <category term="JavaScript" scheme="https://gofugui.github.io/tags/JavaScript/"/>
    
    <category term="Web" scheme="https://gofugui.github.io/tags/Web/"/>
    
    <category term="ES6" scheme="https://gofugui.github.io/tags/ES6/"/>
    
    <category term="html" scheme="https://gofugui.github.io/tags/html/"/>
    
  </entry>
  
  <entry>
    <title>react-native-code-push çƒ­æ›´æ–°é…ç½®</title>
    <link href="https://gofugui.github.io/2019/11/12/code-push/"/>
    <id>https://gofugui.github.io/2019/11/12/code-push/</id>
    <published>2019-11-11T16:00:00.000Z</published>
    <updated>2021-03-31T05:56:45.778Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å…¬å¸ä¸»æ‰“çš„ä¸€æ¬¾æ–°é¡¹ç›®ï¼Œä¸ºäº†æ»¡è¶³å¿«é€Ÿè¿­ä»£çš„éœ€è¦ï¼Œä½¿ç”¨rnè¿›è¡Œå¼€å‘ï¼Œé¡¹ç›®ä¸­ä½¿ç”¨åˆ°äº†å¾®è½¯çš„code-pushçƒ­æ›´æ–°åŠŸèƒ½ï¼Œåœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹çƒ­æ›´æ–°çš„é›†æˆè¿‡ç¨‹ï¼Œä»¥åŠæ³¨æ„ç‚¹ã€‚</p></blockquote><h3 id="react-native-çƒ­æ›´æ–°éœ€è¦ç”¨åˆ°çš„å·¥å…·"><a href="#react-native-çƒ­æ›´æ–°éœ€è¦ç”¨åˆ°çš„å·¥å…·" class="headerlink" title="react-native çƒ­æ›´æ–°éœ€è¦ç”¨åˆ°çš„å·¥å…·"></a>react-native çƒ­æ›´æ–°éœ€è¦ç”¨åˆ°çš„å·¥å…·</h3><ul><li><p>mysql,node </p></li><li><p><a href="https://github.com/gofugui/react-native-code-push" target="_blank" rel="noopener">react-native-code-push</a></p></li><li><p><a href="https://github.com/gofugui/code-push-server" target="_blank" rel="noopener">code-push-server</a></p></li></ul><h3 id="å®‰è£…æ–¹æ³•"><a href="#å®‰è£…æ–¹æ³•" class="headerlink" title="å®‰è£…æ–¹æ³•"></a>å®‰è£…æ–¹æ³•</h3><h4 id="code-push-server"><a href="#code-push-server" class="headerlink" title="code-push-server"></a>code-push-server</h4><ul><li>æ­¥éª¤ä¸€</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å®‰è£…code-push-server</span></span><br><span class="line">npm install -g code-push-server</span><br><span class="line"><span class="comment">#è¿›å…¥åˆ°code-push-serverç›®å½•ï¼Œ</span></span><br><span class="line"><span class="built_in">cd</span> &lt;YOUR_DIR&gt;/code-push-server/config</span><br><span class="line"><span class="comment">#æ‰“å¼€config/config.jsæ–‡ä»¶</span></span><br><span class="line">vi config.js</span><br><span class="line"><span class="comment">#é…ç½®æ•°æ®åº“(ä»¥ä¸‹æ˜¯é»˜è®¤çš„ï¼Œæ•°æ®åº“çš„ç”¨æˆ·åã€å¯†ç ã€åœ°å€è¿˜æœ‰ç«¯å£éœ€è¦ä¿®æ”¹æˆä½ è‡ªå·±çš„)</span></span><br><span class="line"> db: &#123;</span><br><span class="line">    username: process.env.RDS_USERNAME || <span class="string">"root"</span>,</span><br><span class="line">    password: process.env.RDS_PASSWORD || null,</span><br><span class="line">    database: process.env.DATA_BASE || <span class="string">"codepush"</span>,</span><br><span class="line">    host: process.env.RDS_HOST || <span class="string">"127.0.0.1"</span>,</span><br><span class="line">    port: process.env.RDS_PORT || 3306,</span><br><span class="line">    dialect: <span class="string">"mysql"</span>,</span><br><span class="line">    logging: <span class="literal">false</span>,</span><br><span class="line">    operatorsAliases: <span class="literal">false</span>,</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">#é…ç½®ä¸‹è½½æ–‡ä»¶çš„å­˜å‚¨åœ°å€ï¼Œä½ å¯ä»¥é€‰æ‹©ä¸€äº›äº‘osså­˜å‚¨æœåŠ¡</span></span><br><span class="line"><span class="comment">#æ­¤å¤„æˆ‘ä»¬å°†æ•°æ®å­˜å‚¨åœ¨æœåŠ¡å™¨æœ¬åœ°</span></span><br><span class="line"><span class="comment">#é…ç½®storageDirä¸ºä½ çš„ç”µè„‘ä¸Šçš„ç›®å½•</span></span><br><span class="line"><span class="comment">#é…ç½®downloadUrlä¸ºä½ çš„æœåŠ¡å™¨çš„ä¸‹è½½åœ°å€</span></span><br><span class="line"><span class="built_in">local</span>: &#123;</span><br><span class="line">    <span class="comment"># Binary files storage dir, Do not use tmpdir and it's public download dir.</span></span><br><span class="line">    storageDir: process.env.STORAGE_DIR || <span class="string">"/Users/tablee/workspaces/storage"</span>,</span><br><span class="line">    <span class="comment"># Binary files download host address which Code Push Server listen to. the files storage in storageDir.</span></span><br><span class="line">    downloadUrl: process.env.LOCAL_DOWNLOAD_URL || <span class="string">"http://127.0.0.1:3000/download"</span>,</span><br><span class="line">    <span class="comment"># public static download spacename.</span></span><br><span class="line">    public: <span class="string">'/download'</span></span><br><span class="line">  &#125;,</span><br><span class="line"><span class="comment">#é…ç½®å¢é‡æ–‡ä»¶çš„å­˜å‚¨åœ°å€</span></span><br><span class="line"><span class="comment">#ä¿®æ”¹dataDirä¸ºä½ çš„æœ¬åœ°è·¯å¾„</span></span><br><span class="line">common: &#123;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="comment"># data dir for caclulate diff files. it's optimization.</span></span><br><span class="line">    dataDir: process.env.DATA_DIR || os.tmpdir(),</span><br><span class="line">    <span class="comment"># storageType which is your binary package files store. options value is ("local" | "qiniu" | "s3"| "oss" || "tencentcloud")</span></span><br><span class="line">    storageType: process.env.STORAGE_TYPE || <span class="string">"local"</span>,</span><br><span class="line">    </span><br><span class="line">    ...</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><ul><li>æ­¥éª¤äºŒ<blockquote><p>å®‰è£…CodePush CLIï¼Œç”¨ä»¥å’Œcode-push-serveræœåŠ¡è¿›è¡Œäº¤äº’,ç›¸å…³çš„code-pushæŒ‡ä»¤å¯ä»¥æŸ¥çœ‹æˆ‘ä¹‹å‰çš„æ–‡ç« <a href="https://gofugui.github.io/2019/03/07/code-push-command">code-push-command</a></p></blockquote></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å®‰è£…CodePush CLI</span></span><br><span class="line">npm install -g code-push-cli</span><br></pre></td></tr></table></figure><h4 id="react-native-code-push"><a href="#react-native-code-push" class="headerlink" title="react-native-code-push"></a>react-native-code-push</h4><blockquote><p>åˆ°è¿™ä¸€æ­¥æ—¶é¦–å…ˆç¡®ä¿ä½ å·²ç»å°†ä½ çš„appæ·»åŠ è¿›äº†<code>code-push-server</code>ï¼Œå¦‚æœè¿˜æ²¡æœ‰ï¼Œè¯·æŸ¥çœ‹<a href="https://gofugui.github.io/2019/03/07/code-push-command">code-push-command</a>é‡Œçš„è®²è§£ï¼Œæ·»åŠ appåˆ°<code>code-push-server</code>ï¼Œå¹¶è·å–<code>Deployment Key</code></p></blockquote><ul><li>æ­¥éª¤ä¸€</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å®‰è£…ä¾èµ–</span></span><br><span class="line">npm install --save react-native-code-push</span><br><span class="line"><span class="comment">#é“¾æ¥åŸç”Ÿåº“</span></span><br><span class="line">react-native link react-native-code-push</span><br></pre></td></tr></table></figure><ul><li>æ­¥éª¤äºŒ</li></ul><blockquote><p>åœ¨å®Œæˆ<a href="#æ­¥éª¤ä¸€">æ­¥éª¤ä¸€</a>çš„æ“ä½œåï¼Œä¼šè‡ªåŠ¨åœ¨Androidå’ŒiOSçš„æºç ä¸­æ’å…¥ä¸€äº›ä»£ç ï¼Œå¼•ç”¨è¿™ä¸ªåº“ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜éœ€è¦åœ¨è¿™ä¸ªåŸºç¡€ä¸Šåšä¸€äº›ä¸ªæ€§åŒ–çš„é…ç½®ã€‚ä¸‹é¢ä»‹ç»ä¸€ä¸‹é’ˆå¯¹ä¸åŒå¹³å°çš„é…ç½®æ–¹æ³•ã€‚</p></blockquote><h4 id="Android"><a href="#Android" class="headerlink" title="Android"></a>Android</h4><h5 id="é…ç½®Androidç«¯çš„Deployment-Key"><a href="#é…ç½®Androidç«¯çš„Deployment-Key" class="headerlink" title="é…ç½®Androidç«¯çš„Deployment Key"></a>é…ç½®Androidç«¯çš„Deployment Key</h5><blockquote><p>ä¸ºä»¥åç»´æŠ¤æ–¹ä¾¿ï¼Œæˆ‘ä»¬å°†keyå€¼å­˜æ”¾åœ¨Androidç›®å½•ä¸‹<code>gradle.properties</code>ä¸­ï¼š</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># When configured, Gradle will run in incubating parallel mode.</span></span><br><span class="line"><span class="comment"># This option should only be used with decoupled projects. More details, visit</span></span><br><span class="line"><span class="comment"># http://www.gradle.org/docs/current/userguide/multi_project_builds.html#sec:decoupled_projects</span></span><br><span class="line"></span><br><span class="line">......</span><br><span class="line"></span><br><span class="line">RELEASE_STAGING=&lt;YOUR_RELEASE_STAGING_KEY&gt;</span><br><span class="line">RELEASE = &lt;YOUR_RELEASE_KEY&gt;</span><br><span class="line"></span><br><span class="line">......</span><br></pre></td></tr></table></figure><h5 id="ä¿®æ”¹build-gradleä¸­çš„é…ç½®ï¼Œä»¥ä¾¿æ‰“ä¸åŒæµ‹è¯•ç±»å‹çš„åŒ…"><a href="#ä¿®æ”¹build-gradleä¸­çš„é…ç½®ï¼Œä»¥ä¾¿æ‰“ä¸åŒæµ‹è¯•ç±»å‹çš„åŒ…" class="headerlink" title="ä¿®æ”¹build.gradleä¸­çš„é…ç½®ï¼Œä»¥ä¾¿æ‰“ä¸åŒæµ‹è¯•ç±»å‹çš„åŒ…"></a>ä¿®æ”¹build.gradleä¸­çš„é…ç½®ï¼Œä»¥ä¾¿æ‰“ä¸åŒæµ‹è¯•ç±»å‹çš„åŒ…</h5><blockquote><p>ä¸ºäº†åœ¨æµ‹è¯•æœºä¸ŠåŒæ—¶å®‰è£…æµ‹è¯•ç‰ˆå’Œé¢„å‘å¸ƒç‰ˆçš„appåŒ…ï¼Œæˆ‘ä»¬éœ€è¦åœ¨<code>Android/app/build.gradle</code>ä¸­é…ç½®å¯¹åº”åŒ…çš„applicationIdåç¼€ï¼Œåœ¨buildTypesä¸‹ä¿®æ”¹å¦‚ä¸‹ï¼š</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">buildTypes &#123;</span><br><span class="line">    <span class="comment"># å¼€å‘ç‰ˆçš„åŒ… æ²¡æœ‰é…ç½®çƒ­æ›´æ–°ï¼Œæ‰€ä»¥CODEPUSH_KEYçš„å€¼ä¸ºç©º</span></span><br><span class="line">    <span class="comment"># æ‰“åŒ…æ–¹æ³• react-native run-android --variant=debug --appIdSuffix=debug</span></span><br><span class="line">    debug &#123;</span><br><span class="line"></span><br><span class="line">        buildConfigField <span class="string">"String"</span>, <span class="string">"CODEPUSH_KEY"</span>, <span class="string">'""'</span></span><br><span class="line">        minifyEnabled enableProguardInReleaseBuilds</span><br><span class="line">        proguardFiles getDefaultProguardFile(<span class="string">"proguard-android.txt"</span>), <span class="string">"proguard-rules.pro"</span></span><br><span class="line">        applicationIdSuffix <span class="string">".debug"</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç°åº¦æµ‹è¯•ç‰ˆæœ¬çš„åŒ… CODEPUSH_KEYä¸ºæˆ‘ä»¬ä¹‹å‰åœ¨gradle.propertiesä¸­çš„ RELEASE_STAGING å€¼</span></span><br><span class="line">    <span class="comment"># æ‰“åŒ…æ–¹æ³• react-native run-android --variant=staging --appIdSuffix=staging</span></span><br><span class="line">    staging &#123;</span><br><span class="line"></span><br><span class="line">        matchingFallbacks = [<span class="string">'release'</span>, <span class="string">'debug'</span>]</span><br><span class="line">        buildConfigField <span class="string">"String"</span>, <span class="string">"CODEPUSH_KEY"</span>, RELEASE_STAGING</span><br><span class="line">        applicationIdSuffix <span class="string">".staging"</span></span><br><span class="line">        signingConfig signingConfigs.release</span><br><span class="line">        minifyEnabled enableProguardInReleaseBuilds</span><br><span class="line">        proguardFiles getDefaultProguardFile(<span class="string">"proguard-android.txt"</span>), <span class="string">"proguard-rules.pro"</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">#æ­£å¼ç‰ˆçš„åŒ… CODEPUSH_KEYä¸ºæˆ‘ä»¬ä¹‹å‰åœ¨gradle.propertiesä¸­çš„ RELEASE å€¼</span></span><br><span class="line">    release &#123;</span><br><span class="line">        </span><br><span class="line">        debuggable <span class="literal">false</span> // æ˜¯å¦debug</span><br><span class="line">        aaptOptions.cruncherEnabled = <span class="literal">false</span> // ç¦æ­¢Gradleæ£€æŸ¥PNGçš„åˆæ³•æ€§</span><br><span class="line">        buildConfigField <span class="string">"String"</span>, <span class="string">"CODEPUSH_KEY"</span>, RELEASE</span><br><span class="line">        signingConfig signingConfigs.release</span><br><span class="line">        minifyEnabled enableProguardInReleaseBuilds</span><br><span class="line">        proguardFiles getDefaultProguardFile(<span class="string">"proguard-android.txt"</span>), <span class="string">"proguard-rules.pro"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="åœ¨MainApplicationä¸­ä¿®æ”¹å¦‚ä¸‹ä»£ç "><a href="#åœ¨MainApplicationä¸­ä¿®æ”¹å¦‚ä¸‹ä»£ç " class="headerlink" title="åœ¨MainApplicationä¸­ä¿®æ”¹å¦‚ä¸‹ä»£ç "></a>åœ¨<code>MainApplication</code>ä¸­ä¿®æ”¹å¦‚ä¸‹ä»£ç </h5><blockquote><p><code>YOUR_SERVER_URL</code>ä¸ºçƒ­æ›´æ–°æœåŠ¡å™¨çš„åœ°å€ï¼Œé€šè¿‡æ”¹åœ°å€å¯ä»¥è®¿é—®åˆ°ä½ çš„code-push-serveræœåŠ¡</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">new CodePush(BuildConfig.CODEPUSH_KEY, getApplicationContext(), BuildConfig.DEBUG,&lt;YOUR_SERVER_URL&gt;),</span><br></pre></td></tr></table></figure><h4 id="IOS"><a href="#IOS" class="headerlink" title="IOS"></a>IOS</h4><blockquote><p>ä¸åœ¨androidä¸Šçš„é…ç½®ç›¸ä¼¼ï¼Œæˆ‘ä»¬åŒæ ·è¦ç»™iOSé…ç½®ä¸‰ä¸ªç‰ˆæœ¬çš„åŒ…åï¼š<code>debugã€staging(beta)ã€release</code>ã€‚é¡¹ç›®åˆå§‹åŒ–æ—¶å·²ç»å­˜åœ¨<code>debug</code>å’Œ<code>release</code>ç‰ˆæœ¬ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦æ·»åŠ <code>staging</code>ç±»å‹</p></blockquote><h5 id="æ·»åŠ ç°åº¦æµ‹è¯•ç‰ˆæœ¬staging"><a href="#æ·»åŠ ç°åº¦æµ‹è¯•ç‰ˆæœ¬staging" class="headerlink" title="æ·»åŠ ç°åº¦æµ‹è¯•ç‰ˆæœ¬staging"></a>æ·»åŠ ç°åº¦æµ‹è¯•ç‰ˆæœ¬staging</h5><ol><li>åœ¨é¡¹ç›®çš„<code>PROJECT-Info</code>çš„<code>Configurations</code>é‡Œé¢ç‚¹å‡»<code>+</code>é€‰æ‹©<code>Duplicate &quot;Release&quot; Configuration</code>, å¹¶ä¸”ç»™ä¸€ä¸ªåå­—ï¼Œæˆ‘è¿™é‡Œç»™äº†ä¸ªStagingï¼Œå¦‚å›¾ï¼š</li></ol><p><img src="https://upload-images.jianshu.io/upload_images/2419788-5d1006e95d983101.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp" alt="æ·»åŠ staging"></p><ol start="2"><li><p>åœ¨<code>PROJECT-Build setting-Per-configuration Build Products path-Staging</code>é‡Œé¢æ”¹æˆ<code>$(BUILD_DIR)/Release$(EFFECTIVE_PLATFORM_NAME)</code></p></li><li><p>ç„¶ååœ¨é¡¹ç›®çš„<code>PROJECT-Build Setting</code>é‡Œé¢ç‚¹å‡»<code>+</code>é€‰æ‹©<code>Add User-Defined Setting</code>ï¼Œåˆ›å»ºå¥½ä¹‹åèµ·ä¸ªåå­—ï¼Œè¿™é‡Œå«<code>CODEPUSH_KEY</code>, ç„¶ååœ¨<code>Release</code>å’Œ<code>Staging</code>é‡Œé¢åˆ†åˆ«å†™ä¸Šcode-push-serverä¸­æ·»åŠ çš„é¡¹ç›®åç”Ÿæˆçš„Productionå’ŒStagingå¯¹åº”çš„keyå€¼,å¦‚å›¾ï¼š</p></li></ol><p><img src="https://upload-images.jianshu.io/upload_images/2419788-a165590ecb7d474f.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp" alt="æ·»åŠ keyå€¼"></p><h5 id="ç»™é¡¹ç›®åç§°æ·»åŠ åç¼€"><a href="#ç»™é¡¹ç›®åç§°æ·»åŠ åç¼€" class="headerlink" title="ç»™é¡¹ç›®åç§°æ·»åŠ åç¼€"></a>ç»™é¡¹ç›®åç§°æ·»åŠ åç¼€</h5><blockquote><p>ä¸ºäº†ä½¿é¡¹ç›®åœ¨æ‰“åŒ…åæ–¹ä¾¿åŒºåˆ†æ‰“åŒ…çš„ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é¡¹ç›®åç§°åé¢åŠ ä¸Šå¯¹åº”çš„åç¼€ï¼š</p></blockquote><ol><li>ç„¶ååœ¨é¡¹ç›®çš„<code>PROJECT-Build Setting</code>é‡Œé¢ç‚¹å‡»<code>+</code>é€‰æ‹©<code>Add User-Defined Setting</code>ï¼Œåˆ›å»ºå¥½ä¹‹åèµ·ä¸ªåå­—ï¼Œè¿™é‡Œå«<code>BUNDLE_DISPLAY_NAME_SUFFIX</code>, ç„¶ååœ¨<code>Debug</code>åé¢å†™ä¸Š<code>-Debug</code>,åœ¨<code>Staging</code>åé¢å†™ä¸Š<code>-Beta</code>,å¦‚å›¾ï¼š</li></ol><p><img src="https://github.com/gofugui/hexo/blob/master/source/images/4B1D1B79-8D21-48E2-BFEF-254EC365BED6.png?raw=true" alt="åç¼€"></p><ol start="2"><li>åœ¨Info.plisté‡Œé¢åŠ ä¸Šåˆšæ‰é…ç½®å¥½çš„åç¼€ï¼Œå¦‚å›¾ï¼š</li></ol><p><img src="https://github.com/gofugui/hexo/blob/master/source/images/32B48110-9016-48AC-9598-14FF3FAB6E6A.png?raw=true" alt="Info.plisté…ç½®"></p><h3 id="åœ¨react-nativeç«¯é…ç½®æ›´æ–°çš„åº”ç”¨æ—¶æœº"><a href="#åœ¨react-nativeç«¯é…ç½®æ›´æ–°çš„åº”ç”¨æ—¶æœº" class="headerlink" title="åœ¨react-nativeç«¯é…ç½®æ›´æ–°çš„åº”ç”¨æ—¶æœº"></a>åœ¨react-nativeç«¯é…ç½®æ›´æ–°çš„åº”ç”¨æ—¶æœº</h3><ul><li>Silent sync on app start (the simplest, default behavior)</li></ul><blockquote><p>è¿™ç§æ–¹å¼ä¼šè‡ªåŠ¨ä»æœåŠ¡å™¨ä¸‹è½½å¯ç”¨çš„æ›´æ–°ï¼Œå¹¶ä¸”åœ¨åº”ç”¨ä¸‹æ¬¡å¯åŠ¨çš„æ—¶å€™åº”ç”¨æ›´æ–°ï¼Œæ•´ä¸ªè¿‡ç¨‹ç”¨æˆ·æ˜¯æ— æ„ŸçŸ¥çš„ã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Fully silent update which keeps the app in</span></span><br><span class="line"><span class="comment"># sync with the server, without ever</span></span><br><span class="line"><span class="comment"># interrupting the end user</span></span><br><span class="line">class MyApp extends Component&lt;&#123;&#125;&gt; &#123;&#125;</span><br><span class="line">MyApp = codePush(MyApp);</span><br><span class="line"><span class="built_in">export</span> default MyApp;</span><br></pre></td></tr></table></figure><ul><li>Silent sync everytime the app resumes</li></ul><blockquote><p>å½“åº”ç”¨è¿›å…¥åå°æ—¶ï¼Œä¼šä»æœåŠ¡å™¨æ£€æµ‹æ˜¯å¦æœ‰å¯ç”¨çš„æ›´æ–°ï¼Œå¹¶ä¸‹è½½æ›´æ–°ï¼Œå½“åº”ç”¨å†æ¬¡ä»åå°è¢«å”¤é†’çš„æ—¶å€™åº”ç”¨æ›´æ–°</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Sync for updates everytime the app resumes.</span></span><br><span class="line">class MyApp extends Component&lt;&#123;&#125;&gt; &#123;&#125;</span><br><span class="line">MyApp = codePush(&#123; checkFrequency: codePush.CheckFrequency.ON_APP_RESUME, installMode: codePush.InstallMode.ON_NEXT_RESUME &#125;)(MyApp);</span><br><span class="line"><span class="built_in">export</span> default MyApp;</span><br></pre></td></tr></table></figure><ul><li>Interactive</li></ul><blockquote><p>äº¤äº’å¼æ›´æ–°ã€‚åªæœ‰å½“ç”¨æˆ·è¿›è¡Œé€‰æ‹©æ£€æŸ¥æ›´æ–°å¹¶ç¡®è®¤åæ‰ä¸‹è½½å’Œç«‹å³åº”ç”¨æ›´æ–°åŒ…</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Active update, which lets the end user know</span></span><br><span class="line"><span class="comment"># about each update, and displays it to them</span></span><br><span class="line"><span class="comment"># immediately after downloading it</span></span><br><span class="line">class MyApp extends Component&lt;&#123;&#125;&gt; &#123;&#125;</span><br><span class="line">MyApp = codePush(&#123; updateDialog: <span class="literal">true</span>, installMode: codePush.InstallMode.IMMEDIATE &#125;)(MyApp);</span><br><span class="line"><span class="built_in">export</span> default MyApp;</span><br></pre></td></tr></table></figure><ul><li>Log/display progress</li></ul><blockquote><p>æ˜¾ç¤ºæ›´æ–°çš„è¿›åº¦ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¦‚ä¸‹çš„æ–¹æ³•</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Make use of the event hooks to keep track of</span></span><br><span class="line"><span class="comment"># the different stages of the sync process.</span></span><br><span class="line">class MyApp extends Component&lt;&#123;&#125;&gt; &#123;</span><br><span class="line">    codePushStatusDidChange(status) &#123;</span><br><span class="line">        switch(status) &#123;</span><br><span class="line">            <span class="keyword">case</span> codePush.SyncStatus.CHECKING_FOR_UPDATE:</span><br><span class="line">                console.log(<span class="string">"Checking for updates."</span>);</span><br><span class="line">                <span class="built_in">break</span>;</span><br><span class="line">            <span class="keyword">case</span> codePush.SyncStatus.DOWNLOADING_PACKAGE:</span><br><span class="line">                console.log(<span class="string">"Downloading package."</span>);</span><br><span class="line">                <span class="built_in">break</span>;</span><br><span class="line">            <span class="keyword">case</span> codePush.SyncStatus.INSTALLING_UPDATE:</span><br><span class="line">                console.log(<span class="string">"Installing update."</span>);</span><br><span class="line">                <span class="built_in">break</span>;</span><br><span class="line">            <span class="keyword">case</span> codePush.SyncStatus.UP_TO_DATE:</span><br><span class="line">                console.log(<span class="string">"Up-to-date."</span>);</span><br><span class="line">                <span class="built_in">break</span>;</span><br><span class="line">            <span class="keyword">case</span> codePush.SyncStatus.UPDATE_INSTALLED:</span><br><span class="line">                console.log(<span class="string">"Update installed."</span>);</span><br><span class="line">                <span class="built_in">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    codePushDownloadDidProgress(progress) &#123;</span><br><span class="line">        console.log(progress.receivedBytes + <span class="string">" of "</span> + progress.totalBytes + <span class="string">" received."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">MyApp = codePush(MyApp);</span><br><span class="line"><span class="built_in">export</span> default MyApp;</span><br></pre></td></tr></table></figure><h3 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h3><h4 id="1-react-native-code-pushçƒ­æ›´æ–°ä¸appç‰ˆæœ¬çš„å…³ç³»"><a href="#1-react-native-code-pushçƒ­æ›´æ–°ä¸appç‰ˆæœ¬çš„å…³ç³»" class="headerlink" title="1.react-native-code-pushçƒ­æ›´æ–°ä¸appç‰ˆæœ¬çš„å…³ç³»"></a>1.react-native-code-pushçƒ­æ›´æ–°ä¸appç‰ˆæœ¬çš„å…³ç³»</h4><ul><li>android</li></ul><blockquote><p>androidåœ¨code-pushå‘å¸ƒæ›´æ–°çš„æ—¶å€™ï¼Œç‰ˆæœ¬ç‹¬ç«‹ä¸å½±å“çš„ä½æ•°æ˜¯<code>ä¸¤ä½æ•°</code>ã€‚</p></blockquote><p>  ä¸¾ä¾‹è¯´æ˜ï¼š</p><blockquote><p>  a. versionNameä¸º2.1ï¼Œå’ŒversionNameä¸º2.2çš„ä¸¤ä¸ªappç‰ˆæœ¬,å½“versionName=2.2çš„appå‘å¸ƒcodepushæ›´æ–°çš„æ—¶å€™ï¼Œå—å½±å“çš„åªæœ‰2.2 å’Œ2.2.Xï¼ŒXä¸ºæ­£æ•´æ•°ã€‚versionName=2.1æ˜¯ä¸ä¼šæ”¶åˆ°ä»»ä½•å½±å“çš„ï¼Œæ‰€ä»¥åç»­å°±éœ€è¦åˆ›å»ºä¸¤æ¡çº¿è·¯å¯¹ä¸åŒçš„ç‰ˆæœ¬è¿›è¡Œç»´æŠ¤ã€‚</p></blockquote><blockquote><p>   b. ç”±aå¯ä»¥çŸ¥é“ï¼ŒversionName=2.2.1å’ŒversionName=2.2.2ä¸¤ä¸ªç‰ˆæœ¬åœ¨è·å–æ›´æ–°ä¸Šï¼Œè·å–çš„æ˜¯åŒä¸ªç‰ˆæœ¬,å½“versionName=2.2.2å‘å¸ƒæ›´æ–°çš„æ—¶å€™ï¼ŒversionName=2.2.1çš„appåŒæ ·ä¼šå—åˆ°å½±å“æ¥å—æ›´æ–°ã€‚</p></blockquote><blockquote><p>æ€»ç»“ï¼šä»ä»¥ä¸Šç‰¹æ€§ï¼Œæˆ‘ä»¬ä¸»è¦å°†è¿™ä¸ªåŠŸèƒ½ç”¨åœ¨å°ç‰ˆæœ¬æ›´æ–°ï¼Œæˆ–è€…bugä¿®å¤ä¸Šã€‚versionName = X.Y.Zçš„ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦å‘å¸ƒåˆ°åº”ç”¨å¸‚åœºçš„è½¯ä»¶ä¸€èˆ¬éƒ½æ˜¯æ”¹å˜ï¼šX.Yçš„å€¼ã€‚å¯¹äºåˆ›ä¸šå…¬å¸æ¥è¯´ï¼Œè¦ç»´æŠ¤å¤šä¸ªè½¯ä»¶ç‰ˆæœ¬æˆæœ¬æ˜¯éå¸¸é«˜çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿæ˜¯å°½é‡è¦æ±‚ç”¨æˆ·å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬ã€‚</p></blockquote><ul><li>ios</li></ul><blockquote><p>IOSåœ¨codepushå‘å¸ƒæ›´æ–°æ—¶ï¼Œç‰ˆæœ¬ç‹¬ç«‹ä¸å½±å“çš„ä½æ•°æ˜¯<code>ä¸‰ä½æ•°</code>ã€‚å³iOSç‰ˆæœ¬éƒ½æ˜¯ç‹¬ç«‹ä¸å½±å“ï¼Œversion=X.Y.Zï¼Œå½“codepushå‘å¸ƒæ›´æ–°æ—¶ï¼Œåªä¼šå½±å“ä¸å…¶X.Y.Zä¸‰ä½æ•°å®Œå…¨ç›¸åŒçš„ç‰ˆæœ¬ã€‚</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;å…¬å¸ä¸»æ‰“çš„ä¸€æ¬¾æ–°é¡¹ç›®ï¼Œä¸ºäº†æ»¡è¶³å¿«é€Ÿè¿­ä»£çš„éœ€è¦ï¼Œä½¿ç”¨rnè¿›è¡Œå¼€å‘ï¼Œé¡¹ç›®ä¸­ä½¿ç”¨åˆ°äº†å¾®è½¯çš„code-pushçƒ­æ›´æ–°åŠŸèƒ½ï¼Œåœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹çƒ­æ›´æ–°çš„é›†æˆè¿‡ç¨‹ï¼Œä»¥åŠæ³¨æ„ç‚¹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;react-native-çƒ­æ›´æ–°éœ€è¦</summary>
      
    
    
    
    <category term="code-push çƒ­æ›´æ–°æ„å»ºè¯´æ˜" scheme="https://gofugui.github.io/categories/code-push-çƒ­æ›´æ–°æ„å»ºè¯´æ˜/"/>
    
    
    <category term="çƒ­æ›´æ–°" scheme="https://gofugui.github.io/tags/çƒ­æ›´æ–°/"/>
    
  </entry>
  
  <entry>
    <title>Git å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥è¡¨</title>
    <link href="https://gofugui.github.io/2019/11/10/Git-doc/"/>
    <id>https://gofugui.github.io/2019/11/10/Git-doc/</id>
    <published>2019-11-09T16:00:00.000Z</published>
    <updated>2021-04-19T02:18:32.886Z</updated>
    
    <content type="html"><![CDATA[<h3 id="git-å¸¸ç”¨æœ¯è¯­"><a href="#git-å¸¸ç”¨æœ¯è¯­" class="headerlink" title="git å¸¸ç”¨æœ¯è¯­"></a>git å¸¸ç”¨æœ¯è¯­</h3><ul><li>master        é»˜è®¤å¼€å‘åˆ†æ”¯</li><li>origin        é»˜è®¤è¿œç¨‹ç‰ˆæœ¬åº“</li><li>Index/Stage   æš‚å­˜åŒº</li><li>Workspace     å·¥ä½œåŒº</li><li>Repository    ä»“åº“åŒºï¼ˆæˆ–æœ¬åœ°ä»“åº“ï¼‰</li><li>Remote        è¿œç¨‹ä»“åº“</li></ul><h3 id="git-åˆ›å»ºä»£ç åº“"><a href="#git-åˆ›å»ºä»£ç åº“" class="headerlink" title="git åˆ›å»ºä»£ç åº“"></a>git åˆ›å»ºä»£ç åº“</h3><h4 id="åœ¨å½“å‰ç›®å½•æ–°å»ºä¸€ä¸ªgitä»£ç åº“"><a href="#åœ¨å½“å‰ç›®å½•æ–°å»ºä¸€ä¸ªgitä»£ç åº“" class="headerlink" title="åœ¨å½“å‰ç›®å½•æ–°å»ºä¸€ä¸ªgitä»£ç åº“"></a>åœ¨å½“å‰ç›®å½•æ–°å»ºä¸€ä¸ªgitä»£ç åº“</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git init </span><br><span class="line">$ git add README.md</span><br><span class="line">$ git commit -m <span class="string">"first commit"</span></span><br><span class="line"><span class="comment"># é“¾æ¥è¿œç¨‹ä»“åº“</span></span><br><span class="line">$ git remote add origin ã€è¿œç¨‹ä»“åº“åœ°å€ã€‘</span><br><span class="line">$ git push -u origin master</span><br><span class="line">$</span><br></pre></td></tr></table></figure><h4 id="å·²æœ‰æœ¬åœ°ä»“ï¼Œé“¾æ¥è¿œç¨‹ä»“åº“"><a href="#å·²æœ‰æœ¬åœ°ä»“ï¼Œé“¾æ¥è¿œç¨‹ä»“åº“" class="headerlink" title="å·²æœ‰æœ¬åœ°ä»“ï¼Œé“¾æ¥è¿œç¨‹ä»“åº“"></a>å·²æœ‰æœ¬åœ°ä»“ï¼Œé“¾æ¥è¿œç¨‹ä»“åº“</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git remote add origin ã€è¿œç¨‹ä»“åº“åœ°å€ã€‘</span><br><span class="line">$ git push -u origin master</span><br></pre></td></tr></table></figure><h4 id="æŒ‡å®šä¸€ä¸ªç›®å½•ï¼Œå°†å…¶åˆå§‹åŒ–ä¸ºgitä»£ç åº“"><a href="#æŒ‡å®šä¸€ä¸ªç›®å½•ï¼Œå°†å…¶åˆå§‹åŒ–ä¸ºgitä»£ç åº“" class="headerlink" title="æŒ‡å®šä¸€ä¸ªç›®å½•ï¼Œå°†å…¶åˆå§‹åŒ–ä¸ºgitä»£ç åº“"></a>æŒ‡å®šä¸€ä¸ªç›®å½•ï¼Œå°†å…¶åˆå§‹åŒ–ä¸ºgitä»£ç åº“</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git init [project-name]</span><br></pre></td></tr></table></figure><h4 id="ä¸‹è½½ä¸€ä¸ªé¡¹ç›®å’Œå®ƒçš„æ•´ä¸ªä»£ç å†å²"><a href="#ä¸‹è½½ä¸€ä¸ªé¡¹ç›®å’Œå®ƒçš„æ•´ä¸ªä»£ç å†å²" class="headerlink" title="ä¸‹è½½ä¸€ä¸ªé¡¹ç›®å’Œå®ƒçš„æ•´ä¸ªä»£ç å†å²"></a>ä¸‹è½½ä¸€ä¸ªé¡¹ç›®å’Œå®ƒçš„æ•´ä¸ªä»£ç å†å²</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> [url]</span><br></pre></td></tr></table></figure><h4 id="ä¸‹è½½ä¸€ä¸ªé¡¹ç›®å’Œä»–æœ€è¿‘ä¸€æ¬¡çš„æäº¤-å½“è¦å…‹éš†çš„é¡¹ç›®è¿‡å¤§ï¼Œå‡ºç°TimeOuté—®é¢˜æ—¶è°¨æ…ä½¿ç”¨"><a href="#ä¸‹è½½ä¸€ä¸ªé¡¹ç›®å’Œä»–æœ€è¿‘ä¸€æ¬¡çš„æäº¤-å½“è¦å…‹éš†çš„é¡¹ç›®è¿‡å¤§ï¼Œå‡ºç°TimeOuté—®é¢˜æ—¶è°¨æ…ä½¿ç”¨" class="headerlink" title="ä¸‹è½½ä¸€ä¸ªé¡¹ç›®å’Œä»–æœ€è¿‘ä¸€æ¬¡çš„æäº¤(å½“è¦å…‹éš†çš„é¡¹ç›®è¿‡å¤§ï¼Œå‡ºç°TimeOuté—®é¢˜æ—¶è°¨æ…ä½¿ç”¨ )"></a>ä¸‹è½½ä¸€ä¸ªé¡¹ç›®å’Œä»–æœ€è¿‘ä¸€æ¬¡çš„æäº¤(å½“è¦å…‹éš†çš„é¡¹ç›®è¿‡å¤§ï¼Œå‡ºç°TimeOuté—®é¢˜æ—¶è°¨æ…ä½¿ç”¨ )</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> --depth 1 [url]</span><br></pre></td></tr></table></figure><blockquote><p>è¿™ç§æ–¹æ³•å…‹éš†çš„é¡¹ç›®åªåŒ…å«æœ€è¿‘commitçš„ä¸€ä¸ªåˆ†æ”¯ï¼Œä½“ç§¯å¾ˆå°ï¼Œä½†ä¼šäº§ç”Ÿå¦å¤–ä¸€ä¸ªé—®é¢˜ï¼Œä»–åªä¼šæŠŠé»˜è®¤åˆ†æ”¯cloneä¸‹æ¥ï¼Œå…¶ä»–è¿œç¨‹åˆ†æ”¯å¹¶ä¸åœ¨æœ¬åœ°ï¼Œæ‰€ä»¥è¿™ç§æƒ…å†µä¸‹ï¼Œéœ€è¦ç”¨å¦‚ä¸‹æ–¹æ³•æ‹‰å–å…¶ä»–åˆ†æ”¯ï¼š</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git remote <span class="built_in">set</span>-branches origin [remote_branch_name]</span><br><span class="line">$ git fetch --depth 1 origin [remote_branch_name]</span><br><span class="line">$ git checkout [remote_branch_name]</span><br></pre></td></tr></table></figure><h3 id="git-é…ç½®ä¿¡æ¯"><a href="#git-é…ç½®ä¿¡æ¯" class="headerlink" title="git é…ç½®ä¿¡æ¯"></a>git é…ç½®ä¿¡æ¯</h3><blockquote><p>Gitçš„è®¾ç½®æ–‡ä»¶ä¸º.gitconfigï¼Œå®ƒå¯ä»¥åœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹ï¼ˆå…¨å±€é…ç½®ï¼‰ï¼Œä¹Ÿå¯ä»¥åœ¨é¡¹ç›®ç›®å½•ä¸‹ï¼ˆé¡¹ç›®é…ç½®ï¼‰ã€‚</p></blockquote><h4 id="æ˜¾ç¤ºå½“å‰çš„gité…ç½®ä¿¡æ¯"><a href="#æ˜¾ç¤ºå½“å‰çš„gité…ç½®ä¿¡æ¯" class="headerlink" title="æ˜¾ç¤ºå½“å‰çš„gité…ç½®ä¿¡æ¯"></a>æ˜¾ç¤ºå½“å‰çš„gité…ç½®ä¿¡æ¯</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --list</span><br></pre></td></tr></table></figure><h4 id="ç¼–è¾‘gité…ç½®æ–‡ä»¶"><a href="#ç¼–è¾‘gité…ç½®æ–‡ä»¶" class="headerlink" title="ç¼–è¾‘gité…ç½®æ–‡ä»¶"></a>ç¼–è¾‘gité…ç½®æ–‡ä»¶</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config -e [--global]</span><br></pre></td></tr></table></figure><h4 id="è®¾ç½®æäº¤ä»£ç çš„ç”¨æˆ·ä¿¡æ¯"><a href="#è®¾ç½®æäº¤ä»£ç çš„ç”¨æˆ·ä¿¡æ¯" class="headerlink" title="è®¾ç½®æäº¤ä»£ç çš„ç”¨æˆ·ä¿¡æ¯"></a>è®¾ç½®æäº¤ä»£ç çš„ç”¨æˆ·ä¿¡æ¯</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git config [--global] user.name  <span class="string">"[name]"</span></span><br><span class="line">$ git config [--global] user.email <span class="string">"[email address]"</span></span><br></pre></td></tr></table></figure><h3 id="git-å¸¸ç”¨å‘½ä»¤"><a href="#git-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="git å¸¸ç”¨å‘½ä»¤"></a>git å¸¸ç”¨å‘½ä»¤</h3><h4 id="å¢åŠ ã€åˆ é™¤ã€ä¿®æ”¹æ–‡ä»¶"><a href="#å¢åŠ ã€åˆ é™¤ã€ä¿®æ”¹æ–‡ä»¶" class="headerlink" title="å¢åŠ ã€åˆ é™¤ã€ä¿®æ”¹æ–‡ä»¶"></a>å¢åŠ ã€åˆ é™¤ã€ä¿®æ”¹æ–‡ä»¶</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æŸ¥çœ‹åˆ†æ”¯ä¸‹æ–‡ä»¶çŠ¶æ€</span></span><br><span class="line">$ git status   </span><br><span class="line"><span class="comment">#æŸ¥çœ‹å˜æ›´å†…å®¹ </span></span><br><span class="line">$ git diff      </span><br><span class="line"><span class="comment">#æ·»åŠ æŒ‡å®šæ–‡ä»¶åˆ°æš‚å­˜åŒº</span></span><br><span class="line">$ git add [file1] [file2] ... </span><br><span class="line"><span class="comment">#æ·»åŠ æŒ‡å®šç›®å½•åˆ°æš‚å­˜åŒºï¼ŒåŒ…æ‹¬å­ç›®å½•</span></span><br><span class="line">$ git add [dir] </span><br><span class="line"><span class="comment">#æ·»åŠ å½“å‰ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶åˆ°æš‚å­˜åŒº</span></span><br><span class="line">$ git add .     </span><br><span class="line"><span class="comment">#æ·»åŠ æ¯ä¸ªå˜åŒ–å‰ï¼Œéƒ½ä¼šè¦æ±‚ç¡®è®¤</span></span><br><span class="line"><span class="comment">#å¯¹äºåŒä¸€ä¸ªæ–‡ä»¶çš„å¤šæ¬¡å˜åŒ–ï¼Œå¯ä»¥å®ç°åˆ†æ¬¡æäº¤</span></span><br><span class="line">$ git add -p    </span><br><span class="line"><span class="comment">#åˆ é™¤å·¥ä½œåŒºæ–‡ä»¶ï¼Œå¹¶ä¸”å°†è¿™æ¬¡åˆ é™¤æ”¾å…¥æš‚å­˜åŒº</span></span><br><span class="line">$ git rm [file1] [file2] ...</span><br><span class="line"><span class="comment">#åœæ­¢è¿½è¸ªæŒ‡å®šæ–‡ä»¶ï¼Œä½†è¯¥æ–‡ä»¶ä¼šä¿ç•™åœ¨å·¥ä½œåŒº</span></span><br><span class="line">$ git rm --cached [file] </span><br><span class="line"><span class="comment">#å¼ºåˆ¶åœæ­¢</span></span><br><span class="line">$ git rm -f --cached [file]</span><br><span class="line"><span class="comment">#æ›´æ”¹æ–‡ä»¶åï¼Œå¹¶å°†æ”¹åæ”¾å…¥æš‚å­˜åŒº</span></span><br><span class="line">$ git mv [file-originName] [file-newName]</span><br></pre></td></tr></table></figure><h4 id="git-ä»£ç æäº¤"><a href="#git-ä»£ç æäº¤" class="headerlink" title="git ä»£ç æäº¤"></a>git ä»£ç æäº¤</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æäº¤æš‚å­˜åŒºåˆ°ä»“åº“</span></span><br><span class="line">$ git commit -m [message]</span><br><span class="line"><span class="comment">#æäº¤æš‚å­˜åŒºæŒ‡å®šæ–‡ä»¶åˆ°ä»“åº“</span></span><br><span class="line">$ git commit [file1] [file2] ... -m [message]</span><br><span class="line"><span class="comment">#æäº¤å·¥ä½œåŒºè‡ªä¸Šæ¬¡commitä¹‹åçš„å˜åŒ–ï¼Œç›´æ¥åˆ°ä»“åº“åŒº</span></span><br><span class="line">$ git commit -a</span><br><span class="line"><span class="comment">#æäº¤æäº¤æ—¶æ˜¾ç¤ºæ‰€æœ‰diffä¿¡æ¯</span></span><br><span class="line">$ git commit -v</span><br><span class="line"><span class="comment">#ä½¿ç”¨ä¸€æ¬¡æ–°çš„commitï¼Œä»£æ›¿ä¸Šæ¬¡æäº¤</span></span><br><span class="line"><span class="comment">#å¦‚æœä»£ç æ²¡æœ‰ä»»ä½•å˜åŒ–ï¼Œåˆ™ç”¨æ¥æ”¹å†™ä¸Šä¸€æ¬¡çš„æäº¤ä¿¡æ¯</span></span><br><span class="line">$ git commit --amend -m [message]</span><br><span class="line"><span class="comment">#ä½¿ç”¨ä¸€æ¬¡æ–°çš„commitï¼ŒæŒ‡å®šæ–‡ä»¶ï¼Œä»£æ›¿ä¸Šæ¬¡æäº¤</span></span><br><span class="line">$ git commit --amend [file1] [file2] ...</span><br></pre></td></tr></table></figure><h4 id="git-åˆ†æ”¯"><a href="#git-åˆ†æ”¯" class="headerlink" title="git åˆ†æ”¯"></a>git åˆ†æ”¯</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ˜¾ç¤ºæ‰€æœ‰åˆ†æ”¯</span></span><br><span class="line">$ git branch</span><br><span class="line"><span class="comment">#åˆ—å‡ºæ‰€æœ‰åˆ†æ”¯</span></span><br><span class="line">$ git branch -r</span><br><span class="line"><span class="comment">#åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯</span></span><br><span class="line">$ git branch -a</span><br><span class="line"><span class="comment">#æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œä½†ä¾ç„¶åœç•™åœ¨å½“å‰åˆ†æ”¯</span></span><br><span class="line">$ git branch [branch-name]</span><br><span class="line"><span class="comment">#æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œä¸æŒ‡å®šçš„è¿œç¨‹åˆ†æ”¯å»ºç«‹è¿½è¸ªå…³ç³»</span></span><br><span class="line">$ git branch --track [branch] [remote-beanch]</span><br><span class="line"><span class="comment">#åˆ é™¤åˆ†æ”¯</span></span><br><span class="line">$ git branch -d [branch-name]</span><br><span class="line"><span class="comment">#åˆ é™¤è¿œç¨‹åˆ†æ”¯</span></span><br><span class="line">$ git push origin --delete [branch-name]</span><br><span class="line">$ git branch -dr [remote-branch]</span><br><span class="line"><span class="comment">#æ–°å»ºä¸€ä¸ªåˆ†æ”¯å¹¶åˆ‡æ¢åˆ°è¿™ä¸ªåˆ†æ”¯</span></span><br><span class="line">$ git checkout -b [branch]</span><br><span class="line"><span class="comment">#åŸºäºç°æœ‰åˆ†æ”¯åˆ›å»ºä¸€ä¸ªåˆ†æ”¯</span></span><br><span class="line">$ git checkout -b [new-branch] [origin-branch]</span><br><span class="line"><span class="comment">#åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯ï¼Œå¹¶æ›´æ–°å·¥ä½œåŒº</span></span><br><span class="line">$ git checkout [branch-name]</span><br><span class="line"><span class="comment">#åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªåˆ†æ”¯</span></span><br><span class="line">$ git checkout -</span><br><span class="line"><span class="comment">#å»ºç«‹è¿½è¸ªå…³ç³»ï¼Œåœ¨ç°æœ‰åˆ†æ”¯åˆ°è¿œç¨‹åˆ†æ”¯ä¹‹é—´</span></span><br><span class="line">$ git branch --<span class="built_in">set</span>-upstream [branch] [remote-branch]</span><br><span class="line"><span class="comment">#åˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯</span></span><br><span class="line">$ git merge [branch]</span><br><span class="line"><span class="comment">#è¡åˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯</span></span><br><span class="line">$ git rebase &lt;branch&gt;</span><br><span class="line"><span class="comment">#é€‰æ‹©ä¸€ä¸ªcommitåˆå¹¶è¿›å½“å‰åˆ†æ”¯</span></span><br><span class="line">$ git cherry-pick [commit]</span><br></pre></td></tr></table></figure><h3 id="git-æ ‡ç­¾"><a href="#git-æ ‡ç­¾" class="headerlink" title="git æ ‡ç­¾"></a>git æ ‡ç­¾</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åˆ—å‡ºæ‰€æœ‰æœ¬åœ°æ ‡ç­¾</span></span><br><span class="line">$ git tag</span><br><span class="line"><span class="comment">#åŸºäºæœ€æ–°æäº¤åˆ›å»ºæ ‡ç­¾</span></span><br><span class="line">$ git tag &lt;tagname&gt;</span><br><span class="line"><span class="comment">#åˆ é™¤æ ‡ç­¾</span></span><br><span class="line">$ git tag -d &lt;tagname&gt;</span><br><span class="line"><span class="comment">#åˆ é™¤è¿œç¨‹æ ‡ç­¾</span></span><br><span class="line">$ git push origin :refs/tags/[tagname]</span><br><span class="line"><span class="comment">#æŸ¥çœ‹tagä¿¡æ¯</span></span><br><span class="line">$ git show [tag]</span><br><span class="line"><span class="comment">#æäº¤æŒ‡å®štag</span></span><br><span class="line">$ git push [remote] [tag]</span><br><span class="line"><span class="comment">#æäº¤æ‰€æœ‰tag</span></span><br><span class="line">$ git push [remote] --tag</span><br><span class="line"><span class="comment">#æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼ŒæŒ‡å‘æŸä¸ªtag </span></span><br><span class="line">$ git checkout -b [branch] [tag]</span><br></pre></td></tr></table></figure><h3 id="git-æŸ¥çœ‹ä¿¡æ¯"><a href="#git-æŸ¥çœ‹ä¿¡æ¯" class="headerlink" title="git æŸ¥çœ‹ä¿¡æ¯"></a>git æŸ¥çœ‹ä¿¡æ¯</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æŸ¥çœ‹æ‰€æœ‰æ–‡ä»¶çš„å˜æ›´ä¿¡æ¯</span></span><br><span class="line">$ git status</span><br><span class="line"><span class="comment">#æ˜¾ç¤ºå½“å‰åˆ†æ”¯çš„ç‰ˆæœ¬å†å²</span></span><br><span class="line">$ git <span class="built_in">log</span></span><br><span class="line"><span class="comment">#æ˜¾ç¤ºcommitå†å²ï¼Œä»¥åŠæ¯æ¬¡commitå˜æ›´çš„æ–‡ä»¶</span></span><br><span class="line">$ git <span class="built_in">log</span> --<span class="built_in">stat</span></span><br><span class="line"><span class="comment">#æœç´¢æäº¤å†å²ï¼Œæ ¹æ®å…³é”®å­—</span></span><br><span class="line">$ git <span class="built_in">log</span> -S [keyword]</span><br><span class="line"><span class="comment">#æ˜¾ç¤ºæŸä¸ªcommitä¹‹åçš„æ‰€æœ‰å˜åŠ¨ï¼Œæ¯ä¸ªcommitå æ®ä¸€è¡Œ</span></span><br><span class="line">$ git <span class="built_in">log</span> [tag] HEAD --pretty=format:%s</span><br><span class="line"><span class="comment">#æ˜¾ç¤ºæŸä¸ªcommitä¹‹åçš„æ‰€æœ‰å˜åŠ¨ï¼Œæ¯ä¸ªcommitçš„â€˜æäº¤ä¿¡æ¯â€™å¿…é¡»ç¬¦åˆæœç´¢æ¡ä»¶</span></span><br><span class="line">$ git <span class="built_in">log</span> [tag] HEAD --grep feature</span><br><span class="line"><span class="comment">#æ˜¾ç¤ºæŸä¸ªæ–‡ä»¶çš„ç‰ˆæœ¬å†å²ï¼ŒåŒ…æ‹¬æ–‡ä»¶æ”¹å</span></span><br><span class="line">$ git <span class="built_in">log</span> --fellow [file]</span><br><span class="line">$ git whatchchange [file]</span><br><span class="line"><span class="comment">#æ˜¾ç¤ºæ–‡ä»¶ç›¸å…³çš„æ¯ä¸€æ¬¡diff</span></span><br><span class="line">$ git <span class="built_in">log</span> -p [file]</span><br><span class="line"><span class="comment">#æ˜¾ç¤ºè¿‡å»5æ¬¡æäº¤</span></span><br><span class="line">$ git <span class="built_in">log</span> -5 --pretty --online</span><br><span class="line"><span class="comment">#æ˜¾ç¤ºæ‰€æœ‰æäº¤è¿‡çš„ç”¨æˆ·ï¼ŒæŒ‰æäº¤æ¬¡æ•°æ’åº</span></span><br><span class="line">$ git shortlog -sn</span><br><span class="line"><span class="comment">#æ˜¾ç¤ºæ–‡ä»¶æ˜¯åœ¨ä»€ä¹ˆæ—¶å€™è¢«ä»€ä¹ˆäººä¿®æ”¹è¿‡</span></span><br><span class="line">$ git blame [file]</span><br><span class="line"><span class="comment">#æ˜¾ç¤ºæš‚å­˜åŒºå’Œå·¥ä½œåŒºçš„å·®å¼‚</span></span><br><span class="line">$ git diff</span><br><span class="line"><span class="comment">#æ˜¾ç¤ºæš‚å­˜åŒºå’Œä¸Šä¸€æ¬¡commitä¹‹é—´çš„å·®å¼‚</span></span><br><span class="line">$ git diff --cached [file]</span><br><span class="line"><span class="comment">#æ˜¾ç¤ºå·¥ä½œåŒºä¸ä¸å½“å‰åˆ†æ”¯æœ€æ–°ä¸€æ¬¡commitçš„å·®å¼‚</span></span><br><span class="line">$ git diff HEAD</span><br><span class="line"><span class="comment">#æ˜¾ç¤ºä¸¤æ¬¡æäº¤ä¹‹é—´çš„å·®å¼‚</span></span><br><span class="line">$ git diff [first-branch]...[second-branch]</span><br><span class="line"><span class="comment">#æ˜¾ç¤ºäº†ä»Šå¤©ä½ å†™äº†å¤šå°‘è¡Œä»£ç </span></span><br><span class="line">$ git diff --shortstart <span class="string">"@&#123;0 day ago&#125;"</span></span><br><span class="line"><span class="comment">#æ˜¾ç¤ºæŸæ¬¡æäº¤çš„å…ƒæ•°æ®å’Œå†…å®¹å˜åŒ–</span></span><br><span class="line">$ git show [commit]</span><br><span class="line"><span class="comment">#æ˜¾ç¤ºæŸæ¬¡æäº¤å†…å®¹å‘ç”Ÿå˜åŒ–çš„æ–‡ä»¶</span></span><br><span class="line">$ git show --name-only [commit]</span><br><span class="line"><span class="comment">#æ˜¾ç¤ºæäº¤æ—¶ï¼ŒæŸä¸ªæ–‡ä»¶çš„å†…å®¹</span></span><br><span class="line">$ git show [commit]:[filename]</span><br><span class="line"><span class="comment">#æ˜¾ç¤ºå½“å‰åˆ†æ”¯çš„æœ€è¿‘å‡ æ¬¡æäº¤çš„å†…å®¹</span></span><br><span class="line">$ git reflog</span><br></pre></td></tr></table></figure><h3 id="gitè¿œç¨‹æ“ä½œ"><a href="#gitè¿œç¨‹æ“ä½œ" class="headerlink" title="gitè¿œç¨‹æ“ä½œ"></a>gitè¿œç¨‹æ“ä½œ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä¸‹è½½è¿œç¨‹ä»“åº“çš„æ‰€æœ‰å˜åŠ¨</span></span><br><span class="line">$ git fetch [remote]</span><br><span class="line"><span class="comment">#å–å›è¿œç¨‹ä»“åº“çš„å˜åŒ–ï¼Œå¹¶ä¸æœ¬åœ°ä»“åº“åˆå¹¶</span></span><br><span class="line">$ git pull [remote] [branch]</span><br><span class="line"><span class="comment">#æ˜¾ç¤ºæ‰€æœ‰çš„è¿œç¨‹ä»“åº“</span></span><br><span class="line">$ git remote -v</span><br><span class="line"><span class="comment">#æ˜¾ç¤ºæŸä¸ªè¿œç¨‹ä»“åº“çš„ä¿¡æ¯</span></span><br><span class="line">$ git remote show [remote]</span><br><span class="line"><span class="comment">#æ–°å¢æŸä¸ªè¿œç¨‹ä»“åº“ï¼Œå¹¶å‘½å</span></span><br><span class="line">$ git remote add [short-name] [url]</span><br><span class="line"><span class="comment">#ä¸Šä¼ æœ¬åœ°æŒ‡å®šåˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“</span></span><br><span class="line">$ git push [remote] [branch]</span><br><span class="line"><span class="comment">#å¼ºè¡Œæ¨é€å½“å‰åˆ†æ”¯åˆ°æŒ‡å®šä»“åº“</span></span><br><span class="line">$ git push [remote] --force</span><br><span class="line"><span class="comment">#æ¨é€æ‰€æœ‰åˆ†æ”¯åˆ°æŒ‡å®šä»“åº“</span></span><br><span class="line">$ git push [remote] --all</span><br><span class="line"><span class="comment">#ä¸Šä¼ è¿œç¨‹åˆ†æ”¯å’Œæ ‡ç­¾</span></span><br><span class="line">$ git push &lt;remote&gt;:&lt;branch/tag-name&gt;</span><br><span class="line"><span class="comment">#ä¸Šä¼ æ‰€æœ‰æ ‡ç­¾</span></span><br><span class="line">$ git push --tag</span><br></pre></td></tr></table></figure><h3 id="git-æ’¤é”€"><a href="#git-æ’¤é”€" class="headerlink" title="git æ’¤é”€"></a>git æ’¤é”€</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ’¤é”€å·¥ä½œç›®å½•ä¸­ï¼Œæ‰€æœ‰æœªæäº¤æ–‡ä»¶çš„ä¿®æ”¹å†…å®¹</span></span><br><span class="line">$ git reset --hard HEAD </span><br><span class="line"><span class="comment">#æ’¤é”€æŒ‡å®šæ–‡ä»¶çš„ä¿®æ”¹å†…å®¹</span></span><br><span class="line">$ git checkout HEAD &lt;file&gt;</span><br><span class="line"><span class="comment">#æ’¤é”€æŒ‡å®šçš„æäº¤</span></span><br><span class="line">$ git revert &lt;commit&gt;</span><br><span class="line"><span class="comment">#é€€å›åˆ°ä¹‹å‰1å¤©çš„ç‰ˆæœ¬</span></span><br><span class="line">$ git <span class="built_in">log</span> --before=<span class="string">"1 days"</span></span><br><span class="line"><span class="comment">#æ¢å¤æš‚å­˜åŒºçš„æ–‡ä»¶åˆ°å·¥ä½œåŒº</span></span><br><span class="line">$ git checkout [file]</span><br><span class="line"><span class="comment">#æ¢å¤æŸä¸ªcommitçš„æŒ‡å®šæ–‡ä»¶åˆ°æš‚å­˜åŒºå’Œå·¥ä½œåŒº</span></span><br><span class="line">$ git checkout [commit] [file]</span><br><span class="line"><span class="comment">#æ¢å¤æš‚å­˜åŒºçš„æ‰€æœ‰æ–‡ä»¶åˆ°å·¥ä½œåŒº</span></span><br><span class="line">$ git checkout .</span><br><span class="line"><span class="comment">#é‡ç½®æš‚å­˜åŒºçš„æŒ‡å®šæ–‡ä»¶ï¼Œä¸ä¸Šä¸€æ¬¡commitä¸€è‡´ï¼Œä½†å·¥ä½œåŒºä¸å˜</span></span><br><span class="line">$ git reset [file]</span><br><span class="line"><span class="comment">#é‡ç½®æš‚å­˜åŒºå’Œå·¥ä½œåŒºï¼Œä¸ä¸Šä¸€æ¬¡commitä¸€è‡´</span></span><br><span class="line">$ git reset --hard</span><br><span class="line"><span class="comment">#!!!!!!è°¨æ…ä½¿ç”¨resetï¼Œå› ä¸ºresetä¼šæ¸…é™¤æ‰æŒ‡å®šcommitä¹‹åçš„commitè®°å½•ï¼Œé€šå¸¸revertæ›´å¸¸ç”¨</span></span><br><span class="line"><span class="comment">#é‡ç½®ä½†å‰åˆ†æ”¯çš„æŒ‡é’ˆä¸ºæŒ‡å®šcommitï¼ŒåŒæ—¶é‡ç½®æš‚å­˜åŒºï¼Œå·¥ä½œåŒºä¸å˜</span></span><br><span class="line">$ git reset [commit] </span><br><span class="line"><span class="comment">#é‡ç½®å½“å‰åˆ†æ”¯çš„HEADä¸ºæŒ‡å®šcommitï¼ŒåŒæ—¶é‡ç½®å·¥ä½œåŒºå’Œæš‚å­˜åŒºï¼Œä¸æŒ‡å®šçš„commitä¸€è‡´</span></span><br><span class="line">$ git reset --hard [commit]</span><br><span class="line"><span class="comment">#é‡ç½®å½“å‰åˆ†æ”¯çš„HEADä¸ºæŒ‡å®šcommitï¼Œä¿æŒå·¥ä½œåŒºå’Œæš‚å­˜åŒºä¸å˜</span></span><br><span class="line">$ git reset --keep [commit]</span><br><span class="line"><span class="comment">#æ–°å»ºä¸€ä¸ªcommitç”¨æ¥æ’¤é”€æŒ‡å®šcommit</span></span><br><span class="line"><span class="comment">#åè€…çš„æ‰€æœ‰å˜åŒ–éƒ½å°†è¢«æŠµæ¶ˆï¼Œå¹¶ä¸”åº”ç”¨åˆ°å½“å‰åˆ†æ”¯</span></span><br><span class="line">$ git revert [commit]</span><br><span class="line"><span class="comment">#æš‚æ—¶å°†æœªæäº¤çš„å†…å®¹ç§»é™¤ï¼Œç¨åå†ç§»å…¥</span></span><br><span class="line">$ git stash</span><br><span class="line">$ git stash pop</span><br></pre></td></tr></table></figure><h3 id="git-å…¶ä»–"><a href="#git-å…¶ä»–" class="headerlink" title="git å…¶ä»–"></a>git å…¶ä»–</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ç”Ÿæˆä¸€ä¸ªå¯ä¾›å‘å¸ƒçš„å‹ç¼©åŒ…</span></span><br><span class="line">$ git archive</span><br></pre></td></tr></table></figure><p>å‚è€ƒé“¾æ¥: <a href="https://www.toutiao.com/a6591290718067622407/?iid=33109242783&amp;app=news_article&amp;is_hit_share_recommend=0&amp;tt_from=qzone&amp;utm_source=qzone&amp;utm_medium=toutiao_ios&amp;utm_campaign=client_share" target="_blank" rel="noopener">ç‚¹æˆ‘æŸ¥çœ‹</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;git-å¸¸ç”¨æœ¯è¯­&quot;&gt;&lt;a href=&quot;#git-å¸¸ç”¨æœ¯è¯­&quot; class=&quot;headerlink&quot; title=&quot;git å¸¸ç”¨æœ¯è¯­&quot;&gt;&lt;/a&gt;git å¸¸ç”¨æœ¯è¯­&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;master        é»˜è®¤å¼€å‘åˆ†æ”¯&lt;/li&gt;
&lt;li&gt;origin    </summary>
      
    
    
    
    <category term="ä»£ç ç®¡ç†" scheme="https://gofugui.github.io/categories/ä»£ç ç®¡ç†/"/>
    
    
    <category term="Git" scheme="https://gofugui.github.io/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>code-push-server çƒ­æ›´æ–°å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥è¡¨</title>
    <link href="https://gofugui.github.io/2019/11/07/code-push-command/"/>
    <id>https://gofugui.github.io/2019/11/07/code-push-command/</id>
    <published>2019-11-06T16:00:00.000Z</published>
    <updated>2024-07-07T07:37:48.353Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ç”¨æˆ·ç›¸å…³"><a href="#ç”¨æˆ·ç›¸å…³" class="headerlink" title="ç”¨æˆ·ç›¸å…³"></a>ç”¨æˆ·ç›¸å…³</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ç™»é™†(æŒ‡å®šæœåŠ¡å™¨è·¯å¾„ï¼Œä¸åŠ URLè¡¨ç¤ºåœ¨æœ¬åœ°æœåŠ¡å™¨ç™»å½•)</span></span><br><span class="line">code-push login &lt;url&gt;</span><br><span class="line"><span class="comment">#æ³¨é”€</span></span><br><span class="line">code-push <span class="built_in">logout</span></span><br><span class="line"><span class="comment">#åˆ—å‡ºç™»é™†çš„token</span></span><br><span class="line">code-push access-key ls </span><br><span class="line"><span class="comment">#åˆ é™¤æŸä¸ª access-key</span></span><br><span class="line">code-push access-key rm &lt;accessKye&gt;</span><br></pre></td></tr></table></figure><h3 id="åº”ç”¨ç®¡ç†"><a href="#åº”ç”¨ç®¡ç†" class="headerlink" title="åº”ç”¨ç®¡ç†"></a>åº”ç”¨ç®¡ç†</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åœ¨è´¦å·é‡Œé¢æ·»åŠ ä¸€ä¸ªæ–°çš„app platform -&gt;[android,ios]</span></span><br><span class="line">code-push app add &lt;appName&gt; &lt;platform&gt; react-native</span><br><span class="line"><span class="comment">#åˆ é™¤é¡¹ç›®</span></span><br><span class="line">code-push app rm &lt;appName&gt;</span><br><span class="line"><span class="comment">#é‡å‘½åé¡¹ç›®</span></span><br><span class="line">code-push app rename &lt;appName&gt; &lt;newName&gt;</span><br><span class="line"><span class="comment">#ls åˆ—å‡ºè´¦å·ä¸‹é¢çš„æ‰€æœ‰é¡¹ç›®</span></span><br><span class="line">code-push app list </span><br><span class="line"><span class="comment">#æŠŠé¡¹ç›®çš„æ‰€æœ‰æƒè½¬ç§»åˆ°å¦å¤–ä¸€ä¸ªè´¦å·</span></span><br><span class="line">code-push app transfer &lt;appName&gt; &lt;newOwnerEmail&gt;</span><br><span class="line"><span class="comment">#æŸ¥çœ‹åˆ›å»ºçš„APP</span></span><br><span class="line">code-push app ls</span><br></pre></td></tr></table></figure><h3 id="éƒ¨ç½²ç®¡ç†"><a href="#éƒ¨ç½²ç®¡ç†" class="headerlink" title="éƒ¨ç½²ç®¡ç†"></a>éƒ¨ç½²ç®¡ç†</h3><blockquote><p>react native çƒ­æ›´æ–°åº”è¯¥è€ƒè™‘çš„å‡ ç‚¹<br>1ã€react nativeåŒ…çš„ç»„ç»‡å½¢å¼ â€“ï¼ˆä¸€ä¸ªåŒ…è¿˜æ˜¯å¯¹åŒ…è¿›è¡Œæ‹†åˆ†æˆä¸šåŠ¡åŒ…å’ŒåŸºç¡€åŒ…ï¼Œçƒ­æ›´æ–°æ—¶åªæ›´æ–°ä¸šåŠ¡åŒ…ï¼Œæ›´æ–°çš„æ–¹å¼ï¼š1ã€å…¨é‡æ›´æ–°ï¼›2ã€å¢é‡æ›´æ–°ï¼Œæ›´æ–°çš„æ—¶æœºï¼šæ˜¾å¼æ›´æ–°è¿˜æ˜¯éšå¼æ›´æ–°ï¼‰<br>2ã€ç§»åŠ¨ç«¯è·å–çƒ­æ›´æ–°æœåŠ¡å™¨ä¸Šçš„æ›´æ–°ï¼Œå¹¶éªŒè¯æ›´æ–°åŒ…çš„åˆæ³•æ€§<br>3ã€æœ¬åœ°åˆå¹¶æ›´æ–°çš„éƒ¨åˆ†<br>4ã€é”™è¯¯å¤„ç†å’Œå¼‚å¸¸å›æ»š<br>ä»CodePushçš„è§’åº¦æ¥çœ‹ï¼Œä¸€ä¸ªåº”ç”¨æŠŠä¸€ä¸ªæˆ–æ›´å¤šçš„ä¸œè¥¿ç®€å•å‘½ååˆ†ç»„ç§°ä¸ºâ€œéƒ¨ç½²(ç¯å¢ƒ)â€ã€‚</p></blockquote><blockquote><p>å¦‚æœä½ çš„Appæœ‰Stagingå’ŒProductionç¯å¢ƒå…¶å®å·²ç»æ»¡è¶³äº†ä½ çš„éœ€æ±‚ï¼Œç„¶åä½ ä¸éœ€è¦åšä»»ä½•äº‹æƒ…ã€‚ä¸è¿‡ï¼Œå¦‚æœä½ éœ€è¦alphaï¼Œdevç­‰éƒ¨ç½²ç¯å¢ƒï¼Œé‚£ä½ å¯ä»¥ç®€å•çš„ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤åˆ›å»º</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åˆ›å»ºä¸€ä¸ªæ–°çš„éƒ¨ç½²ç¯å¢ƒ</span></span><br><span class="line">code-push deployment add &lt;appName&gt; &lt;deploymentName&gt;</span><br><span class="line"><span class="comment">#åˆ é™¤éƒ¨ç½²ç¯å¢ƒ</span></span><br><span class="line">code-push deployment rm &lt;appName&gt; &lt;deploymentName&gt;</span><br><span class="line"><span class="comment">#é‡å‘½åéƒ¨ç½²ç¯å¢ƒ</span></span><br><span class="line">code-push deployment rename &lt;appName&gt; &lt;deploymentName&gt; &lt;newDeploymentName&gt;</span><br><span class="line"><span class="comment">#æŸ¥çœ‹ç‰¹å®šåº”ç”¨åŒ…å«çš„éƒ¨ç½²ç¯å¢ƒåˆ—è¡¨</span></span><br><span class="line"><span class="comment">#è¿™å°†ä¸ä»…æ˜¾ç¤ºéƒ¨ç½²ç¯å¢ƒåˆ—è¡¨ï¼Œ</span></span><br><span class="line"><span class="comment">#è€Œä¸”è¿˜æœ‰å…ƒæ•°æ®ï¼ˆä¾‹å¦‚ï¼šå¼ºåˆ¶æ€§å±æ€§ï¼Œæè¿°ï¼‰</span></span><br><span class="line"><span class="comment">#å’Œæœ€æ–°ç‰ˆæœ¬çš„å®‰è£…æŒ‡æ ‡ï¼š</span></span><br><span class="line">code-push deployment ls &lt;appName&gt; [--displayKeys|-k]</span><br></pre></td></tr></table></figure><h3 id="ç‰ˆæœ¬å·²ç»ä¸Šçº¿è¿›è¡Œçƒ­æ›´æ–°"><a href="#ç‰ˆæœ¬å·²ç»ä¸Šçº¿è¿›è¡Œçƒ­æ›´æ–°" class="headerlink" title="ç‰ˆæœ¬å·²ç»ä¸Šçº¿è¿›è¡Œçƒ­æ›´æ–°"></a>ç‰ˆæœ¬å·²ç»ä¸Šçº¿è¿›è¡Œçƒ­æ›´æ–°</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#æ“ä½œéœ€è¦åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿›è¡Œ</span></span><br><span class="line">code-push release-react &lt;appName&gt; &lt;platform&gt; -t ç‰ˆæœ¬  -d ç¯å¢ƒ  --des æè¿° -m <span class="literal">true</span> ï¼ˆå¼ºåˆ¶æ›´æ–°ï¼‰</span><br></pre></td></tr></table></figure><blockquote><p>å…¶ä¸­å‚æ•°-tä¸ºäºŒè¿›åˆ¶(.ipaä¸apk)å®‰è£…åŒ…çš„çš„ç‰ˆæœ¬ï¼›-dæ˜¯è¦å‘å¸ƒæ›´æ–°çš„ç¯å¢ƒåˆ†Productionä¸Staging(é»˜è®¤ä¸ºStaging)ï¼›â€“desä¸ºæ›´æ–°è¯´æ˜ï¼›-m æ˜¯å¼ºåˆ¶æ›´æ–°,å¦‚æœä¸å¡«å†™è¿™ä¸ªæ—¶å€™ç”¨æˆ·å¯ä»¥å¿½ç•¥æ›´æ–°åˆ°ä¸ªäººä¸­å¿ƒè¿›è¡Œæ›´æ–°ã€‚</p></blockquote><p><img src="https://cloud.githubusercontent.com/assets/116461/12526883/7730991c-c127-11e5-9196-98e9ceec758f.png" alt="Deployment list"></p><blockquote><p>æ³¨æ„: å› ä¸ºä»–ä»¬å¾ˆå°‘ç”¨å’Œéœ€è¦å±å¹•ï¼Œéƒ¨ç½²å¯†é’¥é»˜è®¤æ˜¯ä¸æ˜¾ç¤ºçš„ã€‚å¦‚æœä½ éœ€è¦æŸ¥çœ‹å®ƒä»¬ï¼Œåªè¦åœ¨deployment lså‘½ä»¤åé¢åŠ ä¸Š-kæ ‡è¯†å³å¯ã€‚</p></blockquote><h4 id="å®‰è£…æŒ‡æ ‡æœ‰å¦‚ä¸‹æ„ä¹‰ï¼š"><a href="#å®‰è£…æŒ‡æ ‡æœ‰å¦‚ä¸‹æ„ä¹‰ï¼š" class="headerlink" title="å®‰è£…æŒ‡æ ‡æœ‰å¦‚ä¸‹æ„ä¹‰ï¼š"></a>å®‰è£…æŒ‡æ ‡æœ‰å¦‚ä¸‹æ„ä¹‰ï¼š</h4><ul><li><p>Activeï¼ˆæ¿€æ´»ï¼‰ - æˆåŠŸå®‰è£…çš„æ•°é‡ç›®å‰è¿è¡Œè¿™ä¸ªç‰ˆæœ¬ã€‚è¿™ä¸ªæ•°å­—å°†ä¼šéšç€ç”¨æˆ·æ›´æ–°åˆ°æˆ–ç¦»å¼€è¿™ä¸ªç‰ˆæœ¬åˆ†åˆ«å¢åŠ æˆ–å‡å°‘ã€‚</p></li><li><p>Total - è¯¥ç‰ˆæœ¬æ›´æ–°æ”¶åˆ°çš„æ‰€æœ‰æˆåŠŸå®‰è£…çš„æ€»æ•°ã€‚è¿™ä¸ªæ•°å­—åªä¼šéšæ–°ç”¨æˆ·/è®¾å¤‡å®‰è£…å®ƒè€Œå¢åŠ ï¼Œæ‰€ä»¥å®ƒæ˜¯<strong>æ¿€æ´»</strong>çš„è¶…é›†ã€‚</p></li><li><p>Pending - æ›´æ–°è¢«ä¸‹è½½äº†ä½†è¿˜æ²¡å®‰è£…çš„æ•°é‡ã€‚This would only apply to updates that arenâ€™t installed immediately, and helps provide the broader picture of release adoption for apps that rely on app resume and restart to apply an update.</p></li><li><p>Rollbacks - è¯¥ç‰ˆæœ¬è¢«è‡ªåŠ¨å›æ»šçš„æ¬¡æ•°ã€‚ç†æƒ³æƒ…å†µä¸‹è¿™ä¸ªæ•°åº”è¯¥ä¸º0ï¼Œè€Œä¸”åœ¨è¿™ç§æƒ…å†µä¸‹è¿™ä¸ªé‡æ˜¯ä¸ä¼šæ˜¾ç¤ºçš„ã€‚ç„¶è€Œï¼Œå¦‚æœä½ å‘å¸ƒäº†ä¸€ä¸ªåŒ…å«ä¸¥é‡é—®é¢˜(Crash)çš„æ›´æ–°ï¼ŒCodePushæ’ä»¶å°†åœ¨å®‰è£…æ—¶å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ï¼ŒåŒæ—¶æŠŠé—®é¢˜åé¦ˆåˆ°æœåŠ¡ç«¯ã€‚è¿™å¯ä»¥è®©ç»ˆç«¯ç”¨æˆ·ä¾æ—§èƒ½ç”¨ï¼Œä¸è¢«æŸåçš„ç‰ˆæœ¬é˜»å¡ä½ï¼Œè€Œä¸”èƒ½å¤Ÿåœ¨CLIé‡Œçœ‹åˆ°è¿™äº›ï¼Œä½ å¯ä»¥é‰´å®šé”™è¯¯çš„ç‰ˆæœ¬å¹¶ä¸”èƒ½åœ¨æœåŠ¡å™¨ä¸Šåšå‡ºå›æ»šçš„å“åº”ã€‚</p></li><li><p>Rollout - æ˜¾ç¤ºæœ‰èµ„æ ¼æ¥æ”¶æ›´æ–°çš„ç™¾åˆ†æ¯”ã€‚è¿™ä¸ªå±æ€§åªä¼šè¢«æ˜¾ç¤ºåœ¨é‚£äº›æ¿€æ´»çš„çš„é¦–æ¬¡å±•ç¤ºçš„ç‰ˆæœ¬ï¼Œæ‰€ä»¥ï¼Œé¦–æ¬¡å±•ç¤ºç™¾åˆ†æ¯”æ˜¯å°äº100%ã€‚æ­¤å¤–ï¼Œ å› ä¸ºä¸€ä¸ªéƒ¨ç½²ä»»ä½•æ—¶å€™åªèƒ½æœ‰ä¸€ä¸ªæ¿€æ´»çš„é¦–æ¬¡å±•ç¤ºï¼Œè¿™ä¸ªæ ‡ç­¾åªä¼šè¢«æ˜¾ç¤ºåœ¨æœ€æ–°çš„ä¸€æ¬¡éƒ¨ç½²é‡Œã€‚</p></li><li><p>Disabled - æ ‡ç¤ºæ˜¯å¦è¯¥ç‰ˆæœ¬è¢«æ ‡è®°æˆå¤±æ•ˆçš„ï¼Œå› æ­¤ç”¨æˆ·æ˜¯å¦å¯ä¸‹è½½ã€‚è¿™ä¸ªå±æ€§åªæœ‰åœ¨ç‰ˆæœ¬çœŸå®å¤±æ•ˆæ—¶æ‰æ˜¾ç¤ºã€‚</p></li></ul><h3 id="ç‰ˆæœ¬å›æ»š"><a href="#ç‰ˆæœ¬å›æ»š" class="headerlink" title="ç‰ˆæœ¬å›æ»š"></a>ç‰ˆæœ¬å›æ»š</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##æ“ä½œéœ€è¦åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿›è¡Œ</span></span><br><span class="line">code-push rollback &lt;appName&gt; Production --targetRelease v4(codepushæœåŠ¡éƒ¨ç½²çš„ç‰ˆæœ¬å·)</span><br></pre></td></tr></table></figure><blockquote><p>å‚è€ƒæ–‡æ¡£ <a href="https://github.com/Microsoft/code-push/blob/master/cli/README-cn.md" target="_blank" rel="noopener">æ–‡æ¡£1</a> <a href="https://blog.csdn.net/u013718120/article/details/78344866" target="_blank" rel="noopener">æ–‡æ¡£2</a></p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;ç”¨æˆ·ç›¸å…³&quot;&gt;&lt;a href=&quot;#ç”¨æˆ·ç›¸å…³&quot; class=&quot;headerlink&quot; title=&quot;ç”¨æˆ·ç›¸å…³&quot;&gt;&lt;/a&gt;ç”¨æˆ·ç›¸å…³&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre</summary>
      
    
    
    
    <category term="code-pushå¸¸ç”¨å‘½ä»¤" scheme="https://gofugui.github.io/categories/code-pushå¸¸ç”¨å‘½ä»¤/"/>
    
    
    <category term="code-pushå¸¸ç”¨å‘½ä»¤" scheme="https://gofugui.github.io/tags/code-pushå¸¸ç”¨å‘½ä»¤/"/>
    
  </entry>
  
  <entry>
    <title>é«˜æ•ˆçš„jsç‰‡æ®µ</title>
    <link href="https://gofugui.github.io/2018/10/11/JS-Code/"/>
    <id>https://gofugui.github.io/2018/10/11/JS-Code/</id>
    <published>2018-10-10T16:00:00.000Z</published>
    <updated>2021-03-31T05:57:45.082Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>è¯¥é¡¹ç›®æ¥è‡ªäº Github ç”¨æˆ· Chalarangeloï¼Œç›®å‰å·²åœ¨ Github ä¸Šè·å¾—äº† 5000 å¤šStarï¼Œç²¾å¿ƒæ”¶é›†äº†å¤šè¾¾ 48 ä¸ªæœ‰ç”¨çš„ JavaScript ä»£ç ç‰‡æ®µï¼Œè¯¥ç”¨æˆ·çš„ä»£ç å¯ä»¥è®©ç¨‹åºå‘˜åœ¨ 30 ç§’ç”šè‡³æ›´å°‘çš„æ—¶é—´å†…ç†è§£è¿™äº›ç»å¸¸ç”¨åˆ°çš„åŸºç¡€ç®—æ³•ï¼Œæ¥çœ‹çœ‹è¿™äº› JavaScript ä»£ç éƒ½ä¼ è¾¾å‡ºäº†ä»€ä¹ˆå§ï¼</p></blockquote><h3 id="1-Anagrams-of-string-å¸¦æœ‰é‡å¤é¡¹"><a href="#1-Anagrams-of-string-å¸¦æœ‰é‡å¤é¡¹" class="headerlink" title="1.  Anagrams of string(å¸¦æœ‰é‡å¤é¡¹)"></a>1.  Anagrams of string(å¸¦æœ‰é‡å¤é¡¹)</h3><blockquote><p>ä½¿ç”¨é€’å½’ã€‚å¯¹äºç»™å®šå­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—æ¯ï¼Œä¸ºå­—æ¯åˆ›å»ºå­—è°œã€‚ä½¿ç”¨map()å°†å­—æ¯ä¸æ¯éƒ¨åˆ†å­—è°œç»„åˆï¼Œç„¶åä½¿ç”¨reduce()å°†æ‰€æœ‰å­—è°œç»„åˆåˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œæœ€åŸºæœ¬æƒ…å†µæ˜¯å­—ç¬¦ä¸²é•¿åº¦ç­‰äº2æˆ–1ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const anagrams = str =&gt; &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (str.length &lt;= 2) <span class="built_in">return</span> str.length === 2 ? [str, str[1] + str[0]] : [str];</span><br><span class="line">  </span><br><span class="line">  <span class="built_in">return</span> str.split(<span class="string">''</span>).reduce((acc, letter, i) =&gt;</span><br><span class="line">  </span><br><span class="line">    acc.concat(anagrams(str.slice(0, i) + str.slice(i + 1)).map(val =&gt; letter + val)), []);</span><br><span class="line">  </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment"># anagrams('abc') -&gt; ['abc','acb','bac','bca','cab','cba']</span></span><br></pre></td></tr></table></figure></p></blockquote><h3 id="2-æ•°ç»„å¹³å‡æ•°"><a href="#2-æ•°ç»„å¹³å‡æ•°" class="headerlink" title="2.  æ•°ç»„å¹³å‡æ•°"></a>2.  æ•°ç»„å¹³å‡æ•°</h3><blockquote><p>ä½¿ç”¨reduce()å°†æ¯ä¸ªå€¼æ·»åŠ åˆ°ç´¯åŠ å™¨ï¼Œåˆå§‹å€¼ä¸º0ï¼Œæ€»å’Œé™¤ä»¥æ•°ç»„é•¿åº¦ã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const average = arr =&gt; arr.reduce((acc, val) =&gt; acc + val, 0) / arr.length;</span><br><span class="line"></span><br><span class="line"><span class="comment"># average([1,2,3]) -&gt; 2</span></span><br></pre></td></tr></table></figure><h3 id="3-å¤§å†™æ¯ä¸ªå•è¯çš„é¦–å­—æ¯"><a href="#3-å¤§å†™æ¯ä¸ªå•è¯çš„é¦–å­—æ¯" class="headerlink" title="3.  å¤§å†™æ¯ä¸ªå•è¯çš„é¦–å­—æ¯"></a>3.  å¤§å†™æ¯ä¸ªå•è¯çš„é¦–å­—æ¯</h3><blockquote><p>ä½¿ç”¨replace()åŒ¹é…æ¯ä¸ªå•è¯çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œå¹¶ä½¿ç”¨toUpperCase()æ¥å°†å…¶å¤§å†™ã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const capitalizeEveryWord = str =&gt; str.replace(/\b[a-z]/g, char =&gt; char.toUpperCase());</span><br><span class="line"></span><br><span class="line"><span class="comment"># capitalizeEveryWord('hello world!') -&gt; 'Hello World!'</span></span><br></pre></td></tr></table></figure><h3 id="4-é¦–å­—æ¯å¤§å†™"><a href="#4-é¦–å­—æ¯å¤§å†™" class="headerlink" title="4. é¦–å­—æ¯å¤§å†™"></a>4. é¦–å­—æ¯å¤§å†™</h3><blockquote><p>ä½¿ç”¨slice(0, 1)å’ŒtoUpperCase()å¤§å†™ç¬¬ä¸€ä¸ªå­—æ¯ï¼Œslice(1)è·å–å­—ç¬¦ä¸²çš„å…¶ä½™éƒ¨åˆ†ã€‚ çœç•¥lowerRestå‚æ•°ä»¥ä¿æŒå­—ç¬¦ä¸²çš„å…¶ä½™éƒ¨åˆ†ä¸å˜ï¼Œæˆ–å°†å…¶è®¾ç½®ä¸ºtrueä»¥è½¬æ¢ä¸ºå°å†™ã€‚(æ³¨æ„ï¼šè¿™å’Œä¸Šä¸€ä¸ªç¤ºä¾‹ä¸æ˜¯åŒä¸€ä»¶äº‹æƒ…)</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const capitalize = (str, lowerRest = <span class="literal">false</span>) =&gt;</span><br><span class="line"></span><br><span class="line">str.slice(0, 1).toUpperCase() + (lowerRest ? str.slice(1).toLowerCase() : str.slice(1));</span><br><span class="line"></span><br><span class="line"><span class="comment"># capitalize('myName', true) -&gt; 'Myname'</span></span><br></pre></td></tr></table></figure><h3 id="5-æ£€æŸ¥å›æ–‡"><a href="#5-æ£€æŸ¥å›æ–‡" class="headerlink" title="5. æ£€æŸ¥å›æ–‡"></a>5. æ£€æŸ¥å›æ–‡</h3><blockquote><p>å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºtoLowerCase()ï¼Œå¹¶ä½¿ç”¨replace()ä»ä¸­åˆ é™¤éå­—æ¯çš„å­—ç¬¦ã€‚ç„¶åï¼Œå°†å…¶è½¬æ¢ä¸ºtolowerCase()ï¼Œå°†(â€˜â€™)æ‹†åˆ†ä¸ºå•ç‹¬å­—ç¬¦ï¼Œreverse()ï¼Œjoin(â€˜â€™)ï¼Œä¸åŸå§‹çš„éåè½¬å­—ç¬¦ä¸²è¿›è¡Œæ¯”è¾ƒï¼Œç„¶åå°†å…¶è½¬æ¢ä¸ºtolowerCase()ã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const palindrome = str =&gt; &#123;</span><br><span class="line"></span><br><span class="line">  const s = str.toLowerCase().replace(/[\W_]/g,<span class="string">''</span>);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">return</span> s === s.split(<span class="string">''</span>).reverse().join(<span class="string">''</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># palindrome('taco cat') -&gt; true</span></span><br></pre></td></tr></table></figure><h3 id="6-è®¡æ•°æ•°ç»„ä¸­å€¼çš„å‡ºç°æ¬¡æ•°"><a href="#6-è®¡æ•°æ•°ç»„ä¸­å€¼çš„å‡ºç°æ¬¡æ•°" class="headerlink" title="6. è®¡æ•°æ•°ç»„ä¸­å€¼çš„å‡ºç°æ¬¡æ•°"></a>6. è®¡æ•°æ•°ç»„ä¸­å€¼çš„å‡ºç°æ¬¡æ•°</h3><blockquote><p>æ¯æ¬¡é‡åˆ°æ•°ç»„ä¸­çš„ç‰¹å®šå€¼æ—¶ï¼Œä½¿ç”¨reduce()æ¥é€’å¢è®¡æ•°å™¨ã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const countOccurrences = (arr, value) =&gt; arr.reduce((a, v) =&gt; v === value ? a + 1 : a + 0, 0);</span><br><span class="line"></span><br><span class="line"><span class="comment"># countOccurrences([1,1,2,1,2,3], 1) -&gt; 3</span></span><br></pre></td></tr></table></figure><h3 id="7-å½“å‰URL"><a href="#7-å½“å‰URL" class="headerlink" title="7. å½“å‰URL"></a>7. å½“å‰URL</h3><blockquote><p>ä½¿ç”¨window.location.hrefæ¥è·å–å½“å‰URLã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const currentUrl = _ =&gt; window.location.href;</span><br><span class="line"></span><br><span class="line"><span class="comment"># currentUrl() -&gt; 'https://google.com'</span></span><br></pre></td></tr></table></figure><h3 id="8-Curry"><a href="#8-Curry" class="headerlink" title="8.  Curry"></a>8.  Curry</h3><blockquote><p>å€ŸåŠ©bind,å‚æ•°ç»‘å®šçš„ç‰¹æ€§ï¼Œå¦‚æœæä¾›çš„å‚æ•°(args)æ•°é‡è¶³å¤Ÿï¼Œåˆ™è°ƒç”¨ä¼ é€’å‡½æ•°fï¼Œå¦åˆ™è¿”å›ä¸€ä¸ªcurriedå‡½æ•°fã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">const curry = (fn, arity = fn.length, ...args) =&gt;</span><br><span class="line"></span><br><span class="line">  arity &lt;= args.length</span><br><span class="line"></span><br><span class="line">    ? fn(...args)</span><br><span class="line"></span><br><span class="line">    : curry.bind(null, fn, arity, ...args);</span><br><span class="line"></span><br><span class="line"><span class="comment"># curry(Math.pow)(2)(10) -&gt; 1024</span></span><br><span class="line"><span class="comment"># curry(Math.min, 3)(10)(50)(2) -&gt; 2</span></span><br></pre></td></tr></table></figure><h3 id="9-Deep-flatten-array"><a href="#9-Deep-flatten-array" class="headerlink" title="9.  Deep flatten array"></a>9.  Deep flatten array</h3><blockquote><p>ä½¿ç”¨é€’å½’ï¼Œä½¿ç”¨reduce()æ¥è·å–æ‰€æœ‰ä¸æ˜¯æ•°ç»„çš„å…ƒç´ ï¼Œflattenæ¯ä¸ªå…ƒç´ éƒ½æ˜¯æ•°ç»„ã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const deepFlatten = arr =&gt;</span><br><span class="line"></span><br><span class="line">  arr.reduce((a, v) =&gt; a.concat(Array.isArray(v) ? deepFlatten(v) : v), []);</span><br><span class="line"></span><br><span class="line"><span class="comment"># deepFlatten([1,[2],[[3],4],5]) -&gt; [1,2,3,4,5]</span></span><br></pre></td></tr></table></figure><h3 id="10-æ•°ç»„ä¹‹é—´çš„åŒºåˆ«"><a href="#10-æ•°ç»„ä¹‹é—´çš„åŒºåˆ«" class="headerlink" title="10.  æ•°ç»„ä¹‹é—´çš„åŒºåˆ«"></a>10.  æ•°ç»„ä¹‹é—´çš„åŒºåˆ«</h3><blockquote><p>ä»båˆ›å»ºä¸€ä¸ªSetï¼Œç„¶ååœ¨aä¸Šä½¿ç”¨Array.filter()ï¼Œåªä¿ç•™bä¸­ä¸åŒ…å«çš„å€¼ã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const difference = (a, b) =&gt; &#123; const s = new Set(b); <span class="built_in">return</span> a.filter(x =&gt; !s.has(x)); &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment"># difference([1,2,3], [1,2]) -&gt; [3]</span></span><br></pre></td></tr></table></figure><h3 id="11-ä¸¤ç‚¹ä¹‹é—´çš„è·ç¦»"><a href="#11-ä¸¤ç‚¹ä¹‹é—´çš„è·ç¦»" class="headerlink" title="11.  ä¸¤ç‚¹ä¹‹é—´çš„è·ç¦»"></a>11.  ä¸¤ç‚¹ä¹‹é—´çš„è·ç¦»</h3><blockquote><p>ä½¿ç”¨Math.hypot()è®¡ç®—ä¸¤ç‚¹ä¹‹é—´çš„æ¬§å‡ é‡Œå¾·è·ç¦»ã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const distance = (x0, y0, x1, y1) =&gt; Math.hypot(x1 - x0, y1 - y0);</span><br><span class="line"></span><br><span class="line"><span class="comment"># distance(1,1, 2,3) -&gt; 2.23606797749979</span></span><br></pre></td></tr></table></figure><h3 id="12-å¯ä»¥æŒ‰æ•°å­—æ•´é™¤"><a href="#12-å¯ä»¥æŒ‰æ•°å­—æ•´é™¤" class="headerlink" title="12.  å¯ä»¥æŒ‰æ•°å­—æ•´é™¤"></a>12.  å¯ä»¥æŒ‰æ•°å­—æ•´é™¤</h3><blockquote><p>ä½¿ç”¨æ¨¡è¿ç®—ç¬¦(ï¼…)æ¥æ£€æŸ¥ä½™æ•°æ˜¯å¦ç­‰äº0ã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const isDivisible = (dividend, divisor) =&gt; dividend % divisor === 0;</span><br><span class="line"></span><br><span class="line"><span class="comment"># isDivisible(6,3) -&gt; true</span></span><br></pre></td></tr></table></figure><h3 id="13-è½¬ä¹‰æ­£åˆ™è¡¨è¾¾å¼"><a href="#13-è½¬ä¹‰æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="13.  è½¬ä¹‰æ­£åˆ™è¡¨è¾¾å¼"></a>13.  è½¬ä¹‰æ­£åˆ™è¡¨è¾¾å¼</h3><blockquote><p>ä½¿ç”¨replace()æ¥è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const escapeRegExp = str =&gt; str.replace(/[.*+?^<span class="variable">$&#123;&#125;</span>()|[\]\\]/g, <span class="string">'\\&gt;&lt;'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment"># escapeRegExp('(test)') -&gt; \\(test\\)</span></span><br></pre></td></tr></table></figure><h3 id="14-å¶æ•°æˆ–å¥‡æ•°"><a href="#14-å¶æ•°æˆ–å¥‡æ•°" class="headerlink" title="14.  å¶æ•°æˆ–å¥‡æ•°"></a>14.  å¶æ•°æˆ–å¥‡æ•°</h3><blockquote><p>ä½¿ç”¨Math.abs()å°†é€»è¾‘æ‰©å±•ä¸ºè´Ÿæ•°ï¼Œä½¿ç”¨æ¨¡(ï¼…)è¿ç®—ç¬¦è¿›è¡Œæ£€æŸ¥ã€‚ å¦‚æœæ•°å­—æ˜¯å¶æ•°ï¼Œåˆ™è¿”å›trueï¼›å¦‚æœæ•°å­—æ˜¯å¥‡æ•°ï¼Œåˆ™è¿”å›falseã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const isEven = num =&gt; num % 2 === 0;</span><br><span class="line"></span><br><span class="line"><span class="comment"># isEven(3) -&gt; false</span></span><br></pre></td></tr></table></figure><h3 id="15-é˜¶ä¹˜"><a href="#15-é˜¶ä¹˜" class="headerlink" title="15.  é˜¶ä¹˜"></a>15.  é˜¶ä¹˜</h3><blockquote><p>ä½¿ç”¨é€’å½’ã€‚å¦‚æœnå°äºæˆ–ç­‰äº1ï¼Œåˆ™è¿”å›1ã€‚å¦åˆ™è¿”å›nå’Œn â€“ 1çš„é˜¶ä¹˜çš„ä¹˜ç§¯ã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const factorial = n =&gt; n &lt;= 1 ? 1 : n * factorial(n - 1);</span><br><span class="line"></span><br><span class="line"><span class="comment"># factorial(6) -&gt; 720</span></span><br></pre></td></tr></table></figure><h3 id="16-æ–æ³¢é‚£å¥‘æ•°ç»„ç”Ÿæˆå™¨"><a href="#16-æ–æ³¢é‚£å¥‘æ•°ç»„ç”Ÿæˆå™¨" class="headerlink" title="16.  æ–æ³¢é‚£å¥‘æ•°ç»„ç”Ÿæˆå™¨"></a>16.  æ–æ³¢é‚£å¥‘æ•°ç»„ç”Ÿæˆå™¨</h3><blockquote><p>åˆ›å»ºä¸€ä¸ªç‰¹å®šé•¿åº¦çš„ç©ºæ•°ç»„ï¼Œåˆå§‹åŒ–å‰ä¸¤ä¸ªå€¼(0å’Œ1)ã€‚ä½¿ç”¨Array.reduce()å‘æ•°ç»„ä¸­æ·»åŠ å€¼ï¼Œåé¢çš„ä¸€ä¸ªæ•°ç­‰äºå‰é¢ä¸¤ä¸ªæ•°ç›¸åŠ ä¹‹å’Œ(å‰ä¸¤ä¸ªé™¤å¤–)ã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const fibonacci = n =&gt;</span><br><span class="line"></span><br><span class="line">  Array(n).fill(0).reduce((acc, val, i) =&gt; acc.concat(i &gt; 1 ? acc[i - 1] + acc[i - 2] : i), []);</span><br><span class="line"></span><br><span class="line"><span class="comment"># fibonacci(5) -&gt; [0,1,1,2,3]</span></span><br></pre></td></tr></table></figure><h3 id="17-è¿‡æ»¤æ•°ç»„ä¸­çš„éå”¯ä¸€å€¼"><a href="#17-è¿‡æ»¤æ•°ç»„ä¸­çš„éå”¯ä¸€å€¼" class="headerlink" title="17.  è¿‡æ»¤æ•°ç»„ä¸­çš„éå”¯ä¸€å€¼"></a>17.  è¿‡æ»¤æ•°ç»„ä¸­çš„éå”¯ä¸€å€¼</h3><blockquote><p>å°†Array.filter()ç”¨äºä»…åŒ…å«å”¯ä¸€å€¼çš„æ•°ç»„ã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const filterNonUnique = arr =&gt; arr.filter(i =&gt; arr.indexOf(i) === arr.lastIndexOf(i));</span><br><span class="line"></span><br><span class="line"><span class="comment"># filterNonUnique([1,2,2,3,4,4,5]) -&gt; [1,3,5]</span></span><br></pre></td></tr></table></figure><h3 id="18-Flattenæ•°ç»„"><a href="#18-Flattenæ•°ç»„" class="headerlink" title="18. Flattenæ•°ç»„"></a>18. Flattenæ•°ç»„</h3><blockquote><p>ä½¿ç”¨reduce()æ¥è·å–æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œå¹¶ä½¿ç”¨concat()æ¥ä½¿å®ƒä»¬flattenã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const flatten = arr =&gt; arr.reduce((a, v) =&gt; a.concat(v), []);</span><br><span class="line"></span><br><span class="line"><span class="comment"># flatten([1,[2],3,4]) -&gt; [1,2,3,4]</span></span><br></pre></td></tr></table></figure><h3 id="19-ä»æ•°ç»„ä¸­è·å–æœ€å¤§å€¼"><a href="#19-ä»æ•°ç»„ä¸­è·å–æœ€å¤§å€¼" class="headerlink" title="19. ä»æ•°ç»„ä¸­è·å–æœ€å¤§å€¼"></a>19. ä»æ•°ç»„ä¸­è·å–æœ€å¤§å€¼</h3><blockquote><p>ä½¿ç”¨Math.max()ä¸spreadè¿ç®—ç¬¦(â€¦)ç»“åˆå¾—åˆ°æ•°ç»„ä¸­çš„æœ€å¤§å€¼ã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const arrayMax = arr =&gt; Math.max(...arr);</span><br><span class="line"></span><br><span class="line"><span class="comment"># arrayMax([10, 1, 5]) -&gt; 10</span></span><br></pre></td></tr></table></figure><h3 id="20-ä»æ•°ç»„ä¸­è·å–æœ€å°å€¼"><a href="#20-ä»æ•°ç»„ä¸­è·å–æœ€å°å€¼" class="headerlink" title="20. ä»æ•°ç»„ä¸­è·å–æœ€å°å€¼"></a>20. ä»æ•°ç»„ä¸­è·å–æœ€å°å€¼</h3><blockquote><p>ä½¿ç”¨Math.min()ä¸spreadè¿ç®—ç¬¦(â€¦)ç»“åˆå¾—åˆ°æ•°ç»„ä¸­çš„æœ€å°å€¼ã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const arrayMin = arr =&gt; Math.min(...arr);</span><br><span class="line"></span><br><span class="line"><span class="comment"># arrayMin([10, 1, 5]) -&gt; 1</span></span><br></pre></td></tr></table></figure><h3 id="21-è·å–æ»šåŠ¨ä½ç½®"><a href="#21-è·å–æ»šåŠ¨ä½ç½®" class="headerlink" title="21. è·å–æ»šåŠ¨ä½ç½®"></a>21. è·å–æ»šåŠ¨ä½ç½®</h3><blockquote><p>å¦‚æœå·²å®šä¹‰ï¼Œè¯·ä½¿ç”¨pageXOffsetå’ŒpageYOffsetï¼Œå¦åˆ™ä½¿ç”¨scrollLeftå’ŒscrollTopï¼Œå¯ä»¥çœç•¥elæ¥ä½¿ç”¨windowçš„é»˜è®¤å€¼ã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const getScrollPos = (el = window) =&gt;</span><br><span class="line"></span><br><span class="line">  (&#123;x: (el.pageXOffset !== undefined) ? el.pageXOffset : el.scrollLeft,</span><br><span class="line"></span><br><span class="line">    y: (el.pageYOffset !== undefined) ? el.pageYOffset : el.scrollTop&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment"># getScrollPos() -&gt; &#123;x: 0, y: 200&#125;</span></span><br></pre></td></tr></table></figure><h3 id="22-æœ€å¤§å…¬çº¦æ•°-GCD"><a href="#22-æœ€å¤§å…¬çº¦æ•°-GCD" class="headerlink" title="22. æœ€å¤§å…¬çº¦æ•°(GCD)"></a>22. æœ€å¤§å…¬çº¦æ•°(GCD)</h3><blockquote><p>ä½¿ç”¨é€’å½’ã€‚åŸºæœ¬æƒ…å†µæ˜¯å½“yç­‰äº0æ—¶ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿”å›xã€‚å¦åˆ™ï¼Œè¿”å›yçš„GCDå’Œx / yçš„å…¶ä½™éƒ¨åˆ†ã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const gcd = (x, y) =&gt; !y ? x : gcd(y, x % y);</span><br><span class="line"><span class="comment"># gcd (8, 36) -&gt; 4</span></span><br></pre></td></tr></table></figure><h3 id="23-Head-of-list"><a href="#23-Head-of-list" class="headerlink" title="23. Head of list"></a>23. Head of list</h3><blockquote><p>è¿”å›ARR[0]</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const head = arr =&gt; arr[0];</span><br><span class="line"></span><br><span class="line"><span class="comment"># head([1,2,3]) -&gt; 1</span></span><br></pre></td></tr></table></figure><h3 id="24-liståˆå§‹åŒ–"><a href="#24-liståˆå§‹åŒ–" class="headerlink" title="24. liståˆå§‹åŒ–"></a>24. liståˆå§‹åŒ–</h3><blockquote><p>è¿”å›arr.slice(0ï¼Œ-1)</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">const initial = arr =&gt; arr.slice(0, -1);</span><br><span class="line"></span><br><span class="line"><span class="comment"># initial([1,2,3]) -&gt; [1,2]</span></span><br></pre></td></tr></table></figure><h3 id="25-ç”¨rangeåˆå§‹åŒ–æ•°ç»„"><a href="#25-ç”¨rangeåˆå§‹åŒ–æ•°ç»„" class="headerlink" title="25. ç”¨rangeåˆå§‹åŒ–æ•°ç»„"></a>25. ç”¨rangeåˆå§‹åŒ–æ•°ç»„</h3><blockquote><p>ä½¿ç”¨Array(end-start)åˆ›å»ºæ‰€éœ€é•¿åº¦çš„æ•°ç»„ï¼Œä½¿ç”¨map()æ¥å¡«å……èŒƒå›´ä¸­çš„æ‰€éœ€å€¼ï¼Œå¯ä»¥çœç•¥startä½¿ç”¨é»˜è®¤å€¼0ã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const initializeArrayRange = (end, start = 0) =&gt;</span><br><span class="line"></span><br><span class="line">  Array.apply(null, Array(end - start)).map((v, i) =&gt; i + start);</span><br><span class="line"></span><br><span class="line"><span class="comment"># initializeArrayRange(5) -&gt; [0,1,2,3,4]</span></span><br></pre></td></tr></table></figure><h3 id="26-ç”¨å€¼åˆå§‹åŒ–æ•°ç»„"><a href="#26-ç”¨å€¼åˆå§‹åŒ–æ•°ç»„" class="headerlink" title="26. ç”¨å€¼åˆå§‹åŒ–æ•°ç»„"></a>26. ç”¨å€¼åˆå§‹åŒ–æ•°ç»„</h3><blockquote><p>ä½¿ç”¨Array(n)åˆ›å»ºæ‰€éœ€é•¿åº¦çš„æ•°ç»„ï¼Œfill(v)ä»¥å¡«å……æ‰€éœ€çš„å€¼ï¼Œå¯ä»¥å¿½ç•¥valueä½¿ç”¨é»˜è®¤å€¼0ã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const initializeArray = (n, value = 0) =&gt; Array(n).fill(value);</span><br><span class="line"></span><br><span class="line"><span class="comment"># initializeArray(5, 2) -&gt; [2,2,2,2,2]</span></span><br></pre></td></tr></table></figure><h3 id="27-åˆ—è¡¨çš„æœ€å"><a href="#27-åˆ—è¡¨çš„æœ€å" class="headerlink" title="27. åˆ—è¡¨çš„æœ€å"></a>27. åˆ—è¡¨çš„æœ€å</h3><blockquote><p>è¿”å›arr.slice(-1)[0]</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const last = arr =&gt; arr.slice(-1)[0];</span><br><span class="line"></span><br><span class="line"><span class="comment"># last([1,2,3]) -&gt; 3</span></span><br></pre></td></tr></table></figure><h3 id="28-æµ‹è¯•åŠŸèƒ½æ‰€èŠ±è´¹çš„æ—¶é—´"><a href="#28-æµ‹è¯•åŠŸèƒ½æ‰€èŠ±è´¹çš„æ—¶é—´" class="headerlink" title="28. æµ‹è¯•åŠŸèƒ½æ‰€èŠ±è´¹çš„æ—¶é—´"></a>28. æµ‹è¯•åŠŸèƒ½æ‰€èŠ±è´¹çš„æ—¶é—´</h3><blockquote><p>ä½¿ç”¨performance.now()è·å–å‡½æ•°çš„å¼€å§‹å’Œç»“æŸæ—¶é—´ï¼Œconsole.log()æ‰€èŠ±è´¹çš„æ—¶é—´ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å‡½æ•°åï¼Œéšåçš„å‚æ•°ä¼ é€’ç»™å‡½æ•°ã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">const timeTaken = callback =&gt; &#123;</span><br><span class="line"></span><br><span class="line">  console.time(<span class="string">'timeTaken'</span>);</span><br><span class="line"></span><br><span class="line">  const r = callback();</span><br><span class="line"></span><br><span class="line">  console.timeEnd(<span class="string">'timeTaken'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">return</span> r;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment"># timeTaken(() =&gt; Math.pow(2, 10)) -&gt; 1024</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># (logged): timeTaken: 0.02099609375ms</span></span><br></pre></td></tr></table></figure><h3 id="29-æ¥è‡ªé”®å€¼å¯¹çš„å¯¹è±¡"><a href="#29-æ¥è‡ªé”®å€¼å¯¹çš„å¯¹è±¡" class="headerlink" title="29. æ¥è‡ªé”®å€¼å¯¹çš„å¯¹è±¡"></a>29. æ¥è‡ªé”®å€¼å¯¹çš„å¯¹è±¡</h3><blockquote><p>ä½¿ç”¨Array.reduce()æ¥åˆ›å»ºå’Œç»„åˆé”®å€¼å¯¹ã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const objectFromPairs = arr =&gt; arr.reduce((a, v) =&gt; (a[v[0]] = v[1], a), &#123;&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment"># objectFromPairs([['a',1],['b',2]]) -&gt; &#123;a: 1, b: 2&#125;</span></span><br></pre></td></tr></table></figure><h3 id="30-ç®¡é“"><a href="#30-ç®¡é“" class="headerlink" title="30. ç®¡é“"></a>30. ç®¡é“</h3><blockquote><p>ä½¿ç”¨Array.reduce()é€šè¿‡å‡½æ•°ä¼ é€’å€¼ã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const pipe = (...funcs) =&gt; arg =&gt; funcs.reduce((acc, func) =&gt; func(acc), arg);</span><br><span class="line"></span><br><span class="line"><span class="comment"># pipe(btoa, x =&gt; x.toUpperCase())("Test") -&gt; "VGVZDA=="</span></span><br></pre></td></tr></table></figure><h3 id="31-Powerset"><a href="#31-Powerset" class="headerlink" title="31. Powerset"></a>31. Powerset</h3><blockquote><p>ä½¿ç”¨reduce()ä¸map()ç»“åˆæ¥éå†å…ƒç´ ï¼Œå¹¶å°†å…¶ç»„åˆæˆåŒ…å«æ‰€æœ‰ç»„åˆçš„æ•°ç»„ã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const powerset = arr =&gt;</span><br><span class="line"></span><br><span class="line">  arr.reduce((a, v) =&gt; a.concat(a.map(r =&gt; [v].concat(r))), [[]]);</span><br><span class="line"></span><br><span class="line"><span class="comment"># powerset([1,2]) -&gt; [[], [1], [2], [2,1]]</span></span><br></pre></td></tr></table></figure><h3 id="32-èŒƒå›´å†…çš„éšæœºæ•´æ•°"><a href="#32-èŒƒå›´å†…çš„éšæœºæ•´æ•°" class="headerlink" title="32. èŒƒå›´å†…çš„éšæœºæ•´æ•°"></a>32. èŒƒå›´å†…çš„éšæœºæ•´æ•°</h3><blockquote><p>ä½¿ç”¨Math.random()ç”Ÿæˆä¸€ä¸ªéšæœºæ•°å¹¶å°†å…¶æ˜ å°„åˆ°æ‰€éœ€çš„èŒƒå›´ï¼Œä½¿ç”¨Math.floor()ä½¿å…¶æˆä¸ºä¸€ä¸ªæ•´æ•°ã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const randomIntegerInRange = (min, max) =&gt; Math.floor(Math.random() * (max - min + 1)) + min;</span><br><span class="line"></span><br><span class="line"><span class="comment"># randomIntegerInRange(0, 5) -&gt; 2</span></span><br></pre></td></tr></table></figure><h3 id="33-èŒƒå›´å†…çš„éšæœºæ•°"><a href="#33-èŒƒå›´å†…çš„éšæœºæ•°" class="headerlink" title="33. èŒƒå›´å†…çš„éšæœºæ•°"></a>33. èŒƒå›´å†…çš„éšæœºæ•°</h3><blockquote><p>ä½¿ç”¨Math.random()ç”Ÿæˆä¸€ä¸ªéšæœºå€¼ï¼Œä½¿ç”¨ä¹˜æ³•å°†å…¶æ˜ å°„åˆ°æ‰€éœ€çš„èŒƒå›´ã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const randomInRange = (min, max) =&gt; Math.random() * (max - min) + min;</span><br><span class="line"></span><br><span class="line"><span class="comment"># randomInRange(2,10) -&gt; 6.0211363285087005</span></span><br></pre></td></tr></table></figure><h3 id="34-éšæœºåŒ–æ•°ç»„çš„é¡ºåº"><a href="#34-éšæœºåŒ–æ•°ç»„çš„é¡ºåº" class="headerlink" title="34. éšæœºåŒ–æ•°ç»„çš„é¡ºåº"></a>34. éšæœºåŒ–æ•°ç»„çš„é¡ºåº</h3><blockquote><p>ä½¿ç”¨sort()é‡æ–°æ’åºå…ƒç´ ï¼Œåˆ©ç”¨Math.random()æ¥éšæœºæ’åºã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const shuffle = arr =&gt; arr.sort(() =&gt; Math.random() - 0.5);</span><br><span class="line"></span><br><span class="line"><span class="comment"># shuffle([1,2,3]) -&gt; [2,3,1]</span></span><br></pre></td></tr></table></figure><h3 id="35-é‡å®šå‘åˆ°URL"><a href="#35-é‡å®šå‘åˆ°URL" class="headerlink" title="35. é‡å®šå‘åˆ°URL"></a>35. é‡å®šå‘åˆ°URL</h3><blockquote><p>ä½¿ç”¨window.location.hrefæˆ–window.location.replace()é‡å®šå‘åˆ°urlã€‚ ä¼ é€’ç¬¬äºŒä¸ªå‚æ•°æ¥æ¨¡æ‹Ÿé“¾æ¥ç‚¹å‡»(true â€“ default)æˆ–HTTPé‡å®šå‘(false)ã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const redirect = (url, asLink = <span class="literal">true</span>) =&gt;</span><br><span class="line"></span><br><span class="line">  asLink ? window.location.href = url : window.location.replace(url);</span><br><span class="line"></span><br><span class="line"><span class="comment"># redirect('https://google.com')</span></span><br></pre></td></tr></table></figure><h3 id="36-åè½¬ä¸€ä¸ªå­—ç¬¦ä¸²"><a href="#36-åè½¬ä¸€ä¸ªå­—ç¬¦ä¸²" class="headerlink" title="36.  åè½¬ä¸€ä¸ªå­—ç¬¦ä¸²"></a>36.  åè½¬ä¸€ä¸ªå­—ç¬¦ä¸²</h3><blockquote><p>ä½¿ç”¨æ•°ç»„è§£æ„å’ŒArray.reverse()æ¥é¢ å€’å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦é¡ºåºã€‚åˆå¹¶å­—ç¬¦ä»¥ä½¿ç”¨join(â€˜â€™)è·å–å­—ç¬¦ä¸²ã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const reverseString = str =&gt; [...str].reverse().join(<span class="string">''</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment"># reverseString('foobar') -&gt; 'raboof'</span></span><br></pre></td></tr></table></figure><h3 id="37-RGBåˆ°åå…­è¿›åˆ¶"><a href="#37-RGBåˆ°åå…­è¿›åˆ¶" class="headerlink" title="37.  RGBåˆ°åå…­è¿›åˆ¶"></a>37.  RGBåˆ°åå…­è¿›åˆ¶</h3><blockquote><p>ä½¿ç”¨æŒ‰ä½å·¦ç§»è¿ç®—ç¬¦(&lt;&lt;)å’ŒtoString(16)ï¼Œç„¶åpadStart(6ï¼Œâ€œ0â€)å°†ç»™å®šçš„RGBå‚æ•°è½¬æ¢ä¸ºåå…­è¿›åˆ¶å­—ç¬¦ä¸²ä»¥è·å¾—6ä½åå…­è¿›åˆ¶å€¼ã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const rgbToHex = (r, g, b) =&gt; ((r &lt;&lt; 16) + (g &lt;&lt; 8) + b).toString(16).padStart(6, <span class="string">'0'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment"># rgbToHex(255, 165, 1) -&gt; 'ffa501'</span></span><br></pre></td></tr></table></figure><h3 id="38-æ»šåŠ¨åˆ°é¡¶éƒ¨"><a href="#38-æ»šåŠ¨åˆ°é¡¶éƒ¨" class="headerlink" title="38.  æ»šåŠ¨åˆ°é¡¶éƒ¨"></a>38.  æ»šåŠ¨åˆ°é¡¶éƒ¨</h3><blockquote><p>ä½¿ç”¨document.documentElement.scrollTopæˆ–document.body.scrollTopè·å–åˆ°é¡¶éƒ¨çš„è·ç¦»ã€‚ä»é¡¶éƒ¨æ»šåŠ¨ä¸€å°éƒ¨åˆ†è·ç¦»ã€‚ä½¿ç”¨window.requestAnimationFrame()æ¥æ»šåŠ¨ã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">const scrollToTop = _ =&gt; &#123;</span><br><span class="line"></span><br><span class="line">  const c = document.documentElement.scrollTop || document.body.scrollTop;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (c &gt; 0) &#123;</span><br><span class="line"></span><br><span class="line">    window.requestAnimationFrame(scrollToTop);</span><br><span class="line"></span><br><span class="line">    window.scrollTo(0, c - c / 8);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment"># scrollToTop()</span></span><br></pre></td></tr></table></figure><h3 id="39-éšæœºæ•°ç»„å€¼"><a href="#39-éšæœºæ•°ç»„å€¼" class="headerlink" title="39.  éšæœºæ•°ç»„å€¼"></a>39.  éšæœºæ•°ç»„å€¼</h3><blockquote><p>ä½¿ç”¨Array.map()å’ŒMath.random()åˆ›å»ºä¸€ä¸ªéšæœºå€¼çš„æ•°ç»„ã€‚ä½¿ç”¨Array.sort()æ ¹æ®éšæœºå€¼å¯¹åŸå§‹æ•°ç»„çš„å…ƒç´ è¿›è¡Œæ’åºã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const shuffle = arr =&gt; &#123;</span><br><span class="line">  <span class="built_in">let</span> r = arr.map(Math.random);</span><br><span class="line">  <span class="built_in">return</span> arr.sort((a, b) =&gt; r[a] - r[b]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># shuffle([1, 2, 3] -&gt; [2, 1, 3])</span></span><br></pre></td></tr></table></figure><h3 id="40-æ•°ç»„ä¹‹é—´çš„ç›¸ä¼¼æ€§"><a href="#40-æ•°ç»„ä¹‹é—´çš„ç›¸ä¼¼æ€§" class="headerlink" title="40.  æ•°ç»„ä¹‹é—´çš„ç›¸ä¼¼æ€§"></a>40.  æ•°ç»„ä¹‹é—´çš„ç›¸ä¼¼æ€§</h3><blockquote><p>ä½¿ç”¨filter()ç§»é™¤ä¸æ˜¯valuesçš„ä¸€éƒ¨åˆ†å€¼ï¼Œä½¿ç”¨includes()ç¡®å®šã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const similarity = (arr, values) =&gt; arr.filter(v =&gt; values.includes(v));</span><br><span class="line"></span><br><span class="line"><span class="comment"># similarity([1,2,3], [1,2,4]) -&gt; [1,2]</span></span><br></pre></td></tr></table></figure><h3 id="41-æŒ‰å­—ç¬¦ä¸²æ’åº-æŒ‰å­—æ¯é¡ºåºæ’åˆ—"><a href="#41-æŒ‰å­—ç¬¦ä¸²æ’åº-æŒ‰å­—æ¯é¡ºåºæ’åˆ—" class="headerlink" title="41.  æŒ‰å­—ç¬¦ä¸²æ’åº(æŒ‰å­—æ¯é¡ºåºæ’åˆ—)"></a>41.  æŒ‰å­—ç¬¦ä¸²æ’åº(æŒ‰å­—æ¯é¡ºåºæ’åˆ—)</h3><blockquote><p>ä½¿ç”¨split(â€˜â€™)åˆ†å‰²å­—ç¬¦ä¸²ï¼Œsort()ä½¿ç”¨localeCompare()ï¼Œä½¿ç”¨join(â€˜â€™)é‡æ–°ç»„åˆã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const sortCharactersInString = str =&gt;</span><br><span class="line"></span><br><span class="line">  str.split(<span class="string">''</span>).sort((a, b) =&gt; a.localeCompare(b)).join(<span class="string">''</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment"># sortCharactersInString('cabbage') -&gt; 'aabbceg'</span></span><br></pre></td></tr></table></figure><h3 id="42-æ•°ç»„æ€»å’Œ"><a href="#42-æ•°ç»„æ€»å’Œ" class="headerlink" title="42. æ•°ç»„æ€»å’Œ"></a>42. æ•°ç»„æ€»å’Œ</h3><blockquote><p>ä½¿ç”¨reduce()å°†æ¯ä¸ªå€¼æ·»åŠ åˆ°ç´¯åŠ å™¨ï¼Œåˆå§‹åŒ–å€¼ä¸º0ã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const sum = arr =&gt; arr.reduce((acc, val) =&gt; acc + val, 0);</span><br><span class="line"></span><br><span class="line"><span class="comment"># sum([1,2,3,4]) -&gt; 10</span></span><br></pre></td></tr></table></figure><h3 id="43-äº¤æ¢ä¸¤ä¸ªå˜é‡çš„å€¼"><a href="#43-äº¤æ¢ä¸¤ä¸ªå˜é‡çš„å€¼" class="headerlink" title="43. äº¤æ¢ä¸¤ä¸ªå˜é‡çš„å€¼"></a>43. äº¤æ¢ä¸¤ä¸ªå˜é‡çš„å€¼</h3><blockquote><p>ä½¿ç”¨æ•°ç»„è§£æ„æ¥äº¤æ¢ä¸¤ä¸ªå˜é‡ä¹‹é—´çš„å€¼ã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[varA, varB] = [varB, varA];</span><br><span class="line"></span><br><span class="line"><span class="comment"># [x, y] = [y, x]</span></span><br></pre></td></tr></table></figure><h3 id="44-åˆ—è¡¨çš„tail"><a href="#44-åˆ—è¡¨çš„tail" class="headerlink" title="44. åˆ—è¡¨çš„tail"></a>44. åˆ—è¡¨çš„tail</h3><blockquote><p>è¿”å›arr.slice(1)</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const tail = arr =&gt; arr.length &gt; 1 ? arr.slice(1) : arr;</span><br><span class="line"></span><br><span class="line"><span class="comment"># tail([1,2,3]) -&gt; [2,3]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># tail([1]) -&gt; [1]</span></span><br></pre></td></tr></table></figure><h3 id="45-æ•°ç»„å”¯ä¸€å€¼"><a href="#45-æ•°ç»„å”¯ä¸€å€¼" class="headerlink" title="45. æ•°ç»„å”¯ä¸€å€¼"></a>45. æ•°ç»„å”¯ä¸€å€¼</h3><blockquote><p>ä½¿ç”¨ES6 Setå’Œâ€¦ restæ“ä½œç¬¦å»æ‰æ‰€æœ‰é‡å¤å€¼ã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const unique = arr =&gt; [...new Set(arr)];</span><br><span class="line"></span><br><span class="line"><span class="comment"># unique([1,2,2,3,4,4,5]) -&gt; [1,2,3,4,5]</span></span><br></pre></td></tr></table></figure><h3 id="46-URLå‚æ•°"><a href="#46-URLå‚æ•°" class="headerlink" title="46. URLå‚æ•°"></a>46. URLå‚æ•°</h3><blockquote><p>ä½¿ç”¨match() ä¸é€‚å½“çš„æ­£åˆ™è¡¨è¾¾å¼æ¥è·å¾—æ‰€æœ‰é”®å€¼å¯¹ï¼Œé€‚å½“çš„map() ã€‚ä½¿ç”¨Object.assign()å’Œspreadè¿ç®—ç¬¦(â€¦)å°†æ‰€æœ‰é”®å€¼å¯¹ç»„åˆåˆ°ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œå°†location.searchä½œä¸ºå‚æ•°ä¼ é€’ç»™å½“å‰urlã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const getUrlParameters = url =&gt;</span><br><span class="line"></span><br><span class="line">  url.match(/([^?=&amp;]+)(=([^&amp;]*))/g).reduce(</span><br><span class="line"></span><br><span class="line">    (a, v) =&gt; (a[v.slice(0, v.indexOf(<span class="string">'='</span>))] = v.slice(v.indexOf(<span class="string">'='</span>) + 1), a), &#123;&#125;</span><br><span class="line"></span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line"><span class="comment"># getUrlParameters('http://url.com/page?name=Adam&amp;surname=Smith') -&gt; &#123;name: 'Adam', surname: 'Smith'&#125;</span></span><br></pre></td></tr></table></figure><h3 id="47-UUIDç”Ÿæˆå™¨"><a href="#47-UUIDç”Ÿæˆå™¨" class="headerlink" title="47. UUIDç”Ÿæˆå™¨"></a>47. UUIDç”Ÿæˆå™¨</h3><blockquote><p>ä½¿ç”¨crypto APIç”Ÿæˆç¬¦åˆRFC4122ç‰ˆæœ¬4çš„UUIDã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const uuid = _ =&gt;</span><br><span class="line"></span><br><span class="line">  ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, c =&gt;</span><br><span class="line"></span><br><span class="line">    (c ^ crypto.getRandomValues(new Uint8Array(1))[0] &amp; 15 &gt;&gt; c / 4).toString(16)</span><br><span class="line"></span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line"># uuid() -&gt; &apos;7982fcfe-5721-4632-bede-6000885be57d&apos;</span><br></pre></td></tr></table></figure><h3 id="48-éªŒè¯æ•°å­—"><a href="#48-éªŒè¯æ•°å­—" class="headerlink" title="48.  éªŒè¯æ•°å­—"></a>48.  éªŒè¯æ•°å­—</h3><blockquote><p>ä½¿ç”¨ï¼isNaNå’ŒparseFloat()æ¥æ£€æŸ¥å‚æ•°æ˜¯å¦æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œä½¿ç”¨isFinite()æ¥æ£€æŸ¥æ•°å­—æ˜¯å¦æ˜¯æœ‰é™çš„ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const validateNumber = n =&gt; !isNaN(parseFloat(n)) &amp;&amp; isFinite(n) &amp;&amp; Number(n) == n;</span><br><span class="line"></span><br><span class="line"># validateNumber(&apos;10&apos;) -&gt; true</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;è¯¥é¡¹ç›®æ¥è‡ªäº Github ç”¨æˆ· Chalarangeloï¼Œç›®å‰å·²åœ¨ Github ä¸Šè·å¾—äº† 5000 å¤šStarï¼Œç²¾å¿ƒæ”¶é›†äº†å¤šè¾¾ 48 ä¸ªæœ‰ç”¨çš„ JavaScript ä»£ç ç‰‡æ®µï¼Œè¯¥ç”¨æˆ·çš„ä»£ç å¯ä»¥è®©ç¨‹åºå‘˜åœ¨ 30 ç§’ç”šè‡³æ›´å°‘çš„æ—¶é—´å†…ç†è§£è¿™äº›ç»å¸¸ç”¨åˆ°</summary>
      
    
    
    
    <category term="å‰ç«¯" scheme="https://gofugui.github.io/categories/å‰ç«¯/"/>
    
    
    <category term="JavaScript" scheme="https://gofugui.github.io/tags/JavaScript/"/>
    
    <category term="Web" scheme="https://gofugui.github.io/tags/Web/"/>
    
    <category term="ES6" scheme="https://gofugui.github.io/tags/ES6/"/>
    
  </entry>
  
</feed>
